"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[20115],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var t=s(96540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},48958:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var t=s(74848),r=s(28453);const i={},o=void 0,a={id:"frontend/Advanced/Events system/Asynchronous Functions",title:"Asynchronous Functions",description:"This chapter is in development",source:"@site/docs/frontend/Advanced/Events system/Asynchronous Functions.md",sourceDirName:"frontend/Advanced/Events system",slug:"/frontend/Advanced/Events system/Asynchronous Functions",permalink:"/frontend/Advanced/Events system/Asynchronous Functions",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1749492433e3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Event System",permalink:"/frontend/Advanced/Events system/event-generators"},next:{title:"Cells and windows",permalink:"/frontend/Advanced/Events system/Cells and windows"}},c={},l=[{value:"Limitations",id:"limitations",level:2},{value:"Side by side comparison",id:"side-by-side-comparison",level:2},{value:"Naturally async functions",id:"naturally-async-functions",level:2},{value:"Examples",id:"examples",level:2},{value:"Heavy branching",id:"heavy-branching",level:3}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"This chapter is in development"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["See the reference section on ",(0,t.jsx)(n.a,{href:"/frontend/Reference/Misc/Async",children:"Async"})]})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Asynchronous programming is a technique that enables your program to start a potentially long-running task (or a request from a user) and still be able to be responsive to other events while that task runs, rather than having to wait until that task has finished. Once that task has finished, your program is presented with the result."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This is a relatively new concept inherited from other modern languages. It allows to write asynchronous sequential code avoiding callback hell. ",(0,t.jsx)(n.code,{children:"AsyncFunction"})," and ",(0,t.jsx)(n.code,{children:"Await"})," expressions and their concepts are built on top of ",(0,t.jsx)(n.a,{href:"/frontend/Reference/Misc/Promise",children:"Promise"}),"s framework."]}),"\n",(0,t.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,t.jsxs)(n.p,{children:["The following constructions are supported with ",(0,t.jsx)(n.code,{children:"Await"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Set"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"CompoundExpression"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"If"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Module"}),", ",(0,t.jsx)(n.code,{children:"With"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_Symbol"})," or any other singular expressions"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"What is not supported (by now)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Loops: ",(0,t.jsx)(n.code,{children:"While"}),", ",(0,t.jsx)(n.code,{children:"For"}),", ",(0,t.jsx)(n.code,{children:"Do"})]}),"\n",(0,t.jsxs)(n.li,{children:["Tables and maps: ",(0,t.jsx)(n.code,{children:"Map"}),", ",(0,t.jsx)(n.code,{children:"Table"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"side-by-side-comparison",children:"Side by side comparison"}),"\n",(0,t.jsxs)(n.p,{children:["Here is the same code-block using promises and ",(0,t.jsx)(n.code,{children:"AsyncFunction"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mathematica",metastring:'title="Using promises"',children:'temperature = "Loading";\nTextView[temperature // Offload]\n\nThen[ParallelSubmitAsync[URLRead["https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current=temperature_2m"]], Function[response, \n    temperature = ImportByteArray[response["BodyByteArray"], "RawJSON"]["current", "temperature_2m"];\n]]\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mathematica",metastring:'title="Using AsyncFunction"',children:'temperature = "";\nTextView[temperature // Offload]\n\nAsyncFunction[Null, Module[{response},\n  temperature = "Loading";\n  response = ParallelSubmitAsync[URLRead["https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current=temperature_2m"]] // Await;\n  temperature = ImportByteArray[response["BodyByteArray"], "RawJSON"]["current", "temperature_2m"];\n]][]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The things are getting much more readable if you have multiple nested ",(0,t.jsx)(n.code,{children:"Then"})," and promises."]}),"\n",(0,t.jsx)(n.h2,{id:"naturally-async-functions",children:"Naturally async functions"}),"\n",(0,t.jsxs)(n.p,{children:["There are many built-in functions, which by the default return ",(0,t.jsx)(n.code,{children:"Promise"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/frontend/Reference/Frontend%20IO/FrontFetchAsync",children:"FrontFetchAsync"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/frontend/Reference/Frontend%20IO/ChoiceDialogAsync",children:"ChoiceDialogAsync"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/frontend/Reference/Frontend%20IO/SystemDialogInputAsync",children:"SystemDialogInputAsync"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/frontend/Reference/Misc/Parallel#%60ParallelSubmitAsync%60",children:(0,t.jsx)(n.code,{children:"ParallelSubmitAsync"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/frontend/Reference/Misc/Parallel#%60ParallelSubmitFunctionAsync%60",children:(0,t.jsx)(n.code,{children:"ParallelSubmitFunctionAsync"})})}),"\n",(0,t.jsxs)(n.li,{children:["Any ",(0,t.jsx)(n.code,{children:"EventObject"}),": ",(0,t.jsx)(n.a,{href:"/frontend/Reference/GUI/InputButton",children:"InputButton"})," and etc"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsxs)(n.p,{children:["Be aware of the evaluation context loss after each ",(0,t.jsx)(n.code,{children:"Await"})," statement. Provide ",(0,t.jsx)(n.a,{href:"/frontend/Reference/Cells%20and%20Notebook/EvaluationNotebook",children:"EvaluationNotebook"}),", ",(0,t.jsx)(n.a,{href:"/frontend/Reference/Cells%20and%20Notebook/EvaluationCell",children:"EvaluationCell"})," or ",(0,t.jsx)(n.a,{href:"/frontend/Reference/Frontend%20IO/CurrentWindow",children:"CurrentWindow"})," if necessary."]})}),"\n",(0,t.jsx)(n.h3,{id:"heavy-branching",children:"Heavy branching"}),"\n",(0,t.jsxs)(n.p,{children:["In this example we demonstrate ",(0,t.jsx)(n.strong,{children:"branching"}),", ",(0,t.jsx)(n.strong,{children:"assignments"})," and compound expressions in asynchronous functions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mathematica",children:'p1 = Promise[];\np2 = Promise[];\np3 = Promise[];\n\nwin = CurrentWindow[];\n\nf = AsyncFunction[Null, With[{},\n  Speak["Press p1", "Window"->win];\n  p1 // Await;\n  Speak["Press p2A or p2B", "Window"->win];\n  Module[{m = -100},\n    m = Await[p2];\n    Speak["Pause 2 seconds", "Window"->win];\n    PauseAsync[2] // Await;\n    \n    If[m > 4,\n      Speak["Press p3", "Window"->win];\n      m = Await[p3];\n    ];\n\n    StringTemplate["Result: ``"][m]\n  ]\n]];\n\nThen[f[], Speak];\n'})}),"\n",(0,t.jsx)(n.p,{children:"To simulate async events here we use buttons"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mathematica",children:'Button["p1", EventFire[p1, Resolve, True]]\nButton["p2A", EventFire[p2, Resolve, 1]]\nButton["p2B", EventFire[p2, Resolve, 5]]\nButton["p3", EventFire[p3, Resolve, 10]]\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);