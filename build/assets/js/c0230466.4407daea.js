"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[18995],{6846:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/Pasted image 20250210130401-7170ae332f32e0f49b05f6a6eb4866eb.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(96540);const s={},i=a.createContext(s);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:n},e.children)}},92654:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var a=t(74848),s=t(28453);const i={sidebar_position:2},o=void 0,r={id:"frontend/Development/Architecture",title:"Architecture",description:"WLJS Notebook is an application built on top of the Wolfram Engine (a freeware distribution of Wolfram Language) with a web-based GUI. Naturally, we isolate evaluation to a separate process of the Wolfram Engine, similar to Mathematica. Both can directly interact with the content rendered on the page.",source:"@site/docs/frontend/Development/Architecture.md",sourceDirName:"frontend/Development",slug:"/frontend/Development/Architecture",permalink:"/frontend/Development/Architecture",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1748709296e3,sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/frontend/Development/Overview"},next:{title:"Iframe",permalink:"/frontend/Development/API/Iframe"}},l={},c=[{value:"Windows and GUI",id:"windows-and-gui",level:2},{value:"Notebooks",id:"notebooks",level:2},{value:"WLJS Interpreter",id:"wljs-interpreter",level:2},{value:"Communication",id:"communication",level:2},{value:"Wolfram Paclets",id:"wolfram-paclets",level:2},{value:"Extensions (Plugins)",id:"extensions-plugins",level:2}];function d(e){const n={a:"a",annotation:"annotation",em:"em",h2:"h2",img:"img",li:"li",math:"math",mn:"mn",mrow:"mrow",msup:"msup",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(6846).A+"",width:"2422",height:"928"})}),"\n",(0,a.jsx)(n.p,{children:"WLJS Notebook is an application built on top of the Wolfram Engine (a freeware distribution of Wolfram Language) with a web-based GUI. Naturally, we isolate evaluation to a separate process of the Wolfram Engine, similar to Mathematica. Both can directly interact with the content rendered on the page."}),"\n",(0,a.jsx)(n.h2,{id:"windows-and-gui",children:"Windows and GUI"}),"\n",(0,a.jsxs)(n.p,{children:["We use a superset of Wolfram Language and HTML\u2014",(0,a.jsx)(n.a,{href:"https://jerryi.github.io/wlx-docs/",children:"WLX"}),"\u2014to build app components (similar to JSX) and the entire GUI. Together with a small UI framework, it allows seamless integration of JS into windows, which is why we do not explicitly separate backend and frontend parts in the architecture. The state is not stored on the client; all UI updates are performed by the main Wolfram Engine."]}),"\n",(0,a.jsx)(n.h2,{id:"notebooks",children:"Notebooks"}),"\n",(0,a.jsxs)(n.p,{children:["The notebook interface is simply a separate view-component of the app that loads a notebook file, renders it, and evaluates its cells using specialized evaluators. The evaluator to use is determined by the cell type via special patterns at the beginning of the cell content. Evaluators vary significantly, from ",(0,a.jsx)(n.a,{href:"/frontend/Cell%20types/Javascript",children:"JavaScript"})," cells that do not involve the Wolfram Kernel to ",(0,a.jsx)(n.a,{href:"/frontend/Cell%20types/Slides",children:"Slides"})," and ",(0,a.jsx)(n.a,{href:"/frontend/Cell%20types/Input%20cell",children:"Wolfram Language"})," input cells. All notebooks are stored as associations, with input/output expressions presented as plain strings. The main kernel does not interpret a cell's content."]}),"\n",(0,a.jsx)(n.h2,{id:"wljs-interpreter",children:"WLJS Interpreter"}),"\n",(0,a.jsxs)(n.p,{children:["A key component of WLJS Notebook is its deep integration with JavaScript. Unlike most notebook solutions, we do not convert cell content into a special format before rendering it on the page. To display a graph, code, or button, we send the Wolfram Expression directly to the browser and let JavaScript interpret it in place. To enable this, we implemented a compact (~3 kB) JavaScript-based WL interpreter called the ",(0,a.jsx)(n.em,{children:"WLJS Interpreter"}),". In fact, our API also relies on Wolfram Expressions\u2014handling all dynamics, graphics, sound, and even GUI management through the WLJS Interpreter. There is a 1:1 correspondence between most JavaScript objects and Wolfram Expressions."]}),"\n",(0,a.jsx)(n.h2,{id:"communication",children:"Communication"}),"\n",(0,a.jsxs)(n.p,{children:["We use as much SSR (Server-Side Rendering) as possible via a basic HTTP channel. The ",(0,a.jsx)(n.em,{children:"main kernel"})," establishes a WebSocket connection to provide interactivity and avoid long polling. Each ",(0,a.jsx)(n.em,{children:"evaluation kernel"})," (limited to one by the freeware license) has its own dedicated WebSocket connection to the page. This approach ensures optimal performance for dynamic evaluations involving real-time video streaming or updating ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mn,{children:"1"}),(0,a.jsxs)(n.msup,{children:[(0,a.jsx)(n.mn,{children:"0"}),(0,a.jsx)(n.mn,{children:"6"})]})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"10^6"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsx)(n.span,{className:"mord",children:"1"}),(0,a.jsxs)(n.span,{className:"mord",children:[(0,a.jsx)(n.span,{className:"mord",children:"0"}),(0,a.jsx)(n.span,{className:"msupsub",children:(0,a.jsx)(n.span,{className:"vlist-t",children:(0,a.jsx)(n.span,{className:"vlist-r",children:(0,a.jsx)(n.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(n.span,{className:"mord mtight",children:"6"})})]})})})})})]})]})})]})," polygons in a 3D plot. We use a binary protocol instead of a text-based one to update data within expressions."]}),"\n",(0,a.jsx)(n.h2,{id:"wolfram-paclets",children:"Wolfram Paclets"}),"\n",(0,a.jsx)(n.p,{children:"Despite differences between Mathematica and WLJS Notebook, both share the same Wolfram Language with its standard library set. Consequently, we support standard WL packages in any form."}),"\n",(0,a.jsx)(n.h2,{id:"extensions-plugins",children:"Extensions (Plugins)"}),"\n",(0,a.jsx)(n.p,{children:"Extensions or plugins are a significant part of WLJS Notebook. They function as composite packages, which may include:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Features for the main kernel"}),"\n",(0,a.jsx)(n.li,{children:"Features for the evaluation kernel"}),"\n",(0,a.jsx)(n.li,{children:"JavaScript libraries"}),"\n",(0,a.jsx)(n.li,{children:"UI elements for the notebook interface"}),"\n",(0,a.jsx)(n.li,{children:"Implementations of new cell types"}),"\n",(0,a.jsx)(n.li,{children:"Interactive documentation in the form of small applications"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Each package has its own context name, which can be required by other extensions. WLJS Notebook is split into more than ten such modules."}),"\n",(0,a.jsxs)(n.p,{children:["You can write and distribute your own extensions via GitHub. See more details in ",(0,a.jsx)(n.a,{href:"/frontend/Development/Plugins/Structure",children:"Structure"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);