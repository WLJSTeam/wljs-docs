"use strict";(self.webpackChunkwljs_docs=self.webpackChunkwljs_docs||[]).push([[3105],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:i,l[1]=o;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3e3:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294);const i={crush:(e,t=50)=>{let n=[];const a="-_.!~*'()";for(let r=127;--r;)(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||a.includes(String.fromCharCode(r)))&&n.push(String.fromCharCode(r));for(let r=32;r<255;++r){let e=String.fromCharCode(r);"\\"==e||n.includes(e)||n.unshift(e)}e=e.replace(new RegExp("\x01","g"),"");const i=((e,n)=>{let a=n.length,i="";const r=e=>encodeURI(encodeURIComponent(e)).replace(/%../g,"i").length,l=e=>{let t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t>=56320&&t<=57343||n>=55296&&n<=56319};let o={};for(let s=2;s<t;s++)for(let t=0;t<e.length-s;++t){let n=e.substr(t,s);if(o[n])continue;if(l(n))continue;let a=1;for(let i=e.indexOf(n,t+s);i>=0;++a)i=e.indexOf(n,i+s);a>1&&(o[n]=a)}for(;;){for(;a--&&e.includes(n[a]););if(a<0)break;let t,l=n[a],s=0,c=r(l);for(let e in o){let n=o[e],a=(n-1)*r(e)-(n+1)*c;i.length||(a-=r("\x01")),a<=0?delete o[e]:a>s&&(t=e,s=a)}if(!t)break;e=e.split(t).join(l)+l+t,i=l+i;let p={};for(let n in o){let a=n.split(t).join(l),i=0;for(let t=e.indexOf(a);t>=0;++i)t=e.indexOf(a,t+a.length);i>1&&(p[a]=i)}o=p}return{a:e,b:i}})(e=r(e),n);let l=i.a;return i.b.length&&(l+="\x01"+i.b),l+="_",l},uncrush:e=>{const t=(e=e.substring(0,e.length-1)).split("\x01");let n=t[0];if(t.length>1){let e=t[1];for(let t of e){let e=n.split(t);n=e.join(e.pop())}}return r(n,0)}},r=(e,t=1)=>{const n=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],a=(e,t)=>{let n=new RegExp(`${(t[2]?t[2]:"")+t[0]}|${(t[3]?t[3]:"")+t[1]}`,"g");return e.replace(n,(e=>e===t[0]?t[1]:t[0]))};if(t)for(let i=0;i<n.length;++i)e=a(e,n[i]);else for(let i=n.length;i--;)e=a(e,n[i]);return e};function l(e){let{children:t,code:n,width:r,height:l}=e;(0,a.useRef)();const o=JSON.parse(i.uncrush(decodeURIComponent(n))),s=o.js,c=o.compiled,p=`<html>\n  <head>  \n\n    <script>             \n    function isElement(o){\n      return (\n        typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2\n        o && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName==="string"\n    );\n    }\n    <\/script>\n \n  </head>\n  <body>\n    <div id="canvas"></div>\n\n    \n    <script type="module" src="https://cdn.jsdelivr.net/gh/JerryI/wljs-interpreter@main/dist/interpreter.js"><\/script>\n    <script type="module" src="https://cdn.jsdelivr.net/gh/JerryI/wljs-interpreter@main/dist/core.js"><\/script>\n\n    ${(o.includes||[]).map((e=>`<script type="module" src="${e}"><\/script>`)).join("")}\n    \n\n    <script type="module">\n    console.log('start');\n      let global = {};\n      let env = {global: global};\n\n\n        const $f = async () => {\n          ${s}\n        };\n\n        const r = await $f();\n\n        console.log('js');\n\n        if (isElement(r)) {\n          document.getElementById('canvas').appendChild(r);\n        } else {\n          console.log(r);\n        }\n        console.log('op');\n        await interpretate(${JSON.stringify(c)}, env);\n        console.log('ok');\n\n\n    <\/script>\n  </body>\n  </html>`;return a.createElement("iframe",{width:r||"100%",height:l||"auto",srcDoc:p})}},979:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var a=n(7462),i=(n(7294),n(3905)),r=n(3e3);const l={sidebar_position:3},o="Definitions",s={unversionedId:"interpreter/Advanced/symbols",id:"interpreter/Advanced/symbols",title:"Definitions",description:"Let's make the things clear.",source:"@site/docs/interpreter/Advanced/symbols.md",sourceDirName:"interpreter/Advanced",slug:"/interpreter/Advanced/symbols",permalink:"/wljs-interpreter/docs/interpreter/Advanced/symbols",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/interpreter/Advanced/symbols.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"interpreterSidebar",previous:{title:"Containers",permalink:"/wljs-interpreter/docs/interpreter/Advanced/containers"},next:{title:"Meta markers",permalink:"/wljs-interpreter/docs/interpreter/Advanced/meta-markers"}},c={},p=[{value:"Functions",id:"functions",level:2},{value:"Direct call",id:"direct-call",level:3},{value:"\ud83c\udfa1 Example 1",id:"-example-1",level:4},{value:"Virtual container",id:"virtual-container",level:3},{value:"Auto-virtual container",id:"auto-virtual-container",level:3},{value:"\ud83c\udfa1 Example 2",id:"-example-2",level:4},{value:"Container with a storage",id:"container-with-a-storage",level:3},{value:"Storage was changed",id:"storage-was-changed",level:4},{value:"Subexpressions was updated",id:"subexpressions-was-updated",level:4},{value:"Variables",id:"variables",level:2},{value:"Conditions, when an instance will be created or not",id:"conditions-when-an-instance-will-be-created-or-not",level:3},{value:"\ud83c\udfa1 Example 3",id:"-example-3",level:4}],d={toc:p},u="wrapper";function m(e){let{components:t,...l}=e;return(0,i.kt)(u,(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"definitions"},"Definitions"),(0,i.kt)("p",null,"Let's make the things clear."),(0,i.kt)("h2",{id:"functions"},"Functions"),(0,i.kt)("p",null,"Let's talk about how to define a function properly"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"In wolfram language terms, there is no difference between function and a symbol. These are all expressions. However, here WLJS only mimics WL language paradigm, therefore here we distinguish function and a variable.")),(0,i.kt)("h3",{id:"direct-call"},"Direct call"),(0,i.kt)("p",null,"The simplest way of calling a defined function"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"MyFunction[data]\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2757\ufe0f no local memory, no identity ",(0,i.kt)("br",null),"\n\u2757\ufe0f not possible to dynamically update ",(0,i.kt)("br",null),"\n\u2705  the fastest and memory friendly way")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(3584).Z,width:"677",height:"177"})),(0,i.kt)("p",null,"A called function has no persistent memory except from the ",(0,i.kt)("inlineCode",{parentName:"p"},"env")," variable, which can share the data with other functions from the sub-tree - see more in ",(0,i.kt)("a",{parentName:"p",href:"/wljs-interpreter/docs/interpreter/Advanced/architecture"},"architecture")," (Meta Data). "),(0,i.kt)("p",null,"Somewhere in Javascript code there will be"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"core.MyFunction = async (args, env) => {...}\n")),(0,i.kt)("p",null,"An update method is good to define as well, therefore a function can be used together with updatable object called somewhere in the tree"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"core.MyFunction.update = core.MyFunction\ncore.MyFunction.destroy = core.MyFunction\n")),(0,i.kt)("p",null,"Since there is no identity of a function, there is no need to define a different function for ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"destroy"),"."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Any defined functions must return javascript object or nothing")),(0,i.kt)("p",null,"While in the arguments ",(0,i.kt)("inlineCode",{parentName:"p"},"args")," it is always Wolfram Expression, therefore ",(0,i.kt)("inlineCode",{parentName:"p"},"interpretate")," is always called on them to convert anything into javascript data type."),(0,i.kt)("h4",{id:"-example-1"},"\ud83c\udfa1 Example 1"),(0,i.kt)("p",null,"Let us write some cellular automatic machine starting from Javascript code"),(0,i.kt)("details",null,(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'//create js canvas\nconst canvas = document.createElement("canvas");\ncanvas.width = 400;\ncanvas.height = 100;\n\nlet context = canvas.getContext("2d");\n\n//a function to draw on it\ncore.MyFunction = async (args, env) => {\n  const data = await interpretate(args[0], env);\n\n  //draw our boxes\n  for(let i=0; i<40; ++i) {\n    for (let j=0; j<10; ++j) {\n      //new pixels\n      if (data[i][j] > 0) {\n        context.fillStyle = "rgba(255,0,0,0.4)"; \n        context.fillRect(i*10 + 1, j*10 + 1, 8, 8);\n      } else {\n        context.fillStyle = "rgba(255,255,255,0.4)"; \n        context.fillRect(i*10 + 1, j*10 + 1, 8, 8);\n      }\n    }\n  }\n}\n\nreturn canvas\n')),(0,i.kt)("p",null,"Now we can animate it in a loop using the simplest rule"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"data = RandomReal[{-1,1}, {40,10}];\n\nWhile[True, \n  data = Table[\n    If[(data[[i]][[If[j+1>10,1,j+1]]]  \n    + data[[If[i+1>40,1,i+1]]][[j]]  \n    + data[[If[i-1<1,40,i-1 ]]][[j]] \n    + data[[i]][[If[j-1<1,10,j-1 ]]]) > 0.5, 1, RandomReal[{-1,0}]] \n  , {i,1, 40}, {j,1,10}];   \n\n  Pause[0.05];\n\n  MyFunction[data];  \n];\n"))),(0,i.kt)("p",null,"The result will look like"),(0,i.kt)(r.Z,{code:"('wls!'VDq%5B(-1K)N(40K0)%3F99While%5BTrueN96VDTable%5B966If%5B%7BVXiAXIf%5Bj%2B1%3E10K%2Cj%2B1Y6%23If%5Bi%2B1%3E40K%2Ci%2B1YXjA6%23If%5Bi-1%3C1%2C40%2Ci-1%20YXjA%20%23iAXIf%5Bj-1%3C1K0%2Cj-1%20Y%7F%3E%200.5N1Nq%5B(-1%2C0)A%2096N(iKN40)N(jKK0)%3F6%20996Pause%5B0.05%3F996%25%5BV%3F69%3F'~js!'%5Ecreate%20js%20Z9const%20ZDdocument.createElement%7B%5C'Z%5C'%7D%3B9Z.widthD400%3B9Z.heightD100%3B99let%20contextDZ.getContext%7B%5C'2d%5C'%7D%3B99%5Ea%20function%20to%20draw%20on%20it9core.%25Dasync%20%7BargsNenv%7F%3D%3E%20(96const%20VDawait%20interpretate%7Bargs%5B0%5DNenv%7D%3B996%5Edraw%20our%20boxes96for%7Blet%20i%3D0zi%3C40z%2B%2Bi%7F(966for%20%7Blet%20j%3D0zj%3C10z%2B%2Bj%7F(9666%5Enew%20pixels9666if%20%7BV%5Bi%5D%5Bj%5D%20%3E%200%7DQ0%2C0%26B9666)%20elseQ255%2C255%26B9666)966)96)9)99return%20Z'~includes!%5B'https%3A%5Ecdn.jsdelivr.net%2Fgh%2FJerryI%2Fwljs-graphics-d3%40latest%2Fdist%2Fkernel.js'~.%2Fcurves.js'%5D~compiled!%5B'Hold'_q'7List%24K%5D7List'%2C40K0Y7While'%2Ctrue_Table'%227Plus'O~i'%5D%22Uj'K%5DK0%5DKUj'KYO%22Ui'K%5D%2C40%5DKUi'KY~j'%5DO7If'7Less'Ui%24%5DK%5D%2C40Ui%24Y~j'%5DO~i'%5D7If'7Less'Uj%24%5DK%5DK0Uj%24AA%2C0.5%5DK7q'7List%24%2C0Y7List'~i'K%2C40%5D7List'~j'KK0Y7Pause'%2C0.05%5D7%25'~V'%5D%2CnullA%2CnullA)6%20%207%2C%5B'9%5CnY%5DB%60Rect%7Bi%7Cj%7C8N8%7D%3BD%20%3D%20K%2C1N%2C%20O7Part'7Part'~V'Q%20(96%60StyleD%5C'rgba%7B255%2CU7Plus'~VdataX%5B%5BYA%5DZcanvas_7CompoundExpression'7Set'~V'7qRandomRealz%3B%20%227If'7Greater'%23966%2B%20VX%24'%2C-1%25MyFunction%26%2C0.4%7D%5C'z96%3F%5D%3B%5E%2F%2F%60666context.fill%7C*10%20%2B%201N%7F%7D%20%01%7F%7C%60%5E%3F%26%25%24%23%22zq_ZYXVUQONKDBA976_",mdxType:"Sandbox"},"Cellautomata"),(0,i.kt)("h3",{id:"virtual-container"},"Virtual container"),(0,i.kt)("p",null,"Things are getting interesting, if one need to store some additional information for the individual instance of the function and bind it to other objects for dynamics."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"FrontEndVirtual[{\n    MyFunction[data]\n}]\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2705  local memory and identity ",(0,i.kt)("br",null),"\n\u2705  possible to dynamically update and bind ",(0,i.kt)("br",null),"\n\u2757\ufe0f each time creates new instance")),(0,i.kt)("p",null,"See an example on a picture"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(3483).Z,width:"1607",height:"667"})),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"Do not put ",(0,i.kt)("inlineCode",{parentName:"p"},"FrontEndVirtual")," into the loops like ",(0,i.kt)("inlineCode",{parentName:"p"},"While"),", it will cause memory leakage!")),(0,i.kt)("p",null,"Now an interpreter can bind the inner objects or outer to our function, can forms a chain, that will be used for updates. For example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"data = 1;\n\nFrontEndVirtual[{\n    MyFunction[data]\n}];\n\nPause[1];\ndata = 10;\n")),(0,i.kt)("p",null,"Here as one can see, we use defined symbol ",(0,i.kt)("inlineCode",{parentName:"p"},"data"),", that by default has ",(0,i.kt)("a",{parentName:"p",href:"#Auto-virtual%20container"},"Auto-virtual container")," type, therefore on each call it also create an instance like ",(0,i.kt)("inlineCode",{parentName:"p"},"FrontEndVirtual")," implicitly and binds to the parent container (no matter how far is it in the call tree)."),(0,i.kt)("p",null,"Now let us write a simple function, that uses local memory and ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"core.MyFunction = async (args, env) => {\n    const data = await interpretate(args[0], env);\n    console.log('created!');\n    console.log(data);\n    //store the data into local storage\n    env.local.data = data;\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"core.MyFunction.update = async (args, env) => {\n    const newdata = await interpretate(args[0], env);\n    console.log('updated!');\n    console.log(newdata);\n    //apply some math for fun\n    env.local.data += newdata;\n    console.log('result: '+env.local.data);\n}\n")),(0,i.kt)("p",null,"On each update, this function will print the result of accumulated data."),(0,i.kt)("h3",{id:"auto-virtual-container"},"Auto-virtual container"),(0,i.kt)("p",null,"This process can be simplified if we use automatic detection"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"MyFunction[data]\n")),(0,i.kt)("p",null,"where somewhere in Javascript it is defined as"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"core.MyFunction.virtual = true\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2705  local memory and identity ",(0,i.kt)("br",null),"\n\u2705  possible to dynamically update and bind ",(0,i.kt)("br",null),"\n\u2757\ufe0f each time creates new instance ")),(0,i.kt)("p",null,"The result will be the same as in ",(0,i.kt)("a",{parentName:"p",href:"#Virtual%20container"},"Virtual container"),", but it is implicitly done by the interpreter."),(0,i.kt)("h4",{id:"-example-2"},"\ud83c\udfa1 Example 2"),(0,i.kt)("p",null,"Let us simplify the code from the previous example. Firstly we need to define update method for the function we have"),(0,i.kt)("details",null,(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"add a few lines")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"core.MyFunction.update = core.MyFunction;\ncore.MyFunction.virtual = true\n")),(0,i.kt)("p",null,"Now we can work with in a much prettier way"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"data = RandomReal[{-1,1}, {40,10}];\n\nMyFunction[data];\n\nWhile[True, \n  data = Table[\n    If[(data[[i]][[If[j+1>10,1,j+1]]]  \n    + data[[If[i+1>40,1,i+1]]][[j]]  \n    + data[[If[i-1<1,40,i-1 ]]][[j]] \n    + data[[i]][[If[j-1<1,10,j-1 ]]]) > 0.5, 1, RandomReal[{-1,0}]] \n  , {i,1, 40}, {j,1,10}];   \n\n  Pause[0.05];     \n];\n"))),(0,i.kt)("h3",{id:"container-with-a-storage"},"Container with a storage"),(0,i.kt)("p",null,"This way is usually used for all objects in cells of Wolfram Frontend and is not really useful, when you use WLJS as a standalone thing. Firstly you need to create a container or object, populate it with data and execute it"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},'CreateFrontEndObject[MyFunction[data], "obj"];\nFrontEndExecutable["obj"]\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2705  local memory and identity ",(0,i.kt)("br",null),"\n\u2705  possible to dynamically update and bind ",(0,i.kt)("br",null),"\n\u2705  expression is stored inside the object's storage ",(0,i.kt)("br",null),"\n\u2757\ufe0f each time creates new instance on ",(0,i.kt)("inlineCode",{parentName:"p"},"FrontEndExecutable")," call, that has a reference to the same object")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"All instances of ",(0,i.kt)("inlineCode",{parentName:"p"},"obj")," refer to the same storage")),(0,i.kt)("p",null,"An update can be caused in two scenarios"),(0,i.kt)("h4",{id:"storage-was-changed"},"Storage was changed"),(0,i.kt)("p",null,"To mutate the container's storage, one can simple use"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},'SetFrontEndObject["obj", MyFunction[data2]]\n')),(0,i.kt)("p",null,"But this is not great implementation, since we basically send the same function, but with an arguments. However it will cause ",(0,i.kt)("inlineCode",{parentName:"p"},"MyFunction.update")," method called on each instance, that we created using ",(0,i.kt)("inlineCode",{parentName:"p"},"FrontEndExecutable")," expression."),(0,i.kt)("h4",{id:"subexpressions-was-updated"},"Subexpressions was updated"),(0,i.kt)("p",null,"Sub-expression has to be also a container, in order to be able to bind updates to that. Let us show you an example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},'CreateFrontEndObject[{1,2,3}, "var"];\nCreateFrontEndObject[MyFunction[FrontEndExecutable["var"]], "obj"];\n\nFrontEndExecutable["obj"];\n')),(0,i.kt)("p",null,"The last line will create an instance of our ",(0,i.kt)("inlineCode",{parentName:"p"},"MyFunction")," container. To trigger an update, one can update this expression via"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},'SetFrontEndObject["var", {3,4,5}];\n')),(0,i.kt)("p",null,"It can be illustrated as following"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(9674).Z,width:"1528",height:"440"})),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Details on garbage collector"),"Normal containers are the only species, that can be destroyed properly. Because they are explicitly bounded to the corresponding widget.",(0,i.kt)("p",null,"Since virtual functions and nested objects creates each time new identity, there is no way on how to clean them up using ",(0,i.kt)("inlineCode",{parentName:"p"},"destory")," method on a tree."),(0,i.kt)("p",null,"However, they are still presented in a stack call, stored in ",(0,i.kt)("inlineCode",{parentName:"p"},"env.global.stack"),". Therefore, one can remove them by going through the stack and calling ",(0,i.kt)("inlineCode",{parentName:"p"},"dispose")," method.")),(0,i.kt)("h2",{id:"variables"},"Variables"),(0,i.kt)("p",null,"All variables or (expressions with only own-values) has virtual type by default, i.e.\n",(0,i.kt)("strong",{parentName:"p"},"they are executed in a virtual containers")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"a = 4;\n")),(0,i.kt)("p",null,"It extends ",(0,i.kt)("inlineCode",{parentName:"p"},"core")," context with a symbol ",(0,i.kt)("inlineCode",{parentName:"p"},"a"),", that has property "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"core.a.virtual = true //what actually happends\n")),(0,i.kt)("p",null,"Therefore, if it enters any container as a sub-expression, it will bind to the container. "),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2705  local memory and identity ",(0,i.kt)("br",null),"\n\u2705  possible to dynamically update and bind ",(0,i.kt)("br",null),"\n\u2757\ufe0f each time creates new instance  ",(0,i.kt)("br",null))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Set")," operation scans this symbol in the ",(0,i.kt)("inlineCode",{parentName:"p"},"core")," context, and if it exists, ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," method will be called with bubbling up to the nearest linked container"),(0,i.kt)("p",null,"i.e,"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"a = 4;\nFrontEndVirtual[{\n    MyFunction[a] (* BINDED *)\n}]     (*.       ^ *)    \n       (*        | *)\na = 5; (* UPDATE | *)\n")),(0,i.kt)("p",null,"The last line will cause an update of ",(0,i.kt)("inlineCode",{parentName:"p"},"MyFunction"),"."),(0,i.kt)("h3",{id:"conditions-when-an-instance-will-be-created-or-not"},"Conditions, when an instance will be created or not"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"a = 4;\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2757\ufe0f for the first time, there is no instance created, only ",(0,i.kt)("inlineCode",{parentName:"p"},"core.a"),"  ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"a = a + 1;\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2757\ufe0f set operation blocks instance creating for ",(0,i.kt)("inlineCode",{parentName:"p"},"a")," symbol ",(0,i.kt)("br",null),"\n\u2705 set operation causes ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," on the binded containers")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"While[True,\n    MyFunction[a] (* NO DYNAMIC LINK CREATED *)\n]\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2757\ufe0f while operation blocks instance creating to prevent memory leakage")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"MyFunction[a] (* DYNAMIC LINK CREATED *)\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2705 ",(0,i.kt)("inlineCode",{parentName:"p"},"a")," now is possibly binded to ",(0,i.kt)("inlineCode",{parentName:"p"},"MyFunction"),", if the last one is a virtual container")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"data = Table[b[[i]] + b[[i+1]], {i,1,Length[b]-1}];  \n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2757\ufe0f ",(0,i.kt)("inlineCode",{parentName:"p"},"Set")," blocks instance creating, no dynamic binding possible")),(0,i.kt)("p",null,"For example, when we plot graphics, by default ",(0,i.kt)("inlineCode",{parentName:"p"},"Line"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Point")," and etc has virtual type "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},"Graphics[\n    Table[Line[b[[i]]], {i, Length[b]}]\n] //FrontEndVirtual\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u2705  multiple instances of ",(0,i.kt)("inlineCode",{parentName:"p"},"b")," were created and binded to ",(0,i.kt)("inlineCode",{parentName:"p"},"Line"))),(0,i.kt)("p",null,"So this binding happends only between ",(0,i.kt)("inlineCode",{parentName:"p"},"Line")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"b[[i]]"),", no ",(0,i.kt)("inlineCode",{parentName:"p"},"Graphics")," function is involved."),(0,i.kt)("h4",{id:"-example-3"},"\ud83c\udfa1 Example 3"),(0,i.kt)("p",null,"Lines"),(0,i.kt)("details",null,(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-mathematica"},'a = Table[{{0,0}, RandomReal[{-1,1}, 2]}, {i, 100}];\n\nFrontEndVirtual[{\n    AttachDOM["canvas"];\n    Graphics[{RGBColor[0.0,1.0,1.0],  \n    \n    Table[Line[a[[i]]], {i, Length[a]}]}];\n}];\n\n(* mix them up *)\na = RandomSample[a];  \n'))),(0,i.kt)(r.Z,{code:"('wls!'%24TablX((U0)NZReal%5B(-1%2C1)N2%5D)N(iN100)Q99_%5B(7977AttachDOM%5B%5C'canvas%5C'Q977G%23%5B(RGBColor%5B0.U1.U1.0Y7%20977977TablXLinXa%5B%5Bi6%5DN(iNLength%5Ba%5D)%5D)NImageSize-%3E(40U400)Q9)Q%2099WhilXTrue%2C9%24ZSamplXaQ%209PausX0.15Q9Q9'~js!'console.log%7B%22Hi%22%7D%3B'~includes!%5B'https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2FJerryI%2Fwljs-g%23-d3%40latest%2Fdist%2Fkernel.js'~.%2Fcurves.js'%5D~compiled!%5B'Hold'8Setf*Table'KK%2CU0qZReal'K%2C-1%2C1Y26K~i'%2C1006q_'K8AttachDOM'~%22canvas%22'qG%23'K*RGBColor'%2CU1%2C1qTable'*Line'*Partf~i'6K~i'*Lengthf66*Rule'~ImageSize'K%2C40U4006Ynull6qWhile'%2Ctrue8Setf*ZSamplef6*Pause'%2C0.15Ynull6%2Cnull6)*%2C%5B'6%5D%5D7%20%208*CompoundExpression'*9%5CnK*List'N%2C%20Q%5D%3BU0%2CXe%5BY%5D%2CZRandom_FrontEndVirtualf'~a'q%5D*%23raphics%24a%20%3D%20%01%24%23qf_ZYXUQNK9876*_",height:"500",mdxType:"Sandbox"},"Lines example"))}m.isMDXComponent=!0},9674:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Calling as FE.excalidraw-225b21875bef9c949270560e08e01b99.svg"},3584:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Simple call.excalidraw-fb15dcf006eec2792c01f712dae68003.svg"},3483:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/virtualContainer.excalidraw-20525090f028ce1db23d271e765c6444.svg"}}]);