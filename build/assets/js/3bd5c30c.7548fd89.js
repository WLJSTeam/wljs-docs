"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[79856],{6344:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ggsiri-ezgif.com-video-to-gif-converter-21266b25d911baabdab6ed5602f1986c.gif"},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var i=t(96540);const s={},o=i.createContext(s);function l(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(o.Provider,{value:n},e.children)}},34266:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var i=t(74848),s=t(28453);const o={sidebar_position:5},l=void 0,r={id:"frontend/Cell types/ESM",title:"ESM",description:"Type .esm in the first line of an input cell",source:"@site/docs/frontend/Cell types/ESM.md",sourceDirName:"frontend/Cell types",slug:"/frontend/Cell types/ESM",permalink:"/frontend/Cell types/ESM",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1743582564e3,sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Javascript",permalink:"/frontend/Cell types/Javascript"},next:{title:"Files",permalink:"/frontend/Cell types/Files"}},a={},d=[{value:"Context",id:"context",level:2},{value:"this.ondestroy",id:"thisondestroy",level:3},{value:"this.return",id:"thisreturn",level:3},{value:"Example",id:"example",level:2},{value:"FAQ",id:"faq",level:2},{value:"How do I install an <code>npm</code> package?",id:"how-do-i-install-an-npm-package",level:3},{value:"How do I import a module?",id:"how-do-i-import-a-module",level:3}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Type ",(0,i.jsx)(n.code,{children:".esm"})," in the first line of an input cell"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This is a sub-type of ",(0,i.jsx)(n.a,{href:"/frontend/Cell%20types/Javascript",children:"JavaScript"})," cells, which uses the globally installed Node.js to compile the code as an ESM module."]}),"\n",(0,i.jsxs)(n.p,{children:["The main motivation behind this is to utilize ",(0,i.jsx)(n.code,{children:"npm"})," packages and build a standalone script, which can be executed directly in the notebook and stored there as well."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["It automatically creates a ",(0,i.jsx)(n.code,{children:"package.json"})," file in the directory of your notebook."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"This requires Node.js to be installed on your system."})}),"\n",(0,i.jsxs)(n.p,{children:["Unlike ",(0,i.jsx)(n.a,{href:"/frontend/Cell%20types/Javascript",children:"JavaScript"}),", it is not possible to return anything directly from an ESM module. However, the global context allows for asynchronous returns."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:".esm\n\nconst dom = document.createElement('span');\ndom.style.color = \"red\";\ndom.innerText = 'Hello World';\n\nthis.return(dom);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(67350).A+"",width:"1902",height:"122"})}),"\n",(0,i.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,i.jsx)(n.p,{children:"There are a few useful built-in objects accessible from the cell."}),"\n",(0,i.jsx)(n.h3,{id:"thisondestroy",children:"this.ondestroy"}),"\n",(0,i.jsx)(n.p,{children:"This function is called when a cell is destroyed. Assign any clean-up function to this object."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"this.ondestroy = () => {\n\t// Clean up resources\n}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["Always clean up any timers using the ",(0,i.jsx)(n.code,{children:"this.ondestroy"})," property. Otherwise, those timers and animation loops will continue to run even after re-evaluating the cell."]})}),"\n",(0,i.jsx)(n.h3,{id:"thisreturn",children:"this.return"}),"\n",(0,i.jsx)(n.p,{children:"This is a function that returns a given object to the output cell."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"this.return(dom);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"Let's create a Siri animation. First, install the dependencies:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:".sh\nnpm i siriwave --prefix .\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now create a simple animation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:".esm\n\nimport SiriWave from \"siriwave\";\n\nconst dom = document.createElement('div');\nthis.return(dom);\n\nlet siriWave;\n\nsiriWave = new SiriWave({\n\tcontainer: dom,\n\theight: 300,\n\tstyle: \"ios9\",\n\twidth: 600\n});\n\nsiriWave.start();\n\nthis.ondestroy = () => {\n\tsiriWave.dispose();\n\tconsole.warn('Removed');\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"After running this cell, you will see the following animation:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(6344).A+"",width:"800",height:"297"})}),"\n",(0,i.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,i.jsxs)(n.h3,{id:"how-do-i-install-an-npm-package",children:["How do I install an ",(0,i.jsx)(n.code,{children:"npm"})," package?"]}),"\n",(0,i.jsxs)(n.p,{children:["Use a ",(0,i.jsx)(n.a,{href:"/frontend/Cell%20types/Many%20more#Shell",children:"Shell"})," cell and run:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:".sh\nnpm i <name> --prefix .\n"})}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-import-a-module",children:"How do I import a module?"}),"\n",(0,i.jsxs)(n.p,{children:["Since this is an ESM module, you can use ",(0,i.jsx)(n.code,{children:"import"})," as usual:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:".esm\n\nimport { obj } from 'package'\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},67350:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/Screenshot 2024-11-17 at 23.15.03-0e7ff53b067f93fe92cf0ab1b58995d8.png"}}]);