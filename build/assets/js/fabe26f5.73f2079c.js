"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[45844],{7955:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/twoexample-ezgif.com-video-to-gif-converter-7a3eb53c2788c70caae680725153b736.gif"},8173:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/twoobjects-ezgif.com-video-to-gif-converter-f5107d964a07b121c4c3b9bb8daf225d.gif"},9549:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/stop2-ezgif.com-video-to-gif-converter-11692eb2983ac46bf47ef1243baf4cb7.gif"},12114:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/rectangle-ezgif.com-video-to-gif-converter-7cd7ae9f9f021862532983adf929f854.gif"},14098:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/annya-ezgif.com-video-to-gif-converter-a184dc524269984b74e8de69035e4ca4.gif"},15804:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/seq-ezgif.com-video-to-gif-converter-0d484fe3fe8c9921dfe111b08cf544fd.gif"},15855:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/bganim-ezgif.com-optimize-9f22505bc30531842987b6a8d7cd1288.gif"},23456:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/stop1-ezgif.com-video-to-gif-converter-3e3db435cdbc5620e8d446a8e44914df.gif"},28453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>c});var i=a(96540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},29819:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/opacity-ezgif.com-video-to-gif-converter 1-493acdb924cfdd1bf93fe59cbeb40b11.gif"},31575:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/hello-ezgif.com-video-to-gif-converter-d3f530b203b4760fbec524a858df9f51.gif"},36241:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/save23-ezgif.com-video-to-gif-converter-ce260328749b41f74c22eebbf5498cfa.gif"},38799:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/sliders-ezgif.com-optimize-d32d3c34a68d845c2f0caaab7b3eb0ae.gif"},41270:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/gamma-ezgif.com-video-to-gif-converter-a76626c5018062a57dad5449628335b6.gif"},52664:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/blurfilter-ezgif.com-video-to-gif-converter-4deb50c04f7c148588d8875d3c449a18.gif"},72375:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/animExample1-ezgif.com-video-to-gif-converter-6d82e43cc2dc7ac4cd3a18152486c3e0.gif"},76458:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/alltransitions-ezgif.com-video-to-gif-converter-1d5efb4ad1530814fdebb4510bbe756d.gif"},79339:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/graph-ezgif.com-video-to-gif-converter-966cdfa4ec4633e8af0e73c3210f05bc.gif"},81229:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>t,metadata:()=>c,toc:()=>r});var i=a(74848),s=a(28453);const t={sidebar_position:2},o=void 0,c={id:"frontend/Advanced/Animation Framework/Tutorial",title:"Tutorial",description:"Let's learn how to make animations step by step:",source:"@site/docs/frontend/Advanced/Animation Framework/Tutorial.md",sourceDirName:"frontend/Advanced/Animation Framework",slug:"/frontend/Advanced/Animation Framework/Tutorial",permalink:"/frontend/Advanced/Animation Framework/Tutorial",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1749907629e3,sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Animation Framework",permalink:"/frontend/Advanced/Animation Framework/"},next:{title:"Recording",permalink:"/frontend/Advanced/Animation Framework/Recording"}},d={},r=[{value:"Animation Flow",id:"animation-flow",level:3},{value:"Basics",id:"basics",level:2},{value:"Append and move",id:"append-and-move",level:3},{value:"Timings",id:"timings",level:3},{value:"Turn repeating elements into async functions",id:"turn-repeating-elements-into-async-functions",level:3},{value:"Animating more properties",id:"animating-more-properties",level:3},{value:"Layers",id:"layers",level:3},{value:"External events",id:"external-events",level:3},{value:"Embed foreign objects",id:"embed-foreign-objects",level:3},{value:"Medium",id:"medium",level:2},{value:"Combining with Offload",id:"combining-with-offload",level:3},{value:"Loops",id:"loops",level:3},{value:"Workers",id:"workers",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Let's learn how to make animations step by step:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'Needs["AnimationFramework`" -> "af`"] // Quiet\n'})}),"\n",(0,i.jsx)(n.p,{children:"Create a scene"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"s = af`Scene[];\nFramed[s]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"animation-flow",children:"Animation Flow"}),"\n",(0,i.jsx)(n.p,{children:"All animations on the scene should follows the pattern:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"append objects"}),"\n",(0,i.jsx)(n.li,{children:"animate"}),"\n",(0,i.jsx)(n.li,{children:"remove objects"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["By design most of methods and functions of AF framework return ",(0,i.jsx)(n.a,{href:"/frontend/Reference/Misc/Promise",children:"Promise"})," expression. In this regard, it makes sense to describe your animation flow using ",(0,i.jsx)(n.a,{href:"/frontend/Advanced/Events%20system/Asynchronous%20Functions",children:"Asynchronous Functions"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"basics",children:"Basics"}),"\n",(0,i.jsx)(n.h3,{id:"append-and-move",children:"Append and move"}),"\n",(0,i.jsx)(n.p,{children:"Append and move a disk on the scene:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(72375).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, Disk[#pos, 0.1], {\n    "pos" -> {-1,0}\n  }];\n\n  af`Animate[scene, d, "pos"->{1,0}, "QuadOut", 1.5] // Await;\n  \n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Combine animations of two properties:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(7955).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, Disk[#pos, #r], {\n    "pos" -> {-1,0}, "r"->0.1\n  }];\n\n  af`Animate[scene, d, {\n\t  "pos"->{1,0}, "r"->1.0\n  }, "QuadOut", 1.5] // Await;\n  \n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Animate two objects at the same time:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(8173).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d,r},\n  r = af`AddTo[scene, {Red, Translate[Rotate[\n      Rectangle[0.2{-1,-1}, 0.2{1,1}]\n  , #angle], #pos]}, {\n    "pos" -> {1.5,1.5},\n    "angle" -> 0.\n  }];  \n\n  d = af`AddTo[scene, {Blue, Disk[#pos, 0.1]}, {\n    "pos" -> {-1.5,0}\n  }];\n\n  {\n    af`Animate[scene, d, "pos"->{0,0}, "QuadOut", 1.5],\n    af`Animate[scene, r, {\n      "pos"->{0,0}, "angle"->2Pi\n    }, "QuadOut", 1.5]\n  }// Await;\n  \n  af`Remove[d];\n  af`Remove[r];\n]][s];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"timings",children:"Timings"}),"\n",(0,i.jsx)(n.p,{children:"Try different easing functions:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(76458).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d,label},\n  d = af`AddTo[scene, {Blue, Disk[#pos, 0.1]}, {\n    "pos" -> {-0.8,0}\n  }];\n\n  label = af`AddTo[scene, \n    {Text[#text, {0,0.2}, {0,0}]}, {"text"->"QuadOut"}\n  ];\n\n  af`Animate[scene, d, "pos"->{0.8,0}, "QuadOut", 2] // Await;\n  af`Update[scene, d, "pos"->{-0.8,0}];\n\n  af`Update[scene, label, "text"->"QuadIn"];\n  af`Animate[scene, d, "pos"->{0.8,0}, "QuadIn", 2] // Await;\n  af`Update[scene, d, "pos"->{-0.8,0}];\n\n  af`Update[scene, label, "text"->"CubicInOut"];\n  af`Animate[scene, d, "pos"->{0.8,0}, "CubicInOut", 2] // Await;\n  af`Update[scene, d, "pos"->{-0.8,0}];\n\n  af`Update[scene, label, "text"->"Linear"];\n  af`Animate[scene, d, "pos"->{0.8,0}, "Linear", 2] // Await;\n  \n  af`Remove[d];\n  af`Remove[label];\n]][s];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Use pauses:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(15804).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{r},\n  r = af`AddTo[scene, {Red, Translate[Rotate[\n      Rectangle[0.2{-1,-1}, 0.2{1,1}]\n  , #angle], #pos]}, {\n    "pos" -> {1.5,1.5},\n    "angle" -> 0.\n  }];  \n\n  af`Animate[scene, r, "pos"->{0,0}, "CubicInOut", 1] // Await;\n  PauseAsync[scene, 0.2] // Await;\n  af`Animate[scene, r, "angle"->Pi/4, "CubicInOut", 0.4] // Await;\n  PauseAsync[scene, 0.2] // Await;\n  af`Animate[scene, r, "pos"->{-0.5,0}, "CubicInOut", 1] // Await;\n  PauseAsync[scene, 0.2] // Await;\n  {\n    af`Animate[scene, r, "angle"->Pi/2, "CubicInOut", 1],\n    af`Animate[scene, r, "pos"->{-0.5,-0.5}, "CubicInOut", 1]\n  } // Await;\n\n  {\n    af`Animate[scene, r, "angle"->(Pi/2 + Pi/4), "CubicInOut", 1],\n    af`Animate[scene, r, "pos"->{0.5,-0.5}, "CubicInOut", 1]\n  } // Await;  \n\n  {\n    af`Animate[scene, r, "angle"->(Pi/2 + Pi/2), "CubicInOut", 1],\n    af`Animate[scene, r, "pos"->{0.5,0.5}, "CubicInOut", 1]\n  } // Await; \n\n  {\n    af`Animate[scene, r, "angle"->(10Pi), "CubicInOut", 4],\n    af`Animate[scene, r, "pos"->{0,0}, "CubicInOut", 1]\n  } // Await; \n\n  PauseAsync[scene, 2] // Await;\n  \n  af`Remove[r];\n]][s];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"turn-repeating-elements-into-async-functions",children:"Turn repeating elements into async functions"}),"\n",(0,i.jsxs)(n.p,{children:["Using the pervious examples on ",(0,i.jsx)(n.a,{href:"#Timings",children:"Timings"})," we can simplify the code:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'animateStuff = AsyncFunction[{s, d, l, type}, (\n  af`Update[s, d, "pos"->{-0.8,0}];\n  af`Update[s, l, "text"->type];\n  af`Animate[s, d, "pos"->{0.8,0}, type, 2] // Await;\n)];\n\nAsyncFunction[scene, Module[{d,label},\n\n  d = af`AddTo[scene, {Blue, Disk[#pos, 0.1]}, {\n    "pos" -> {-0.8,0}\n  }];\n\n  label = af`AddTo[scene, \n    {Text[#text, {0,0.2}, {0,0}]}, {"text"->""}\n  ];\n\n  animateStuff[scene, d, label, "QuadOut"] // Await;\n  animateStuff[scene, d, label, "QuadIn"] // Await;\n  animateStuff[scene, d, label, "CubicInOut"] // Await;\n  animateStuff[scene, d, label, "Linear"] // Await;\n  \n  af`Remove[d];\n  af`Remove[label];\n]][s];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"animating-more-properties",children:"Animating more properties"}),"\n",(0,i.jsxs)(n.p,{children:["Animate ",(0,i.jsx)(n.a,{href:"/frontend/Reference/Graphics/Opacity",children:"Opacity"})," for adding or removing an objects:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(29819).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, {Opacity[#o], Red, Disk[#pos, 0.1]}, {\n    "pos" -> {-0.5,0},\n    "o"->0\n  }];\n\n  af`Animate[scene, d, "o"->1.0, "Linear", 0.2] // Await;\n  af`Animate[scene, d, "pos"->{0.5,0}, "Ease", 1.5] // Await;\n  PauseAsync[scene, 0.5] // Await;\n  af`Animate[scene, d, "o"->0.0, "Linear", 0.2] // Await;\n  \n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsxs)(n.p,{children:["To interpolate color of the object we use ",(0,i.jsx)(n.code,{children:'"LinearEuclidean"'})," to get the correct gamma of the intermediate colors:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(41270).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, {Opacity[#o], RGBColor[#c], Disk[#pos, 0.1]}, {\n    "pos" -> {-0.5,0},\n    "o"->0,\n    "c"->af`Color[Red]\n  }];\n\n  af`Animate[scene, d, "o"->1.0, "Linear", 0.2] // Await;\n  {\n    af`Animate[scene, d, "c"->af`Color[Blue], "LinearEuclidean", 1.5],\n    af`Animate[scene, d, "pos"->{0.5,0}, "Linear", 1.5]\n  } // Await;\n  PauseAsync[scene, 0.5] // Await;\n  af`Animate[scene, d, "o"->0.0, "Linear", 0.2] // Await;\n  \n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Background animation:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(15855).A+"",width:"498",height:"402"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{bg,text},\n\n  bg = af`AddTo[scene, {\n    RGBColor[#c], Opacity[#o], Rectangle[{-2,-2}, {2,2}]\n  }, {\n    "o"->0.,\n    "c"->af`Color[Pink]\n  }];\n\n  text = af`AddTo[scene, {White, Text[Style["Hello World", FontSize->68], {0,0}, {0,0}]}];\n\n  af`Animate[scene, bg, "o"->1.0, "CubicInOut", 0.5] // Await;\n  \n  PauseAsync[scene, 0.3] // Await;\n\n  af`Animate[scene, bg, "c"->af`Color[Lighter[Magenta]], "LinearEuclidean", 0.5] // Await;\n  PauseAsync[scene, 0.3] // Await;\n\n  af`Animate[scene, bg, "c"->af`Color[Lighter[Brown]], "LinearEuclidean", 0.5] // Await;\n  PauseAsync[scene, 0.3] // Await;\n\n  af`Animate[scene, bg, "o"->0.0, "CubicInOut", 0.5] // Await;\n\n  af`Remove[bg];\n  af`Remove[text];\n\n]][s];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"layers",children:"Layers"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Reference#Layer",children:"Layer"})," are used for grouping multiple objects. All properties do not propagate to the objects in the group, but applied to the container. You can animate:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Opacity"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Rotate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Translate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Scale"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SVGAttribute"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["There is a special key-property for placing children objects ",(0,i.jsx)(n.code,{children:"#children"}),". Methods used for operating groups are similar to ",(0,i.jsx)(n.code,{children:"Scene"})," and to a regular object. For example:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(93346).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{layer},\n  layer = af`Layer[scene, {\n\tOpacity[#opacity],\n\tScale[#children, #scale]\n  }, {"opacity" -> 0., "scale"->1.0}];\n\n  af`AddTo[layer, Table[{RandomColor[], Disk[RandomReal[{-0.2,0.2},2], 0.05]}, {10}]];\n\n  af`Animate[scene, layer, "opacity"->1.0, "Linear", 0.5] // Await;\n  af`Animate[scene, layer, "scale"->3.0, "QuadOut", 0.5] // Await;\n  af`Animate[scene, layer, "scale"->0.1, "QuadIn", 0.5] // Await;\n  \n  af`Remove[layer];\n]][s];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Apply directly any CSS style:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(52664).A+"",width:"498",height:"428"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{layer},\n  layer = af`Layer[scene, {\n\tSVGAttribute[#children, "style"->#style]\n  }, {"style"->"filter: blur(0px)"}];\n\n  af`AddTo[layer, Table[{RandomColor[], Disk[RandomReal[{-0.5,0.5},2], 0.05]}, {10}]];\n\n  af`Animate[scene, layer, "style"->"filter: blur(100px)", "Linear", 2] // Await;\n  \n  af`Remove[layer];\n]][s];\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Animate"})," does support string interpolation"]})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"By removing the layer object you will removes all children as well"})}),"\n",(0,i.jsx)(n.h3,{id:"external-events",children:"External events"}),"\n",(0,i.jsxs)(n.p,{children:["Any ",(0,i.jsx)(n.code,{children:"EventObject"})," or ",(0,i.jsx)(n.code,{children:"Promise"})," can be used a trigger for your animation:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(36241).A+"",width:"570",height:"654"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'next = InputButton["Next"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, {\n\t  Disk[#pos, #r], Hue[0.3], Circle[#pos, #r #r]\n  },\n    {"pos"->{0.,0.}, "r"->0.001}\n  ];\n\n  next // Await;\n  af`Animate[scene, d, "r"->0.5, "CubicInOut", 1] // Await;\n  next // Await;\n  af`Animate[scene, d, "r"->0.0001, "CubicInOut", 1] // Await;\n  \n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"embed-foreign-objects",children:"Embed foreign objects"}),"\n",(0,i.jsxs)(n.p,{children:["For general case you need to use ",(0,i.jsx)(n.a,{href:"/frontend/Reference/Graphics/Inset",children:"Inset"})," (see also ",(0,i.jsx)(n.a,{href:"/frontend/Advanced/Graphics/Inset%20expressions",children:"Inset expressions"}),")."]}),"\n",(0,i.jsx)(n.p,{children:"Embed a graph:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(79339).A+"",width:"496",height:"426"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, {\n    Translate[Scale[\n      Rotate[Inset[Plot[x, {x,0,1}, ImageSize->Small]], #a],\n      0.5\n    ], #pos]\n  },\n    {"pos"->{2.0,0.}, "a"->0}\n  ];\n\n  af`Animate[scene, d, {\n    "pos"->{0,0},\n    "a"->2Pi\n  }, "CubicInOut", 1] // Await;\n\n  PauseAsync[scene, 1] // Await;\n\n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Inset is pixel-perfect and it does not autoscale. Results might depend on pixel-density of the screen. To avoid that use ",(0,i.jsx)(n.code,{children:"ImageSizeRaw"}),"  instead of ",(0,i.jsx)(n.code,{children:"ImageSize"})," on ",(0,i.jsx)(n.code,{children:"Graphics"}),"-like objects"]})}),"\n",(0,i.jsx)(n.h2,{id:"medium",children:"Medium"}),"\n",(0,i.jsx)(n.h3,{id:"combining-with-offload",children:"Combining with Offload"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AddTo"})," method effectively uses ",(0,i.jsx)(n.a,{href:"/frontend/Reference/Interpreter/Offload",children:"Offload"})," technique from ",(0,i.jsx)(n.a,{href:"/frontend/Dynamics",children:"general dynamics "})," of WLJS Notebook. It means you can still use it in any animated object."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Animate"})," method can animate an arbitrary symbol as well:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(14098).A+"",width:"496",height:"426"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, pos = {2,0}, a = 0.},\n  d = af`AddTo[scene, {\n    Translate[\n      Rotate[\n        Text["Hello World", {0,0}, {0,0}]\n      , Offload[a]]\n    , Offload[pos]]\n  }];\n\n  {\n    af`Animate[scene, Hold[pos], {0,0}, "CubicInOut", 1],\n    af`Animate[scene, Hold[a],   2Pi, "CubicInOut", 1]\n  } // Await;\n\n  PauseAsync[scene, 1] // Await;\n\n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Equivalent using AF only"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, {\n    Translate[Rotate[Text["Hello World", {0,0}, {0,0}], #a], #pos]\n  },\n    {"pos"->{2.0,0.}, "a"->0}\n  ];\n\n  af`Animate[scene, d, {\n    "pos"->{0,0},\n    "a"->2Pi\n  }, "CubicInOut", 1] // Await;\n\n  PauseAsync[scene, 1] // Await;\n\n  af`Remove[d];\n]][s];\n'})})]}),"\n",(0,i.jsxs)(n.p,{children:["An example, where we combine both approaches to avoid extra ",(0,i.jsx)(n.code,{children:"Translate"})," function:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(12114).A+"",width:"496",height:"426"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, pos = {2,0}, a = 0.},\n  d = af`AddTo[scene, {\n    Magenta, Rectangle[\n      Offload[{-0.5,-0.5} + #pos], \n      Offload[{0.5,0.5} + #pos]\n    , RoundingRadius->0.1]\n  }, {"pos"->{0,-1.5}}];\n\n  af`Animate[scene, d, "pos"->{0,0}, "CubicInOut", 1] // Await;\n\n  PauseAsync[scene, 1] // Await;\n\n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Another example:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(31575).A+"",width:"496",height:"426"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, text = "Hello"},\n  d = af`AddTo[scene, {\n    Translate[Rotate[Text[text // Offload, {0,0}, {0,0}], #a], #pos]\n  },\n    {"pos"->{2.0,0.}, "a"->0}\n  ];\n\n  af`Animate[scene, d, {\n    "pos"->{0,0},\n    "a"->2Pi\n  }, "CubicInOut", 1] // Await;\n\n  text = "Hello W";\n  af`PauseAsync[scene, 0.2] // Await;\n  text = "Hello Wo";\n  af`PauseAsync[scene, 0.2] // Await;\n  text = "Hello Wor";\n  af`PauseAsync[scene, 0.2] // Await;\n  text = "Hello Worl";\n  af`PauseAsync[scene, 0.2] // Await;\n  text = "Hello World";\n  af`PauseAsync[scene, 0.2] // Await;\n\n  af`Remove[d];\n]][s];\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In general named property slots ",(0,i.jsx)(n.code,{children:"#pos"})," and etc can be passed further to other function outside the main one:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(38799).A+"",width:"496",height:"426"})}),"\n",(0,i.jsx)(t,{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'fakeWritting[from_, to_, vert_, scale_: 1, freq_: 50] := \n  Line[\n    MovingAverage[\n      Table[\n        {\n          i,\n          vert + scale 0.065 Sin[freq i] + 0 RandomReal[scale 0.05 {-1, 1}]\n        },\n        {i, from, to, (to - from)/300.0}\n      ],\n      10\n    ]\n  ];\n\nslidersComponent[p1_, p2_] := {\n  White,\n  Rectangle[{-0.5, -0.5}, {0.5, 0.2}, RoundingRadius -> 2 0.14],\n  {\n    RGBColor[0.9, 0.9, 0.9],\n    Rectangle[{-0.3, -0.02}, {0.3, 0.02}, RoundingRadius -> 0.04],\n    RGBColor[0.4, 0.6, 0.9],\n    Disk[{0.25 p1, 0}, 0.05]\n  },\n  Translate[\n    {\n      RGBColor[0.9, 0.9, 0.9],\n      Rectangle[{-0.3, -0.02}, {0.3, 0.02}, RoundingRadius -> 0.04],\n      RGBColor[0.4, 0.6, 0.9],\n      Disk[{0.25 p2, 0}, 0.05]\n    },\n    {0, -0.3}\n  ]\n};\nClearAll[notebookModel]\nnotebookModel[size_, scale_, contentOpacity_, s_] := \n  Scale[\n    SVGGroup[\n      {\n        Lighter[Black],\n        Text[Style["Notebook", FontSize -> 14], {0, 0.4}, {0, -1}],\n        RGBColor[0.93, 0.93, 0.90],\n        Rectangle[size {-1, -1}, size {1, 1}, RoundingRadius -> 0.13],\n        Opacity[contentOpacity],\n        SVGGroup[{\n          {\n            Translate[\n              Scale[\n                slidersComponent[Offload[s[[1]]], Offload[s[[2]]]],\n                0.2\n              ],\n              {0.16015625, 0.16022949218750004}\n            ]\n          },\n          Black // Lighter // Lighter,\n          {\n            AbsoluteThickness[2],\n            fakeWritting[-0.3, 0.05, 0.27, 0.4, 170/1.8]\n          },\n          Table[\n            fakeWritting[-0.3, 0.3, i, 0.1, 170],\n            {i, 0.13, 0.3 - 0.07, 0.04}\n          ],\n          Table[\n            fakeWritting[-0.3, 0.3, i, 0.1, 170],\n            {i, -0.3 + 0.03, -0.1, 0.04}\n          ]\n        }]\n      }\n    ],\n    scale\n  ];\n'})})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, sliders = {0,0}},\n\n  d = af`AddTo[scene, {\n    Translate[notebookModel[0.33, 2.0, 1.0, sliders // Offload], #pos]\n  }, {\n    "pos"->{0,2.0},\n    "cop"->1.0\n  }];\n\n  af`Animate[scene, d, "pos"->{0,0}, "CubicInOut", 1] // Await;\n  \n  af`Animate[scene, Hold[sliders], RandomReal[{-1,1},2], "CubicInOut", 0.5] // Await;\n  af`Animate[scene, Hold[sliders], RandomReal[{-1,1},2], "CubicInOut", 0.5] // Await;\n  af`Animate[scene, Hold[sliders], RandomReal[{-1,1},2], "CubicInOut", 0.5] // Await;\n  af`Animate[scene, Hold[sliders], RandomReal[{-1,1},2], "CubicInOut", 0.5] // Await;\n  af`Animate[scene, Hold[sliders], RandomReal[{-1,1},2], "CubicInOut", 0.5] // Await;\n\n  af`Remove[d];\n\n\n]][s];\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This example can be heavily simplified using ",(0,i.jsx)(n.a,{href:"#Workers",children:"Workers"})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Be careful with temporal symbols defined within the ",(0,i.jsx)(n.code,{children:"Module"}),". If they are not involved into any animation Wolfram Kernel will collect them as garbage."]})}),"\n",(0,i.jsx)(n.h3,{id:"loops",children:"Loops"}),"\n",(0,i.jsx)(n.p,{children:"It allows to create custom animation loop on a given property of an object on the scene:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"af`Loop[scene_, object_, prop_String, Function[{t, previousValue, n},\n\t...\n], duration_]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["where ",(0,i.jsx)(n.code,{children:"t"})," goes from ",(0,i.jsx)(n.code,{children:"0"})," to ",(0,i.jsx)(n.code,{children:"1"})," every ",(0,i.jsx)(n.code,{children:"duration"})," and ",(0,i.jsx)(n.code,{children:"n"})," represents the number of a cycle."]}),"\n",(0,i.jsxs)(n.p,{children:["Loop function is called every frame (usually 30 times per second) and is running until manually removed using ",(0,i.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Reference#Remove",children:"Remove"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"To simulate a delayed event we introduce a button:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'next = InputButton["Stop"]\n'})}),"\n",(0,i.jsx)(n.p,{children:"As an example we rotate infinitely a rectangle:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(23456).A+"",width:"546",height:"492"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, loop},\n  d = af`AddTo[scene, {\n    Rotate[\n      Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n    , #r]\n  }, {\n    "r" -> 0.\n  }];\n\n  loop = af`Loop[scene, d, "r", Function[{t, o, n},\n    Pi t + (n-1) Pi\n  ], 0.5];\n\n  next // Await;\n  \n  af`Remove[loop];\n\n  PauseAsync[scene, 0.5] // Await;\n\n  af`Remove[d];\n]][s]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["However, one can see that our animation has been interrupted somewhere mid-cycle, which may not be great for some cases. Using ",(0,i.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Reference#Finish",children:"Finish"})," method we can wait extra time until the cycle of animation has been finished:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(9549).A+"",width:"546",height:"492"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, loop},\n  d = af`AddTo[scene, {\n    Rotate[\n      Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n    , #r]\n  }, {\n    "r" -> 0.\n  }];\n\n  loop = af`Loop[scene, d, "r", Function[{t, o, n},\n    Pi t + (n-1) Pi\n  ], 0.5];\n\n  next // Await;\n\n  af`Finish[loop] // Await; (* <---- HERE *)\n  \n  af`Remove[loop];\n\n  PauseAsync[scene, 0.5] // Await;\n\n  af`Remove[d];\n]][s]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"workers",children:"Workers"}),"\n",(0,i.jsx)(n.p,{children:"Workers are like parallel threads - a more general and extended version of loops. It allows to execute an arbitrary code concurrently with the main animation on each frame:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"af`Worker[scene_Scene, Function[absoluteTime, \n\t...\n]] \n"})}),"\n",(0,i.jsx)(n.p,{children:"or"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"af`Worker[scene_Scene, AsyncFunction[absoluteTime, \n\t...\n]] \n"})}),"\n",(0,i.jsxs)(n.p,{children:["The last case is the most valuable. You can assign a sub-animation to a worker. Using ",(0,i.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Reference#Finish",children:"Finish"})," method on worker one can catch the moment when async sub-animation has been finished. Workers are running until they are manually removed using ",(0,i.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Reference#Remove",children:"Remove"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Taking a previous example, we can modify it slightly to take advantage of workers:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(96900).A+"",width:"546",height:"492"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'next = InputButton["Stop"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, worker},\n  d = af`AddTo[scene, {\n    Rotate[\n      Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n    , #r]\n  }, {\n    "r" -> 0.\n  }];\n\n  worker = af`Worker[scene, AsyncFunction[Null,\n    af`Animate[scene, d, "r"->Pi/2] // Await;\n    af`Animate[scene, d, "r"->-Pi/2] // Await;\n  ]];\n\n  next // Await;\n\n  af`Finish[worker] // Await;\n  af`Remove[worker];\n\n  PauseAsync[scene, 0.5] // Await;\n\n  af`Remove[d];\n]][s]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Here is an adapter example from ",(0,i.jsx)(n.a,{href:"#Combining%20with%20Offload",children:"Combining with Offload"}),", that becomes much more compact and easier to read using workers:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:a(38799).A+"",width:"496",height:"426"})}),"\n",(0,i.jsx)(t,{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'fakeWritting[from_, to_, vert_, scale_: 1, freq_: 50] := \n  Line[\n    MovingAverage[\n      Table[\n        {\n          i,\n          vert + scale 0.065 Sin[freq i] + 0 RandomReal[scale 0.05 {-1, 1}]\n        },\n        {i, from, to, (to - from)/300.0}\n      ],\n      10\n    ]\n  ];\n\nslidersComponent[p1_, p2_] := {\n  White,\n  Rectangle[{-0.5, -0.5}, {0.5, 0.2}, RoundingRadius -> 2 0.14],\n  {\n    RGBColor[0.9, 0.9, 0.9],\n    Rectangle[{-0.3, -0.02}, {0.3, 0.02}, RoundingRadius -> 0.04],\n    RGBColor[0.4, 0.6, 0.9],\n    Disk[{0.25 p1, 0}, 0.05]\n  },\n  Translate[\n    {\n      RGBColor[0.9, 0.9, 0.9],\n      Rectangle[{-0.3, -0.02}, {0.3, 0.02}, RoundingRadius -> 0.04],\n      RGBColor[0.4, 0.6, 0.9],\n      Disk[{0.25 p2, 0}, 0.05]\n    },\n    {0, -0.3}\n  ]\n};\nClearAll[notebookModel]\nnotebookModel[size_, scale_, contentOpacity_, s_] := \n  Scale[\n    SVGGroup[\n      {\n        Lighter[Black],\n        Text[Style["Notebook", FontSize -> 14], {0, 0.4}, {0, -1}],\n        RGBColor[0.93, 0.93, 0.90],\n        Rectangle[size {-1, -1}, size {1, 1}, RoundingRadius -> 0.13],\n        Opacity[contentOpacity],\n        SVGGroup[{\n          {\n            Translate[\n              Scale[\n                slidersComponent[Offload[s[[1]]], Offload[s[[2]]]],\n                0.2\n              ],\n              {0.16015625, 0.16022949218750004}\n            ]\n          },\n          Black // Lighter // Lighter,\n          {\n            AbsoluteThickness[2],\n            fakeWritting[-0.3, 0.05, 0.27, 0.4, 170/1.8]\n          },\n          Table[\n            fakeWritting[-0.3, 0.3, i, 0.1, 170],\n            {i, 0.13, 0.3 - 0.07, 0.04}\n          ],\n          Table[\n            fakeWritting[-0.3, 0.3, i, 0.1, 170],\n            {i, -0.3 + 0.03, -0.1, 0.04}\n          ]\n        }]\n      }\n    ],\n    scale\n  ];\n'})})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, sliders = {0,0}, w},\n\n  d = af`AddTo[scene, {\n    Translate[notebookModel[0.33, 2.0, 1.0, sliders // Offload], #pos]\n  }, {\n    "pos"->{0,2.0},\n    "cop"->1.0\n  }];\n\n  af`Animate[scene, d, "pos"->{0,0}, "CubicInOut", 1] // Await;\n\n  w = af`Worker[scene, AsyncFunction[Null,\n    af`Animate[scene, Hold[sliders], RandomReal[{-1,1},2], "CubicInOut", 0.5] // Await;\n  ]];\n  \n  \n  PauseAsync[scene, 4] // Await;\n\n  af`Remove[w];\n  af`Remove[d];\n\n]][s];\n'})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},93346:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/layer-ezgif.com-video-to-gif-converter-06e1985c82904808135a0c612e1f9711.gif"},96900:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/workers-ezgif.com-video-to-gif-converter-153e2b421706e41445d6576967cf00fe.gif"}}]);