(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[70709],{10464:(s,e,a)=>{"use strict";a.d(e,{A:()=>n});const n=a.p+"b8c7c1c920093ae7b539618c4f3731e0.txt"},11001:(s,e,a)=>{"use strict";a.d(e,{A:()=>n});const n=a.p+"assets/images/falling-ezgif.com-video-to-gif-converter-e522b1bca9f0861b6e42b84e1d483a3b.gif"},16411:(s,e,a)=>{"use strict";a.r(e),a.d(e,{assets:()=>m,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>o});var n=a(74848),t=a(28453),i=a(52621);const l={tags:["tutorial"],enableComments:!0,authors:"jerryi"},r="Basic Verlet Integration implementation",c={permalink:"/blog/2025/05/01/rim",source:"@site/blog/2025-05-01-rim/index.mdx",title:"Basic Verlet Integration implementation",description:"Using the power of Newton's equations and numerics to solve dynamics of arbitary planar meshes in real-time",date:"2025-05-01T00:00:00.000Z",tags:[{label:"tutorial",permalink:"/blog/tags/tutorial"}],readingTime:3.525,hasTruncateMarker:!0,authors:[{name:"Kirill Vasin",title:"Maintainer",url:"https://github.com/JerryI",imageURL:"https://avatars.githubusercontent.com/u/4111822?s=48&v=4",key:"jerryi"}],frontMatter:{tags:["tutorial"],enableComments:!0,authors:"jerryi"},unlisted:!1,prevItem:{title:"Interactive Magnifying Glass Effect",permalink:"/blog/2025/05/04/glass"},nextItem:{title:"Dynamic Presentation, or How to Code a Slide with Markdown and WL",permalink:"/blog/2025/03/02/ultimate-ppt"}},m={authorsImageUrls:[void 0]},o=[{value:"Bunch of points",id:"bunch-of-points",level:2},{value:"Procedurally generated structures",id:"procedurally-generated-structures",level:2},{value:"Rim",id:"rim",level:3},{value:"Generate a Mesh from an Image",id:"generate-a-mesh-from-an-image",level:2}];function d(s){const e={annotation:"annotation",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",mstyle:"mstyle",msub:"msub",msup:"msup",mtable:"mtable",mtd:"mtd",mtext:"mtext",mtr:"mtr",p:"p",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,t.R)(),...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:"Using the power of Newton's equations and numerics to solve dynamics of arbitary planar meshes in real-time"})}),"\n",(0,n.jsx)(e.h2,{id:"",children:(0,n.jsx)(e.img,{src:a(73944).A+"",width:"1180",height:"660"})}),"\n",(0,n.jsx)(e.h2,{id:"bunch-of-points",children:"Bunch of points"}),"\n",(0,n.jsx)(e.p,{children:"Define a set of random points"}),"\n","\n",(0,n.jsx)(i.k8,{kernel:a(10464).A,json:a(88938).A,notebook:a(23366).A}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"f4b7e769-1304-4cf9-bff5-b98a82ebb6f4",type:"Input",opts:{InitGroup:!0},children:"pts0%20%3D%20RandomReal%5B%7B-1%2C1%7D%2C%20%7B10%2C%202%7D%5D%3B%0Apts1%20%3D%20pts0%3B%20pts2%20%3D%20pts0%3B%0A%0AGraphics%5B%7BRectangle%5B%7B-10%2C-10%7D%2C%20%7B10%2C10%7D%5D%2C%20Red%2C%20Point%5Bpts0%20%2F%2F%20Offload%5D%7D%2C%20%22Controls%22-%3EFalse%5D"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"bd6d9d8a-3b0a-4f3a-a806-c06f597553bf",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28Graphics%5B%7BRectangle%5B%7B-10%2C%20-10%7D%2C%20%7B10%2C%2010%7D%5D%2C%20RGBColor%5B1%2C%200%2C%200%5D%2C%20Point%5BOffload%5Bpts0%5D%5D%7D%2C%20%22Controls%22%20-%3E%20False%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxdjlsKAjEMResLH7twB67BAccPQakrqDOtBkIzNHXr%2Fta0pQj%2BHHLzuLn7B2k3U0rxUnAmHN08q42gD2Z6wcBu0eYX4FjnW4G2QzT%2Biba22gJ8UkoFf%2F2dFAXVML%2FQ%2FbEjpAA5AqiGmmgluBH4WOVacHUOyYzFc4p8%2BH3Qb7T3bNmRj4GQy%2FnJINsvH7wzTQ%3D%3D%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsxs)(e.p,{children:["The ",(0,n.jsx)(e.strong,{children:"St\xf8rmer\u2013Verlet method"})," is a variant of the discretization of Newton's equations of motion:"]}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"x"}),(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"i"}),(0,n.jsx)(e.mo,{children:"+"}),(0,n.jsx)(e.mn,{children:"1"})]})]}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsx)(e.mn,{children:"2"}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"x"}),(0,n.jsx)(e.mi,{children:"i"})]}),(0,n.jsx)(e.mo,{children:"\u2212"}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"x"}),(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"i"}),(0,n.jsx)(e.mo,{children:"\u2212"}),(0,n.jsx)(e.mn,{children:"1"})]})]}),(0,n.jsx)(e.mo,{children:"+"}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"a"}),(0,n.jsx)(e.mi,{children:"i"})]}),(0,n.jsx)(e.mtext,{children:"\u2009"}),(0,n.jsx)(e.mi,{children:"\u03b4"}),(0,n.jsxs)(e.msup,{children:[(0,n.jsx)(e.mi,{children:"t"}),(0,n.jsx)(e.mn,{children:"2"})]})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"x_{i+1} = 2x_i - x_{i-1} + a_i\\, \\delta t^2"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6389em",verticalAlign:"-0.2083em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(e.span,{className:"mord mtight",children:[(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,n.jsx)(e.span,{className:"mbin mtight",children:"+"}),(0,n.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.2083em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.7944em",verticalAlign:"-0.15em"}}),(0,n.jsx)(e.span,{className:"mord",children:"2"}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.7917em",verticalAlign:"-0.2083em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(e.span,{className:"mord mtight",children:[(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,n.jsx)(e.span,{className:"mbin mtight",children:"\u2212"}),(0,n.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.2083em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"+"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1.0141em",verticalAlign:"-0.15em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03785em"},children:"\u03b4"}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsx)(e.span,{className:"vlist-t",children:(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.8641em"},children:(0,n.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:"2"})})]})})})})})]})]})]})]})}),"\n",(0,n.jsxs)(e.p,{children:["This method only requires storing the current position ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"x"}),(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"i"}),(0,n.jsx)(e.mo,{children:"+"}),(0,n.jsx)(e.mn,{children:"1"})]})]})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"x_{i+1}"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6389em",verticalAlign:"-0.2083em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(e.span,{className:"mord mtight",children:[(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,n.jsx)(e.span,{className:"mbin mtight",children:"+"}),(0,n.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.2083em"},children:(0,n.jsx)(e.span,{})})})]})})]})]})})]})," and the two previous positions ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"x"}),(0,n.jsx)(e.mi,{children:"i"})]})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"x_i"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]})]})})]})," and ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{children:"x"}),(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"i"}),(0,n.jsx)(e.mo,{children:"\u2212"}),(0,n.jsx)(e.mn,{children:"1"})]})]})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"x_{i-1}"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6389em",verticalAlign:"-0.2083em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(e.span,{className:"mord mtight",children:[(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,n.jsx)(e.span,{className:"mbin mtight",children:"\u2212"}),(0,n.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.2083em"},children:(0,n.jsx)(e.span,{})})})]})})]})]})})]}),"; velocity is not needed. Try to run this cell below"]}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"15e1d00f-f75b-4498-ad15-6477796e24fe",type:"Input",opts:{},children:"With%5B%7B%5C%5BDelta%5Dt%20%3D%200.5%7D%2C%0A%20%20pts0%20%20%3D%202%20pts1%20-%20pts2%20%2B%20Table%5B%7B0%2C-1%7D%2C%20%7BLength%5Bpts0%5D%7D%5D%20%28%2ASpB%5B%2A%29Power%5B%5C%5BDelta%5Dt%28%2A%7C%2A%29%2C%28%2A%7C%2A%292%5D%28%2A%5DSpB%2A%29%3B%0A%20%20pts2%20%3D%20pts1%3B%0A%20%20pts1%20%3D%20pts0%3B%0A%5D"}),"\n",(0,n.jsx)(e.p,{children:"We can add random connections to our points (forming bonds) using graphs"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"410a95ff-19b1-4700-a395-60596fdf7b58",type:"Input",opts:{InitGroup:!0},children:"bonds%20%3D%20RandomGraph%5BLength%5Bpts0%5D%7B1%2C%202%7D%2C%20VertexCoordinates-%3Epts0%5D"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"1e042568-e965-4f98-b8b4-6c09630b2866",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28Graph%5B%7B1%2C%202%2C%203%2C%204%2C%205%2C%206%2C%207%2C%208%2C%209%2C%2010%7D%2C%20%7BNull%2C%20SparseArray%5BAutomatic%2C%20%7B10%2C%2010%7D%2C%200%2C%20%7B1%2C%20%7B%7B0%2C%205%2C%209%2C%2013%2C%2018%2C%2022%2C%2022%2C%2027%2C%2031%2C%2034%2C%2040%7D%2C%20%7B%7B2%7D%2C%20%7B4%7D%2C%20%7B5%7D%2C%20%7B8%7D%2C%20%7B10%7D%2C%20%7B1%7D%2C%20%7B4%7D%2C%20%7B9%7D%2C%20%7B10%7D%2C%20%7B4%7D%2C%20%7B8%7D%2C%20%7B9%7D%2C%20%7B10%7D%2C%20%7B1%7D%2C%20%7B2%7D%2C%20%7B3%7D%2C%20%7B5%7D%2C%20%7B7%7D%2C%20%7B1%7D%2C%20%7B4%7D%2C%20%7B7%7D%2C%20%7B10%7D%2C%20%7B4%7D%2C%20%7B5%7D%2C%20%7B8%7D%2C%20%7B9%7D%2C%20%7B10%7D%2C%20%7B1%7D%2C%20%7B3%7D%2C%20%7B7%7D%2C%20%7B10%7D%2C%20%7B2%7D%2C%20%7B3%7D%2C%20%7B7%7D%2C%20%7B1%7D%2C%20%7B2%7D%2C%20%7B3%7D%2C%20%7B5%7D%2C%20%7B7%7D%2C%20%7B8%7D%7D%7D%2C%20Pattern%7D%5D%7D%2C%20%7BVertexCoordinates%20-%3E%20%7B%7B0.6097071079842546%2C%200.5710193798306946%7D%2C%20%7B0.4947448371382195%2C%200.03477815591969424%7D%2C%20%7B-0.4796507057494588%2C%200.04473276586757047%7D%2C%20%7B-0.34030553279374187%2C%20-0.8852674833737066%7D%2C%20%7B0.1649401002552966%2C%20-0.24559529545285486%7D%2C%20%7B-0.8468460711918513%2C%20-0.7206445114959674%7D%2C%20%7B0.716511927090667%2C%200.7961901483219602%7D%2C%20%7B0.8287698960754502%2C%200.26045296296986464%7D%2C%20%7B-0.9624145652706186%2C%20-0.8017079325257308%7D%2C%20%7B0.9342990378264822%2C%200.7007185855469098%7D%7D%7D%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KWlMIB4HkHAvSizIyEwuhojwI4k45%2BcW5KRWpIIkuIAYRG84LVu9o%2BmxvYOmRf4p10f2Gc%2Bv2z9bed%2BeYf4Ul8JzC%2B1XzF9zf8ame%2FsdPr%2FuMXu%2BzL7iXP3tCcev7k9Zo1kpE%2FJmf8E8oxsHZY7aN%2BxnWrkq%2F%2Fz%2BOdUT3sVIvt6%2FIUJWpJX%2F%2BX6JnoPZq94%2BszcQ4zucXPXS3mXrx0KP1lf2DK1tz51WX7D%2FwJC4UPLMu%2F0dnU9Spi9%2FuX%2FNkRaJ40%2Ff2nd8Ek7yzHlmD%2FEFyJc%2BmcUlacyYPE4g4ZJZlJpcklmWCgkUdiDhX5CYnFlSWZQGBkCDwIpBhEdpapExGDy2h0sj1MFNcE4scMsvyg1mBbKD8kvzUiBSoJBzLCrKL89ITUwpLmKAAkR0gJ0GdjYrTGmaCKYkjOcJ0mgIJo1wypjglDHFKWOBVQYkZmiARcoIp0UQGUusMjiNM8ZpnDFO1xnjtMgYt0UmOIMBImOORcYUjwxOi8xxutscp7vNcRtnAZUquqG5zjDAa5p9GjdmIkFN3NiTMCT9PYAxPkCTMKgscE1JTwWlYWyGMcKEgMVDpU9qWWpOJiIdY81BcD%2B4ZBZnZ4LUIdyOKseER44ZjxwLHjlWPHJseOTY8chx4JHjxCPHhSLHihlvIF5QaU4quLQAxUBiSUhlQSq4OA4pSkzJLMnMz0vMQcQNqoaixNzUkMzk7GKwuF9%2BXiqaKh4gwzM3MT01IDElJTMvHZc6Tpi64Myq1MwToPhFURAMCgHn%2FLySovycYnB55ZaYU5wKABn%2BemI%3D%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsx)(i.oN,{children:"%3Cdetails%20%3E%0AThe%20%2A%2ASt%C3%B8rmer%E2%80%93Verlet%20method%2A%2A%20really%20shines%20when%20it%20comes%20to%20solving%20equations%20with%20constraints.%20In%20our%20case%2C%20we%20want%20to%20keep%20the%20distances%20between%20points%20fixed%20according%20to%20a%20connection%20graph.%20Normally%2C%20this%20would%20involve%20approximating%20motion%20using%20a%20combination%20of%20acceleration%2C%20velocity%2C%20and%20position.%0A%0AHowever%2C%20things%20can%20become%20complicated%20quickly.%20With%20the%20St%C3%B8rmer%E2%80%93Verlet%20method%2C%20we%20only%20work%20with%20positions%20%5C%28%20x_i%20%5C%29.%20By%20directly%20adjusting%20the%20positions%20of%20two%20points%20connected%20by%20a%20bond%20to%20maintain%20the%20bond%20length%2C%20we%20effectively%20account%20for%20all%20forces%20in%20a%20single%20step.%0A%3C%2Fdetails%3E"}),"\n",(0,n.jsxs)(e.p,{children:["The stiffness of the bond is not directly in the differential equation It\u2019s introduced through how you enforce the constraint \u2014 either strictly (hard) or partially (soft). Let's define the initial length ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"L"}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"}),(0,n.jsx)(e.mi,{mathvariant:"bold",children:"d"}),(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"L=|\\mathbf{d}|"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",children:"L"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(e.span,{className:"mord",children:"\u2223"}),(0,n.jsx)(e.span,{className:"mord mathbf",children:"d"}),(0,n.jsx)(e.span,{className:"mord",children:"\u2223"})]})]})]})]}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{mathvariant:"bold",children:"d"}),(0,n.jsx)(e.mo,{children:":"}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,n.jsx)(e.mi,{children:"a"})]}),(0,n.jsx)(e.mo,{children:"\u2212"}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,n.jsx)(e.mi,{children:"b"})]})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{d} := \\mathbf{x}_a - \\mathbf{x}_b"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,n.jsx)(e.span,{className:"mord mathbf",children:"d"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:":="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.7333em",verticalAlign:"-0.15em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"a"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.5944em",verticalAlign:"-0.15em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"b"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]})]})]})]})}),"\n",(0,n.jsx)(e.p,{children:"To enforce the bond we compute the correction vector"}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,n.jsx)(e.mi,{mathvariant:"bold",children:"d"}),(0,n.jsx)(e.mo,{children:":"}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsx)(e.mi,{mathvariant:"bold",children:"d"}),(0,n.jsx)(e.mo,{children:"\u22c5"}),(0,n.jsx)(e.mi,{children:"k"}),(0,n.jsx)(e.mo,{fence:"false",stretchy:"true",minsize:"1.8em",maxsize:"1.8em",children:"("}),(0,n.jsxs)(e.mfrac,{children:[(0,n.jsx)(e.mi,{children:"L"}),(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"}),(0,n.jsx)(e.mi,{mathvariant:"bold",children:"d"}),(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"})]})]}),(0,n.jsx)(e.mo,{children:"\u2212"}),(0,n.jsx)(e.mn,{children:"1"}),(0,n.jsx)(e.mo,{fence:"false",stretchy:"true",minsize:"1.8em",maxsize:"1.8em",children:")"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Delta \\mathbf{d} :=  \\mathbf{d} \\cdot k \\Big( \\frac{L}{|\\mathbf{d}| } - 1 \\Big)"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,n.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,n.jsx)(e.span,{className:"mord mathbf",children:"d"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:":="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,n.jsx)(e.span,{className:"mord mathbf",children:"d"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\u22c5"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"2.2963em",verticalAlign:"-0.936em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"delimsizing size2",children:"("})}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,n.jsx)(e.span,{className:"mfrac",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsxs)(e.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,n.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord",children:"\u2223"}),(0,n.jsx)(e.span,{className:"mord mathbf",children:"d"}),(0,n.jsx)(e.span,{className:"mord",children:"\u2223"})]})]}),(0,n.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,n.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord mathnormal",children:"L"})})]})]}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.936em"},children:(0,n.jsx)(e.span,{})})})]})}),(0,n.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1.8em",verticalAlign:"-0.65em"}}),(0,n.jsx)(e.span,{className:"mord",children:"1"}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"delimsizing size2",children:")"})})]})]})]})}),"\n",(0,n.jsx)(e.p,{children:"and then apply it to each point"}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mtable,{rowspacing:"0.25em",columnalign:"right left",columnspacing:"0em",children:[(0,n.jsxs)(e.mtr,{children:[(0,n.jsx)(e.mtd,{children:(0,n.jsx)(e.mstyle,{scriptlevel:"0",displaystyle:"true",children:(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,n.jsx)(e.mi,{children:"a"})]})})}),(0,n.jsx)(e.mtd,{children:(0,n.jsx)(e.mstyle,{scriptlevel:"0",displaystyle:"true",children:(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mrow,{}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,n.jsx)(e.mi,{children:"a"})]}),(0,n.jsx)(e.mo,{children:"+"}),(0,n.jsxs)(e.mfrac,{children:[(0,n.jsx)(e.mn,{children:"1"}),(0,n.jsx)(e.mn,{children:"2"})]}),(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,n.jsx)(e.mi,{mathvariant:"bold",children:"d"})]})})})]}),(0,n.jsxs)(e.mtr,{children:[(0,n.jsx)(e.mtd,{children:(0,n.jsx)(e.mstyle,{scriptlevel:"0",displaystyle:"true",children:(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,n.jsx)(e.mi,{children:"b"})]})})}),(0,n.jsx)(e.mtd,{children:(0,n.jsx)(e.mstyle,{scriptlevel:"0",displaystyle:"true",children:(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mrow,{}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsxs)(e.msub,{children:[(0,n.jsx)(e.mi,{mathvariant:"bold",children:"x"}),(0,n.jsx)(e.mi,{children:"b"})]}),(0,n.jsx)(e.mo,{children:"\u2212"}),(0,n.jsxs)(e.mfrac,{children:[(0,n.jsx)(e.mn,{children:"1"}),(0,n.jsx)(e.mn,{children:"2"})]}),(0,n.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,n.jsx)(e.mi,{mathvariant:"bold",children:"d"})]})})})]})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\begin{align*}\n\\mathbf{x}_a &= \\mathbf{x}_a +  \\frac{1}{2} \\Delta \\mathbf{d} \\\\\n\\mathbf{x}_b &= \\mathbf{x}_b - \\frac{1}{2} \\Delta \\mathbf{d} \\\\\n\\end{align*}"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"4.6149em",verticalAlign:"-2.0574em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsxs)(e.span,{className:"mtable",children:[(0,n.jsx)(e.span,{className:"col-align-r",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsxs)(e.span,{className:"vlist",style:{height:"2.5574em"},children:[(0,n.jsxs)(e.span,{style:{top:"-4.5574em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3.3214em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"a"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]})})]}),(0,n.jsxs)(e.span,{style:{top:"-2.25em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3.3214em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"b"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]})})]})]}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"2.0574em"},children:(0,n.jsx)(e.span,{})})})]})}),(0,n.jsx)(e.span,{className:"col-align-l",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsxs)(e.span,{className:"vlist",style:{height:"2.5574em"},children:[(0,n.jsxs)(e.span,{style:{top:"-4.5574em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3.3214em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"a"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"+"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,n.jsx)(e.span,{className:"mfrac",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsxs)(e.span,{className:"vlist",style:{height:"1.3214em"},children:[(0,n.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:"2"})})]}),(0,n.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,n.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:"1"})})]})]}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.686em"},children:(0,n.jsx)(e.span,{})})})]})}),(0,n.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,n.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,n.jsx)(e.span,{className:"mord mathbf",children:"d"})]})]}),(0,n.jsxs)(e.span,{style:{top:"-2.25em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3.3214em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord mathbf",children:"x"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,n.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mathnormal mtight",children:"b"})})]})}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,n.jsx)(e.span,{})})})]})})]}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,n.jsx)(e.span,{className:"mfrac",children:(0,n.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(e.span,{className:"vlist-r",children:[(0,n.jsxs)(e.span,{className:"vlist",style:{height:"1.3214em"},children:[(0,n.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:"2"})})]}),(0,n.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,n.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:"1"})})]})]}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.686em"},children:(0,n.jsx)(e.span,{})})})]})}),(0,n.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,n.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,n.jsx)(e.span,{className:"mord mathbf",children:"d"})]})]})]}),(0,n.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"2.0574em"},children:(0,n.jsx)(e.span,{})})})]})})]})})]})})]})}),"\n",(0,n.jsxs)(e.p,{children:["where ",(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsx)(e.mrow,{children:(0,n.jsx)(e.mi,{children:"k"})}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"k"})]})})}),(0,n.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]})," is a stiffness parameter. There are two cases:"]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"k"}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsx)(e.mn,{children:"1"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"k=1"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(e.span,{className:"mord",children:"1"})]})]})]})," hard bond"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mi,{children:"k"}),(0,n.jsx)(e.mo,{children:"<"}),(0,n.jsx)(e.mn,{children:"1"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"k < 1"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.7335em",verticalAlign:"-0.0391em"}}),(0,n.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"<"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(e.span,{className:"mord",children:"1"})]})]})]})," soft bond (kinda bouncy like a spring)"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"Let's try to implement this in pure functions"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"a26bbc67-eee3-439f-a187-8b6f85741df5",type:"Input",opts:{InitGroup:!0},children:"getDir%5Bbonds_%2C%20pts_%5D%20%3A%3D%20Map%5B%28pts%5B%5B%23%5B%5B1%5D%5D%5D%5D%20-%20pts%5B%5B%23%5B%5B2%5D%5D%5D%5D%29%20%26%2C%20bonds%5D%20%0A%0AapplyBond%5Bpairs_%2C%20k_%3A1.0%2C%20maxDelta_%3A0.1%5D%5Bp_%5D%20%3A%3D%20Module%5B%7Bpts%20%3D%20p%7D%2C%0A%20%20MapThread%5BFunction%5B%7Bedge%2C%20length%7D%2C%20With%5B%7B%0A%20%20%20%20diff%20%3D%20pts%5B%5Bedge%5B%5B1%5D%5D%5D%5D%20-%20pts%5B%5Bedge%5B%5B2%5D%5D%5D%5D%0A%20%20%7D%2C%0A%20%20%20%20With%5B%7B%0A%20%20%20%20%20%20delta%20%3DMin%5Bk%20%28%20%28%2AFB%5B%2A%29%28%28length%29%28%2A%2C%2A%29%2F%28%2A%2C%2A%29%28Norm%5Bdiff%5D%2B0.001%29%29%28%2A%5DFB%2A%29%20-%201%29%2C%20maxDelta%5D%20diff%0A%20%20%20%20%7D%2C%0A%20%20%20%20%20%20pts%5B%5Bedge%5B%5B1%5D%5D%5D%5D%20%2B%3D%20delta%2F2.0%3B%0A%20%20%20%20%20%20pts%5B%5Bedge%5B%5B2%5D%5D%5D%5D%20-%3D%20delta%2F2.0%3B%0A%20%20%20%20%5D%0A%20%20%5D%20%5D%2C%20RandomSample%5Bpairs%5D%2F%2FTranspose%5D%3B%0A%0A%20%20pts%0A%5D%20"}),"\n",(0,n.jsx)(e.p,{children:"Here is a helper function to draw bonds, keeping them coupled to a dynamic symbol so that we can see how they change in real time."}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"b503cce2-371a-4e5d-b003-d22798d7ac7e",type:"Input",opts:{InitGroup:!0},children:"showGeometry%5Bpoints_%2C%20bonds_%2C%20opts___%5D%20%3A%3D%20Graphics%5B%7B%0A%20%20Gray%2C%20Rectangle%5B5%7B-1%2C-1%7D%2C%205%7B1%2C1%7D%5D%2C%20Blue%2C%0A%20%20%0A%20%20Table%5B%0A%20%20%20%20With%5B%7Bi%20%3D%20edge%5B%5B1%5D%5D%2C%20j%20%3D%20edge%5B%5B2%5D%5D%7D%2C%0A%20%20%20%20%20%20Line%5BWith%5B%7B%0A%20%20%20%20%20%20%20%20p%20%3D%20points%0A%20%20%20%20%20%20%7D%2C%20%7Bp%5B%5Bi%5D%5D%2C%20p%5B%5Bj%5D%5D%7D%5D%5D%20%2F%2F%20Offload%0A%20%20%20%20%5D%0A%20%20%2C%20%7Bedge%2C%20bonds%7D%5D%2C%0A%20%20%0A%20%20Red%2C%20Point%5Bpoints%20%2F%2F%20Offload%5D%0A%7D%2C%20opts%5D%0A%0ASetAttributes%5BshowGeometry%2C%20HoldFirst%5D%3B"}),"\n",(0,n.jsx)(e.p,{children:"Show it using our randomly generated points"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"f81bc33c-83f0-4115-b9e0-7f79a92cabd2",type:"Input",opts:{},children:"showGeometry%5Bpts0%2C%20EdgeList%20%40%20bonds%5D"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"848c2118-cbce-4205-96ae-2c6bb306d052",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28FrontEndRef%5B%22a5b31a9d-b6d6-4c3e-b884-a85c8357c438%22%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKJ5omGRsmWqboJpmlmOmaJBun6iZZWJjoJlqYJlsYm5onmxhbAACMnhWu%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsx)(e.p,{children:"We are almost set for our animation! Let's regenerate random points and connections each time we evaluate the next cell and run the main update loop, which consists of Verlet methods combined with hard constraints"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"70922fa1-fb02-4c09-82ad-55fffbc463f4",type:"Input",opts:{},children:"pts0%20%3D%20RandomReal%5B%7B-1%2C1%7D%2C%20%7B10%2C%202%7D%5D%3B%0Apts1%20%3D%20pts0%3B%20pts2%20%3D%20pts0%3B%0A%0Abonds%20%3D%20EdgeList%5BRandomGraph%5BLength%5Bpts0%5D%7B1%2C%203%7D%5D%5D%3B%0Alengths%20%3D%20Norm%20%2F%40%20getDir%5Bbonds%2C%20pts0%5D%3B%0Apairs%20%3D%20%7Bbonds%2C%20lengths%7D%20%2F%2F%20Transpose%3B%0A%0ADo%5BWith%5B%7B%5C%5BDelta%5Dt%20%3D%200.05%7D%2C%0A%20%20pts0%20%3D%20Clip%5BapplyBond%5Bpairs%2C%201.0%5D%5B%0A%20%20%20%202%20pts1%20-%20pts2%20%2B%20Table%5B%7B0%2C-1%7D%2C%20%7Bi%2C%20Length%5Bpts0%5D%7D%5D%20%28%2ASpB%5B%2A%29Power%5B%5C%5BDelta%5Dt%28%2A%7C%2A%29%2C%28%2A%7C%2A%292%5D%28%2A%5DSpB%2A%29%0A%20%20%5D%2C%20%7B-5%2C5%7D%5D%3B%0A%20%20%0A%20%20pts2%20%3D%20pts1%3B%0A%20%20pts1%20%3D%20pts0%3B%0A%20%20%0A%20%20Pause%5B0.01%5D%3B%0A%20%20%0A%5D%2C%20%7Bi%2C%20200%7D%5D"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:a(11001).A+"",width:"792",height:"598"})}),"\n",(0,n.jsx)(e.h2,{id:"procedurally-generated-structures",children:"Procedurally generated structures"}),"\n",(0,n.jsxs)(e.p,{children:["Even without any optimizations of present code (normally you would need to use vectorization tricks or ",(0,n.jsx)(e.code,{children:"Compile"})," or switch to ",(0,n.jsx)(e.code,{children:"OpenCLLink"}),") we can still try to model some more complex than random graph of 10 points and add interaction with a user's mouse."]}),"\n",(0,n.jsx)(i.oN,{children:"%3Cbr%20%2F%3E"}),"\n",(0,n.jsx)(e.h3,{id:"rim",children:"Rim"}),"\n",(0,n.jsx)(e.p,{children:"Here is a quick way of making this using just tables"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"dbc64e6b-b3a3-4a57-b13a-adc7c2e89bb8",type:"Input",opts:{InitGroup:!0},children:"rim%20%3D%20Join%20%40%40%0A%20%20%28Table%5B%23%7BSin%5Bx%5D%2C%20Cos%5Bx%5D%7D%2C%20%7Bx%2C-Pi%2C%20Pi%2C%20Pi%2F6%7D%5D%20%26%2F%40%20%7B1%2C%200.9%7D%20%2F%2F%20Transpose%29%3B%0A%20%20%0Arbonds%20%3D%20Graph%5B%0A%20%20Join%5B%0A%20%20%20%20Table%5Bi%3C-%3Ei%2B1%2C%20%7Bi%2C%201%2C%20Length%5Brim%5D-1%7D%5D%2C%0A%20%20%20%20Table%5Bi%3C-%3Ei%2B2%2C%20%7Bi%2C%201%2C%20Length%5Brim%5D-2%2C%202%20%7D%5D%2C%0A%20%20%20%20Table%5Bi%3C-%3Ei%2B2%2C%20%7Bi%2C%202%2C%20Length%5Brim%5D-4%2C%202%20%7D%5D%2C%0A%20%20%20%20%7BLength%5Brim%5D-2%20%3C-%3E%202%7D%2C%0A%20%20%20%20%7BLength%5Brim%5D-1%20%3C-%3E%201%7D%0A%20%20%5D%0A%2C%20VertexCoordinates-%3Erim%5D%0A%0Arbonds%20%3D%20EdgeList%5Brbonds%5D%3B%0Arpairs%20%3D%20%7Brbonds%2C%20Norm%20%2F%40%20getDir%5Brbonds%2C%202.0%20rim%5D%7D%20%2F%2F%20Transpose%3B"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"a272f243-1a54-4aaa-ac1d-41784e025cae",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28CoffeeLiqueur%60Extensions%60Boxes%60Workarounds%60temporal%24555644%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKJ1kaGiZZmBnpWpgYG%2BqaANm6FqmmhrqJBsmJSWZGyUmJZmYAd84VZQ%3D%3D%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsx)(e.p,{children:"Prepare variables for storing positions"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"39c43181-ccef-4f96-98a8-b5e1ba093f8f",type:"Input",opts:{InitGroup:!0},children:"rim0%20%3D%202.0%20rim%3B%20rim1%20%3D%20rim0%3B%20rim2%20%3D%20rim0%3B%0ArimR%20%3D%20rim0%3B%0A%0AmousePos%20%20%20%3D%20%7B100.%2C0.%7D%3B"}),"\n",(0,n.jsxs)(e.p,{children:["Here we will automate our update cycle by attaching an animation frame listener to the ",(0,n.jsx)(e.code,{children:"rimR"})," symbol. It will trigger an event to prepare the next frame of animation within the update cycle of your screen (actually - the app window). Each time, the timer is reset by an update of the ",(0,n.jsx)(e.code,{children:"rimR"})," symbol, ensuring that the next frame will only come after the previous one has been finished."]}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"78a0303e-bf1c-47ab-869a-0d50b6cec631",type:"Input",opts:{InitGroup:!0},children:"EventHandler%5B%0A%20%20showGeometry%5BrimR%2C%20rbonds%2C%20TransitionType-%3ENone%2C%20%22Controls%22-%3EFalse%2C%20Epilog-%3E%7B%0A%20%20%20%20AnimationFrameListener%5BrimR%20%2F%2F%20Offload%2C%20%22Event%22-%3E%22anim%22%5D%2C%20%0A%20%20%20%20Circle%5BmousePos%20%2F%2F%20Offload%2C%200.5%5D%0A%20%20%7D%2C%20PlotRange-%3E%7B%7B-5%2C5%7D%2C%20%7B-5%2C5%7D%7D%5D%0A%2C%20%7B%22mousemove%22%20-%3E%20Function%5Bxy%2C%0A%20%20%20%20mousePos%20%3D%20xy%3B%0A%5D%7D%5D"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"99db7378-2c3e-4478-aa18-a6b488c3c247",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28FrontEndRef%5B%223bce9eb6-f53f-4ddb-8443-f7d28a8076ec%22%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKGyclp1qmJpnpppkap%2BmapKQk6VqYmBjrppmnGFkkWhiYm6UmAwCVvhZE%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsx)(e.p,{children:"Animation controls"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"55ac84d8-3ba9-4359-aaf1-3fb770558960",type:"Input",opts:{InitGroup:!0,Fade:!0},children:"Button%5B%22Start%22%2C%20%0A%20EventHandler%5B%22anim%22%2C%20With%5B%7B%7D%2C%20Do%5BWith%5B%7B%5C%5BDelta%5Dt%20%3D%200.006%7D%2C%20%0A%20%20rim0%20%3D%20applyBond%5Brpairs%2C%201.0%2C%200.8%5D%5B%0A%20%20%20%20Clip%5B%282%20rim1%20-%20rim2%29%20%2B%20Table%5B%0A%20%20%20%20%20%20%20If%5BMax%5BAbs%5Bi%20-%20mousePos%5D%5D%20%3C%202.0%2C%20%7B0%2C-1%7D%20-%207.0%20%28i%20-%20mousePos%29%2C%20%7B0%2C-1%7D%5D%0A%20%20%20%20%2C%20%7Bi%2C%20rim0%7D%5D%20%28%2ASpB%5B%2A%29Power%5B%5C%5BDelta%5Dt%28%2A%7C%2A%29%2C%28%2A%7C%2A%292%5D%28%2A%5DSpB%2A%29%2C%20%7B-5%2C5%7D%5D%0A%20%20%5D%3B%0A%0A%20%20%0A%20%20rim2%20%3D%20rim1%3B%0A%20%20rim1%20%3D%20rim0%3B%0A%20%20%0A%20%5D%2C%20%7Bi%2C%2010%7D%5D%3B%0A%20%20rimR%20%3D%20rim0%3B%0A%0A%20%5D%26%5D%3B%20%0A%20rimR%20%3D%20rim0%3B%0A%5D%0A%0AButton%5B%22Stop%22%2C%20EventRemove%5B%22anim%22%5D%5D%0A%0AButton%5B%22Reset%22%2C%20With%5B%7B%7D%2C%20rim0%20%3D%202.0%20rim%3B%20rim1%20%3D%20rim0%3B%20rim2%20%3D%20rim0%3B%0ArimR%20%3D%20rim0%3B%5D%5D"}),"\n",(0,n.jsx)(e.h2,{id:"generate-a-mesh-from-an-image",children:"Generate a Mesh from an Image"}),"\n",(0,n.jsx)(e.p,{children:"The more challenging, the more fun! It would be great to sketch a bitmap image using a brush and transform it into a mesh that can be modeled."}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"6e164f86-eac9-43e5-9b2b-6f9c0dc5f9da",type:"Input",opts:{InitGroup:!0},children:"mask%20%3D%20NotebookStore%5B%22carnivorous-284%22%5D%3B%0AEventHandler%5BInputRaster%5Bmask%5D%2C%20%28mask%20%3D%20%23%29%26%5D"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"6c818ae8-0f3c-4bcd-a53c-e87019268a89",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28EventObject%5B%3C%7C%22Id%22%20-%3E%20%22c55c1db7-d2bc-405f-92b2-ff686e34700f%22%2C%20%22View%22%20-%3E%20%22071dc109-8cda-4156-8af8-c541963477de%22%7C%3E%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKG5gbpiQbGljqWiSnJOqaGJqa6VokplnoJpuaGFqaGZuYm6ekAgB91BVN%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsxs)(e.p,{children:["Now convert this image to a mesh, triangulate it and render as an index graph. Using ",(0,n.jsx)(e.code,{children:"Graph"})," object is a bit easier, than working with triangulated mesh, since all bonds are sorted and can easily be extracted"]}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"23f5ba95-953e-4181-9f70-9064ab506404",type:"Input",opts:{InitGroup:!0},children:"mesh%20%3D%20TriangulateMesh%5B%0A%20%20ImageMesh%5BImageResize%5Bmask%20%2C%20100%5D%2F%2F%20ColorNegate%5D%0A%2C%20MaxCellMeasure-%3E%7B%22Area%22-%3E100%7D%5D%3B%0A%0Agraph%20%3D%20MeshConnectivityGraph%5Bmesh%2C%200%5D%20%2F%2F%20IndexGraph%0Avertices%20%3D%20graph%20%2F%2F%20GraphEmbedding%3B%0Aedges%20%3D%20%28List%20%40%40%20%23%29%20%26%2F%40%20%28graph%20%2F%2F%20EdgeList%29%20%28%2ABB%5B%2A%29%28%2Aconvert%20to%20list%20of%20lists%2A%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNhYGAo5gcSAUX5ZZkpqSn%2BBSWZ%2BXnFaYwgCS4g4Zyfm5uaV%2BKUXxEMUqxsbm6exgSSBPGCSnNSg9mAjOCSosy8dLBYSFFpKpoKkDkeqYkpEFXBILO1sCgJSczMQVYCAOFrJEU%3D%22%2A%29%28%2A%5DBB%2A%29%3B%0A%0Avertices%20%3D%20Map%5BFunction%5Bx%2C%20x%20-%20%7B0.4%2C-1.2%7D%5D%2C%200.04%20vertices%5D%20%28%2ABB%5B%2A%29%28%2Ascale%20and%20translate%2A%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNhYGAo5gcSAUX5ZZkpqSn%2BBSWZ%2BXnFaYwgCS4g4Zyfm5uaV%2BKUXxEMUqxsbm6exgSSBPGCSnNSg9mAjOCSosy8dLBYSFFpKpoKkDkeqYkpEFXBILO1sCgJSczMQVYCAOFrJEU%3D%22%2A%29%28%2A%5DBB%2A%29%3B"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"100dd749-97c0-4a4b-8a8d-36ec6a25c690",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28CoffeeLiqueur%60Extensions%60Boxes%60Workarounds%60temporal%24824230%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKJ6ampBlbpFnompknmuqaGBsa6VqaJVvqmpuaGyWnGFokGacYAQCH7xWE%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsxs)(e.p,{children:["Animation cycle (",(0,n.jsx)(e.em,{children:"as before"}),")"]}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"1622273f-3f33-4f3b-a1bd-5c3341ded77b",type:"Input",opts:{InitGroup:!0},children:"vertices0%20%3D%20%20vertices%3B%20vertices1%20%3D%20vertices0%3B%20vertices2%20%3D%20vertices0%3B%0AverticesR%20%3D%20vertices0%3B%0A%0Avpairs%20%3D%20%7Bedges%2C%20Norm%20%2F%40%20getDir%5Bedges%2C%20vertices0%5D%7D%20%2F%2F%20Transpose%3B%0A%0AmousePos%20%20%20%3D%20%7B100.%2C0.%7D%3B"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"fae01903-3399-45a8-89c4-5f74274a672f",type:"Input",opts:{InitGroup:!0},children:"EventHandler%5B%0A%20%20showGeometry%5BverticesR%2C%20edges%2C%20TransitionType-%3ENone%2C%20%22Controls%22-%3EFalse%2C%20Epilog-%3E%7B%0A%20%20%20%20AnimationFrameListener%5BverticesR%20%2F%2F%20Offload%2C%20%22Event%22-%3E%22anim2%22%5D%2C%20%0A%20%20%20%20Circle%5BmousePos%20%2F%2F%20Offload%2C%200.5%5D%0A%20%20%7D%2C%20PlotRange-%3E%7B%7B-5%2C5%7D%2C%20%7B-5%2C5%7D%7D%5D%0A%2C%20%7B%22mousemove%22%20-%3E%20Function%5Bxy%2C%0A%20%20%20%20mousePos%20%3D%20xy%3B%0A%5D%7D%5D"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"321d8fb6-4802-4d20-8935-859f74c863b4",type:"Output",opts:{},children:"%28%2AVB%5B%2A%29%28FrontEndRef%5B%22042dbb94-164f-4875-860c-7e260c54bedb%22%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKG5gYpSQlWZroGpqZpOmaWJib6lqYGSTrmqcaASlTk6TUlCQAecUVdQ%3D%3D%22%2A%29%28%2A%5DVB%2A%29"}),"\n",(0,n.jsx)(i.aO,{display:"codemirror",nid:"7ed76a6a-ca03-4410-a4bf-f0f29790de38",id:"a2c8ac2b-a23a-4623-9641-f1c9cfdb40f4",type:"Input",opts:{InitGroup:!0,Fade:!0},children:"Button%5B%22Start%22%2C%20%0A%20EventHandler%5B%22anim2%22%2C%20With%5B%7B%7D%2C%20Do%5BWith%5B%7B%5C%5BDelta%5Dt%20%3D%200.003%7D%2C%20%0A%20%20vertices0%20%3D%20applyBond%5Bvpairs%2C%201.0%2C%200.8%5D%5B%0A%20%20%20%20Clip%5B%282%20vertices1%20-%20vertices2%29%20%2B%20Table%5B%0A%20%20%20%20%20%20%20If%5BMax%5BAbs%5Bi%20-%20mousePos%5D%5D%20%3C%202.0%2C%20%7B0%2C-1%7D%20-%207.0%20%28i%20-%20mousePos%29%2C%20%7B0%2C-1%7D%5D%0A%20%20%20%20%2C%20%7Bi%2C%20vertices0%7D%5D%20%28%2ASpB%5B%2A%29Power%5B%5C%5BDelta%5Dt%28%2A%7C%2A%29%2C%28%2A%7C%2A%292%5D%28%2A%5DSpB%2A%29%2C%20%7B-5%2C5%7D%5D%0A%20%20%5D%3B%0A%0A%20%20%0A%20%20vertices2%20%3D%20vertices1%3B%0A%20%20vertices1%20%3D%20vertices0%3B%0A%20%20%0A%20%5D%2C%20%7Bi%2C%203%7D%5D%3B%0A%20%20verticesR%20%3D%20vertices0%3B%0A%0A%20%5D%26%5D%3B%20%0A%20verticesR%20%3D%20vertices0%3B%0A%5D%0A%0AButton%5B%22Stop%22%2C%20EventRemove%5B%22anim2%22%5D%5D%0A%0AButton%5B%22Reset%22%2C%20With%5B%7B%7D%2C%20vertices0%20%3D%20%20vertices%3B%20vertices1%20%3D%20vertices0%3B%20vertices2%20%3D%20vertices0%3B%0AverticesR%20%3D%20vertices0%3B%5D%5D"}),"\n",(0,n.jsxs)(e.p,{children:["As a next step I would suggest to you take ",(0,n.jsx)(e.code,{children:"Compile"})," expression and try keep all pure functions there. Thank you fro your attention \ud83e\uddd9\ud83c\udffc\u200d\u2642\ufe0f"]})]})}function h(s={}){const{wrapper:e}={...(0,t.R)(),...s.components};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(d,{...s})}):d(s)}},18535:()=>{},23366:(s,e,a)=>{"use strict";a.d(e,{A:()=>n});const n=a.p+"d576a816bc02a6b5084ee2da542b11cc.wln"},28453:(s,e,a)=>{"use strict";a.d(e,{R:()=>l,x:()=>r});var n=a(96540);const t={},i=n.createContext(t);function l(s){const e=n.useContext(i);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function r(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:l(s.components),n.createElement(i.Provider,{value:e},s.children)}},52621:(s,e,a)=>{"use strict";a.d(e,{aO:()=>N,oN:()=>B,k8:()=>g});var n,t=a(96540);a(83386),a(44586);function i(){return i=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(s[n]=a[n])}return s},i.apply(null,arguments)}const l=s=>{let{title:e,titleId:a,...l}=s;return t.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"w-5 h-5 ml-auto",viewBox:"0 0 24 24","aria-labelledby":a},l),e?t.createElement("title",{id:a},e):null,n||(n=t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 17h.01m.39-3h.6c.932 0 1.398 0 1.765.152a2 2 0 0 1 1.083 1.083C21 15.602 21 16.068 21 17s0 1.398-.152 1.765a2 2 0 0 1-1.083 1.083C19.398 20 18.932 20 18 20H6c-.932 0-1.398 0-1.765-.152a2 2 0 0 1-1.083-1.083C3 18.398 3 17.932 3 17s0-1.398.152-1.765a2 2 0 0 1 1.083-1.083C4.602 14 5.068 14 6 14h.6m5.4 1V4m0 11-3-3m3 3 3-3"})))};var r=a(95293),c=(a(38193),a(14195),a(92303),a(74848));function m(s){return s.reduce(((s,e)=>Array.isArray(e)?s.concat(m(e)):s.concat(e)),[])}function o(s,e){return e.reduce(((e,a)=>s[a.index]===a.value?e+1:e),0)}function d(s){return Array.isArray(s)}function h(s){return d(s)?s.map(h):0}function p(s,e){return d(s)?s.map(((s,a)=>p(s,e[a]))):s+e}function x(s,e){return d(s)?s.map((s=>x(s,e))):s*e}function j(s,e){const a=e.reduce(((s,e)=>s+e),0);let n=h(s[0]);for(let t=0;t<s.length;t++)n=p(n,x(s[t],e[t]));return x(n,1/a)}async function u(s,e,a){const{numerical:n,categorical:t}=s.reduce(((s,e,a)=>("string"==typeof e?s.categorical.push({index:a,value:e}):s.numerical.push({index:a,value:e}),s)),{numerical:[],categorical:[]});const i=n.map((s=>s.value)),l=n.map((s=>s.index)),r=function(s,e){const a=new Map;for(let n=0;n<s.length;n++){const t=o(s[n],e);a.has(t)||a.set(t,[]),a.get(t).push(n)}return Array.from(a.entries()).sort(((s,e)=>e[0]-s[0]))}(e,t);let c=null;for(const[o,j]of r)if(j.length>=2){c=j;break}if(!c)throw new Error("No matching basis found.");const m=c.map((s=>function(s,e){return e.map((e=>s[e]))}(e[s],l))),d=await Promise.all(c.map((s=>a(s)))),h=i.length;let p=Math.pow(2,h);p=Math.min(p,c.length);const x=m.map(((s,e)=>{return{index:e,dist:(a=i,n=s,Math.sqrt(a.reduce(((s,e,a)=>s+(e-n[a])**2),0)))};var a,n}));x.sort(((s,e)=>s.dist-e.dist));const u=x.slice(0,p),g=u.map((s=>{let{dist:e}=s;return 0===e?1e6:1/e})),B=u.map((s=>{let{index:e}=s;return d[e]})),N=B[0];if("string"==typeof(D=N)||D instanceof String){const s=B.map((s=>function(s){const e=s.match(/(\d*\.?\d+|\D+)/g),a=[],n=[];for(const t of e)/^\d*\.?\d+$/.test(t)?(n.push(parseFloat(t)),a.push(null)):a.push(t);return{template:a,numbers:n}}(s))),e=JSON.stringify(s[0].template),a=s.every((s=>JSON.stringify(s.template)===e));if(!a)return console.error("Output string differs. Cannot interpolate!"),B[0];const n=s.map((s=>s.numbers)),t=j(n,g).map((s=>Number(s.toFixed(2))));return function(s,e){let a=0;return s.map((s=>null===s?e[a++]:s)).join("")}(s[0].template,t)}return Array.isArray(N),j(B,g);var D}function g(s){let{json:e,notebook:a,kernel:n}=s;const{colorMode:i,setColorMode:o}=(0,r.G)();return(0,t.useEffect)((()=>{console.warn("Create store"),console.warn(e);const s={},a={};let t=[];const i=new Deferred;window.server={kernel:{io:{fire(s,e,a){void 0===a&&(a="Default"),t.push(["fire",s,e,a])},poke(s){t.push(["poke",s])}}}},window.server.kernel.emitt=()=>{console.warn("Emitt is not supported anymore")};let l=async()=>{l=async()=>{},fetch(e).then((e=>{console.warn("Store loaded!"),e.json().then((e=>{interpretate(e.objects,{hold:!0}).then((e=>{console.warn("Objects loaded!"),Object.keys(e).forEach((s=>{const a=new ObjectStorage(s);a.cache=e[s],a.cached=!0})),Object.keys(s).forEach((a=>{Array.isArray(s[a])?s[a].forEach((s=>s.resolve(e[a]))):s[a].resolve(e[a])}))})),interpretate(e.symbols,{hold:!0}).then((s=>{console.warn("Symbols loaded!"),Object.keys(s).forEach((e=>{core[e]=async(s,a)=>await interpretate(core[e].data,a),core[e].data=s[e],core[e]=async(s,a)=>{console.log("IE: calling our symbol...");const n=await interpretate(core[e].data,a);return a.root&&!a.novirtual&&(core[e].instances[a.root.uid]=a.root),n},core[e].update=async(s,a)=>{if(a.useCache)return core[e].cached&&core[e].currentData==core[e].data||(core[e].cached=await interpretate(core[e].data,a),core[e].currentData=core[e].data),core[e].cached;return await interpretate(core[e].data,a)},core[e].destroy=async(s,a)=>{delete core[e].instances[a.root.uid],console.warn(a.root.uid+" was destroyed"),console.warn("external symbol was destoryed")},core[e].data=structuredClone(s[e]),core[e].virtual=!0,core[e].instances={}})),Object.keys(a).forEach((e=>{console.warn(e),a[e].resolve(s[e])})),i.resolve()}))}))}))};core.Offload=(s,e)=>{if(s.length>1)if("'Static'"===s[1][1]){if(s[1][2])return interpretate(s[0],{...e,static:!0})}else if(s.length>2&&"'Static'"===s[2][1]&&s[2][2])return interpretate(s[0],{...e,static:!0});return interpretate(s[0],e)},core.Medium=()=>.7,core.Offload.update=(s,e)=>{if(s.length>1)if("'Volatile'"===s[1][1]){if(!s[1][2])return void console.log("Update was rejected (Nonvolatile)")}else if(s.length>2&&"'Volatile'"===s[2][1]&&!s[2][2])return void console.log("Update was rejected (Nonvolatile)");return interpretate(s[0],e)},window.server.ask=e=>{const a=new Deferred;if(e.length<42)return console.error("Unknown command"),console.error(e),!1;return Array.isArray(s[e.slice(60,-2)])?s[e.slice(60,-2)].push(a):s[e.slice(60,-2)]=[a],l(),a.promise},window.server.getSymbol=s=>{const e=new Deferred;return console.warn("Asking for symbol"+s),a[s]=e,e.promise},interpretate.anonymous=async(s,e)=>{let n,t;if(console.log("Anonimous symbol: "+JSON.stringify(s)),s instanceof Array)throw console.error(s),"unknown WL expression. Error at "+s[0];n=s;const i=new Deferred;return console.warn("Asking for symbol"+n),a[n]=i,t=await i.promise,core[n]=async(s,e)=>{console.log("IE: calling our symbol...");const a=await interpretate(core[n].data,e);return e.root&&!e.novirtual&&(core[n].instances[e.root.uid]=e.root),a},core[n].update=async(s,e)=>{if(e.useCache)return core[n].cached&&core[n].currentData==core[n].data||(core[n].cached=await interpretate(core[n].data,e),core[n].currentData=core[n].data),core[n].cached;return await interpretate(core[n].data,e)},core[n].destroy=async(s,e)=>{delete core[n].instances[e.root.uid],console.warn(e.root.uid+" was destroyed"),console.warn("external symbol was destoryed")},core[n].data=t,core[n].virtual=!0,core[n].instances={},interpretate(s,e)},(async()=>{console.warn("Kernel"),n&&(console.warn("KERNEL"),fetch(n).then((s=>{console.log(s),s.json().then((async s=>{const e={},a=async s=>{const e=(new TextEncoder).encode(s),a=await window.crypto.subtle.digest("SHA-1",e);return Array.from(new Uint8Array(a)).map((s=>s.toString(16).padStart(2,"0"))).join("")};e.StateMachine=class{constructor(){this.map=new Map,this.state=[],this.symbol=null,this.eventsMap=new Map}async init(s){const e=await interpretate.unzlib64String(s.CompressedMap),a=JSON.parse(e);this.map=new Map(a),this.symbol=s.Symbol,s.Basis&&(this.basis=s.Basis,this.flattenbasis=s.Basis.map((s=>m(s)))),this.state=[...s.InitialValues],this.eventsMap=new Map;const n=this;return s.Events.forEach(((s,e)=>{n.eventsMap.set(s[0]+"::"+s[1],e)})),delete s.CompressedMap,this}async run(s,e,n){const t=s+"::"+n;if(!this.eventsMap.has(t))return;const i=this.eventsMap.get(t);this.state[i]=e;const l=await a(JSON.stringify(this.state)),r=core[this.symbol];this.map.has(l)?r.data=["JSObject",structuredClone(this.map.get(l))]:(console.log("Hash miss. Attempting to interpolate"),r.data=await this.interpolate());for(const a of Object.values(r.instances))a.dead||await a.update()}async interpolate(){if(!this.basis)throw"no basis";const s=this,e=m(this.state);console.log(e);return["JSObject",await u(e,this.flattenbasis,(async e=>{const n=await a(JSON.stringify(s.basis[e]));return structuredClone(s.map.get(n))}))]}},e.PavlovMachine=class{constructor(){this.map=new Map,this.eventsMap=new Map}async init(s){const e=await interpretate.unzlib64String(s.CompressedMap),a=JSON.parse(e);this.map=new Map(a),this.eventsMap=new Map;const n=this;return s.Events.forEach((s=>{n.eventsMap.set(s[0]+"::"+s[1])})),delete s.CompressedMap,this}async run(s,e,n){const t=s+"::"+n;if(!this.eventsMap.has(t))return;const i=await a(JSON.stringify([s,n,e]));if(!this.map.has(i))return;interpretate(JSON.parse(this.map.get(i)),{global:{},local:{}})}},e.AnimationMachine=class{constructor(){}async init(s){const e=await interpretate.unzlib64String(s.Compressed),a=JSON.parse(e);return this.values=a,this.count=0,this.parity=!0,this.symbol=s.Symbol,this.hash=s.HashState,this.eventId=s.Event[0],this}async run(s,e,a){if(this.eventId!=s)return;const n=core[this.symbol];n.data=["JSObject",structuredClone(this.values[this.count])];for(const t of Object.values(n.instances))t.dead||await t.update();this.parity||this.count++,this.parity=!this.parity,this.values.length==this.count&&(this.count=0)}};const n=await interpretate(s,{}),i=[];for(const t of n){const s=new e[t.Class];await s.init(t),i.push(s)}const l=i.length;window.server.kernel={io:{fire:function(s,e,a){void 0===a&&(a="Default");for(let n=0;n<l;++n)i[n].run(s,e,a)},poke:s=>{for(let e=0;e<l;++e)i[e].run(s,!0,"Default")}}},t.forEach((s=>{"fire"==s[0]?window.server.kernel.io.fire(s[1],s[2],s[3]):"poke"==s[0]&&window.server.kernel.io.poke(s[1])})),t=[]}))})))})()})),console.log("DONE loading mesh"),a?(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("a",{href:a,className:"dark"==i?"p-2 text-xs w-full flex ring-1 ring-inset shadow ring-gray-300 text-gray-300 my-2":"p-2 text-xs w-full flex ring-1 ring-inset text-gray-600 shadow ring-gray-300 bg-gray-300 my-2",children:["Download original notebook ",(0,c.jsx)(l,{})]})}):(0,c.jsx)(c.Fragment,{})}function B(s){let{children:e,data:a}=s;const n={__html:decodeURIComponent(e)};return(0,c.jsx)("div",{dangerouslySetInnerHTML:n})}function N(s){let{children:e,nid:a,id:n,type:i,display:l,opts:m}=s;const o=(0,t.useRef)(null),{colorMode:d,setColorMode:h}=(0,r.G)(),p=decodeURIComponent(e),[x,j]=(0,t.useState)(m.Fade),[u,g]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const s=o.current;let e;if(console.warn("Create Codemirror"),console.warn(l),console.log(p),g(!0),console.warn("Created: "+l),"print"!=l){if(window.SupportedCells[l])return window.SupportedCells[l].view&&(e=new window.SupportedCells[l].view({element:s},p)),e.editor&&m.Fade&&(o.current.addEventListener("focusin",(()=>{j(!1)})),o.current.addEventListener("focusout",(()=>{j(!0)}))),()=>{e&&e.dispose()};console.warn("Not found: "+l)}}),[]),(0,c.jsx)("div",{style:{filter:"dark"==d?"invert(1) contrast(0.8) hue-rotate(-185deg)":"none"},className:"language-mathematica codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block",children:(0,c.jsx)("div",{className:x?"h-fade-20 codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module":"codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module",children:(0,c.jsxs)("pre",{tabIndex:"0",className:"prism-code language-mathematica codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar",style:{color:"rgb(57, 58, 52)",backgroundColor:"rgb(246, 248, 250)"},children:[!u&&(0,c.jsx)("code",{style:{whiteSpace:"pre-wrap"},className:"codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module",children:p}),(0,c.jsx)("code",{ref:o,className:"codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"})]})})})}},73944:(s,e,a)=>{"use strict";a.d(e,{A:()=>n});const n=a.p+"assets/images/Screenshot 2025-05-01 at 15.56.21-343b8270bd94d8b3789dfd6e760e9ebe.png"},76274:()=>{},88938:(s,e,a)=>{"use strict";a.d(e,{A:()=>n});const n=a.p+"dca0845d6f0602762d77412390ee08c8.txt"}}]);