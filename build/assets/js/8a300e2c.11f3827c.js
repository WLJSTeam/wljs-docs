"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[88243],{2394:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var a=i(74848),r=i(28453);const t=i.p+"assets/medias/TimelineAnimation-3e0642b6070910d5c2a7eba00680281d.mp4",s={sidebar_position:5},o=void 0,c={id:"frontend/Advanced/Animation Framework/Timeline",title:"Timeline",description:"AF provides a GUI element for timing and adjusting the events on the timeline filling some gaps between programmatic approach for animations and visual like in a typical video editor:",source:"@site/docs/frontend/Advanced/Animation Framework/Timeline.md",sourceDirName:"frontend/Advanced/Animation Framework",slug:"/frontend/Advanced/Animation Framework/Timeline",permalink:"/frontend/Advanced/Animation Framework/Timeline",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1749492433e3,sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Recording",permalink:"/frontend/Advanced/Animation Framework/Recording"},next:{title:"Prototyping",permalink:"/frontend/Advanced/Animation Framework/Prototyping"}},d={},l=[{value:"Quick start",id:"quick-start",level:2},{value:"Time markers",id:"time-markers",level:2},{value:"Example",id:"example",level:3},{value:"Export markers",id:"export-markers",level:3},{value:"Restore markers",id:"restore-markers",level:3},{value:"Recording",id:"recording",level:2},{value:"Voice-over",id:"voice-over",level:2},{value:"Recording",id:"recording-1",level:3},{value:"Exporting",id:"exporting",level:3},{value:"Restoring",id:"restoring",level:3}];function m(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"AF"})," provides a GUI element for timing and adjusting the events on the timeline filling some gaps between programmatic approach for animations and visual like in a typical video editor:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(91530).A+"",width:"800",height:"446"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["You are still working with ",(0,a.jsx)(n.code,{children:"AsyncFunction"})," functions. Timeline is an external addition to that."]})}),"\n",(0,a.jsx)(n.h2,{id:"quick-start",children:"Quick start"}),"\n",(0,a.jsx)(n.p,{children:"Let's create a timeline:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'Needs["AnimationFramework`"->"af`"];\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:"t = af`TimelinedAnimation[animationFunction];\nt\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.a,{href:"/frontend/Advanced/Projector",children:"Projector"})," on the timeline input cell to work with in in a separate window"]})}),"\n",(0,a.jsx)(n.p,{children:"There are some key aspects of working with a timeline:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["The duration of your playback is defined by the total time needed for executing your ",(0,a.jsx)(n.strong,{children:"animationFunction"})," (which has to be ",(0,a.jsx)(n.a,{href:"/frontend/Advanced/Events%20system/Asynchronous%20Functions",children:"Asynchronous Function"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"TimelinedAnimation"})," has ",(0,a.jsx)(n.code,{children:"HoldFirst"})," attribute and ",(0,a.jsx)(n.strong,{children:"PLAY"})," button releases it and evaluates animation function symbol provided. I.e. when you update the definition of ",(0,a.jsx)(n.code,{children:"animationFunction"}),", ",(0,a.jsx)(n.strong,{children:"you do not need to reevaluate"})," ",(0,a.jsx)(n.code,{children:"TimelinedAnimation"})]}),"\n",(0,a.jsx)(n.li,{children:"Seeking the position on the timeline is done via artificially speeding up time of the scene, since animation function may have internal states."}),"\n",(0,a.jsxs)(n.li,{children:["Use ",(0,a.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Reference#PauseAsync",children:"PauseAsync"})," with ",(0,a.jsx)(n.code,{children:"scene"})," argument provided, otherwise the animation will be un-synced with the timeline."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Now define a basic animation sequence for now without a direct connection with a timeline:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'animationFunction = AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, {\n    Opacity[#o], \n    Translate[\n      Rotate[\n        Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n      , #r]\n    , #c]\n  }, {\n    "o" -> 0.,\n    "r" -> 0.,\n    "c" -> {0,0}\n  }];\n\n  af`Animate[scene, d, {"o" -> 1.0,"r" -> 3.14}, "Ease", 1.0] // Await;\n\n  PauseAsync[scene, 0.4] // Await;\n\n  af`Animate[scene, d, {"c"->{0.5,0.5}}, "Ease", 1.0] // Await;\n  af`Animate[scene, d, {"c"->{-0.5,0.5}, "r"->4.2}, "Ease", 1.0] // Await;\n  af`Animate[scene, d, {"c"->{0.5,-0.5}}, "Ease", 1.0] // Await;\n\n  af`Animate[scene, d, {"c"->{0.,0.}, "o"->0., "r"->0}, "Ease", 1.0] // Await;\n\n  af`Remove[d];\n]];\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Now hit ",(0,a.jsx)(n.em,{children:"PLAY"})," button:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(9828).A+"",width:"1214",height:"104"})}),"\n",(0,a.jsx)(n.p,{children:"When focused on the timeline:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Spacebar"})," - play/pause"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"time-markers",children:"Time markers"}),"\n",(0,a.jsxs)(n.p,{children:["To place a time marker - ",(0,a.jsx)(n.strong,{children:"double click"}),":"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(81824).A+"",width:"1222",height:"334"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["All marker must have a ",(0,a.jsx)(n.strong,{children:"unique label"})]}),"\n",(0,a.jsx)(n.li,{children:"Double click on a marker to remove it"}),"\n",(0,a.jsx)(n.li,{children:"Each marker has a duration, you can change it by dragging a gizmo on the right"}),"\n",(0,a.jsx)(n.li,{children:"Timeline rows have no effect and exists only for the user convenience in placing overlapping markers"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["A user can can reference the markers from ",(0,a.jsx)(n.code,{children:"Scene"})," object in two possible ways in the animation function:"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"As a pause"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"wait for the marker"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'af`Marker[scene, "M1"] // Await;\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"wait for the end of the marker"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'af`Marker[scene, "M1", "End"] // Await;\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"As a quantity"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'af`Marker[scene, "M1", "Duration"]\n'})}),"\n",(0,a.jsx)(n.p,{children:"This will return a number in seconds."}),"\n",(0,a.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.p,{children:"Let us transform our previous animation to use marker events"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'animationFunction = AsyncFunction[scene, Module[{d, u},\n  d = af`AddTo[scene, {\n    Opacity[#o], \n    Translate[\n      Rotate[\n        Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n      , #r]\n    , #c]\n  }, {\n    "o" -> 0.,\n    "r" -> 0.,\n    "c" -> {0,0}\n  }];\n\n  af`Marker[scene, "appear"] // Await;\n  af`Animate[scene, d, {"o" -> 1.0,"r" -> 3.14}, "Ease", af`Marker[scene, "appear", "Duration"]] // Await;\n\n  af`Marker[scene, "move1"] // Await;\n  af`Animate[scene, d, {"c"->{0.5,0.5}}, "Ease", af`Marker[scene, "move1", "Duration"]] // Await;\n  \n  af`Marker[scene, "move2"] // Await;\n  af`Animate[scene, d, {"c"->{-0.5,0.5}, "r"->4.2}, "Ease", af`Marker[scene, "move2", "Duration"]] // Await;\n  \n  af`Marker[scene, "move3"] // Await;\n  af`Animate[scene, d, {"c"->{0.5,-0.5}}, "Ease", af`Marker[scene, "move3", "Duration"]] // Await;\n\n  af`Marker[scene, "remove"]//Await;\n  af`Animate[scene, d, {"c"->{0.,0.}, "o"->0., "r"->0}, "Ease", af`Marker[scene, "remove", "Duration"]] // Await;\n\n  af`Remove[d];\n]];\n'})}),"\n",(0,a.jsx)(n.p,{children:"And then place those markers on the timeline:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(27993).A+"",width:"1228",height:"344"})}),"\n",(0,a.jsx)(n.p,{children:"Here is serialized version of all markers from the screenshot above:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'<|"move1"-><|"uid"->"move1","time"->2.0757575757575757`,"duration"->0.8787878787878788`,"track"->48|>,"appear"-><|"uid"->"appear","time"->1,"duration"->1.07`,"track"->72|>,"move2"-><|"uid"->"move2","time"->2.9846153846153847`,"duration"->0.9242424242424242`,"track"->72|>,"move3"-><|"uid"->"move3","time"->4,"duration"->0.9242424242424242`,"track"->72|>,"remove"-><|"uid"->"remove","time"->5,"duration"->1,"track"->48|>|>\n'})}),"\n",(0,a.jsxs)(n.p,{children:["See how to restore / store markers position in the section ",(0,a.jsx)(n.a,{href:"#Export%20markers",children:"Export markers"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"Now if you hit a playback button it will play the animation according to your time markers:"}),"\n","\n",(0,a.jsx)("video",{width:"100%",controls:!0,children:(0,a.jsx)("source",{src:t})}),"\n",(0,a.jsx)(n.h3,{id:"export-markers",children:"Export markers"}),"\n",(0,a.jsxs)(n.p,{children:["Access the object ",(0,a.jsx)(n.code,{children:"t"})," created by ",(0,a.jsx)(n.code,{children:"TimelinedAnimation"})," animation expression"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'t["TimeMarkers"]\n'})}),"\n",(0,a.jsx)(n.h3,{id:"restore-markers",children:"Restore markers"}),"\n",(0,a.jsxs)(n.p,{children:["To import time markers to a new scene or ",(0,a.jsx)(n.code,{children:"TimelinedAnimation"})," provide ",(0,a.jsx)(n.code,{children:'"TimeMarkers"'})," options. For example:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"import to the scene"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'s = af`Scene["TimeMarkers" -> ...];\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"import to the scene in TimelinedAnimation"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'t = af`TimelinedAnimation[\n\tanimationFunction, "TimeMarkers" -> ...\n];\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"import to recorder object"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'r = af`RecordAnimation[\n\tanimationFunction, ImageSize->Large, FrameRate->120,\n\t"TimeMarkers" -> ...\n];\n'})}),"\n",(0,a.jsx)(n.h2,{id:"recording",children:"Recording"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Export your existing markers following ",(0,a.jsx)(n.a,{href:"#Export%20markers",children:"Export markers"})]}),"\n",(0,a.jsxs)(n.li,{children:["Following the guide ",(0,a.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Recording",children:"Recording"})," provide an options to ",(0,a.jsx)(n.code,{children:"RecordAnimation"})," expression (see ",(0,a.jsx)(n.a,{href:"#Import%20markers",children:"Import markers"}),") with exported timeline markers"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"voice-over",children:"Voice-over"}),"\n",(0,a.jsx)(n.p,{children:"You can record voice-overs directly to the timeline:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(13324).A+"",width:"1376",height:"856"})}),"\n",(0,a.jsx)(n.p,{children:"In general it does not matter on which track you place it. Voice clips do not interferer with regular time markers and has to be exported / imported separately."}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"This functionality serves a purpose of roughly aligning the timing of your animation with your audio narratives, which can be later polished in a professional video editing software."})}),"\n",(0,a.jsx)(n.h3,{id:"recording-1",children:"Recording"}),"\n",(0,a.jsxs)(n.p,{children:["Find a place on a timeline and hit ",(0,a.jsx)(n.code,{children:"Voice"})," button to start recording. Press stop to stop it."]}),"\n",(0,a.jsx)(n.h3,{id:"exporting",children:"Exporting"}),"\n",(0,a.jsx)(n.p,{children:"To export you can simply read a property of a timeline object:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'clips = t["AudioClips"]\n'})}),"\n",(0,a.jsx)(n.p,{children:"Then you can merge it into a single audio file for later production:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:"af`AudioFromClips[clips]\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This will contain an ",(0,a.jsx)(n.a,{href:"/frontend/Reference/Sound/Audio",children:"Audio"})," object, which can be exported to be used in other video-editing programs."]}),"\n",(0,a.jsx)(n.h3,{id:"restoring",children:"Restoring"}),"\n",(0,a.jsx)(n.p,{children:"To restore clips for a new session or a timeline object - provide clips as an options to the constructor:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mathematica",children:'t = af`TimelinedAnimation[\n\tanimationFunction, "TimeMarkers" -> ...,\n\t"AudioClips" -> clips\n];\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},9828:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/Screenshot 2025-06-08 at 10.48.22-c44bf28ebaac84834b8f30ebfefed98b.png"},13324:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/Screenshot 2025-06-09 at 10.15.21-70a2e5bfa51c43a08101220c72b1ef3c.png"},27993:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/Screenshot 2025-06-08 at 11.55.11-adc8e68aeb5e03ba07d56be86aeffbcd.png"},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var a=i(96540);const r={},t=a.createContext(r);function s(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(t.Provider,{value:n},e.children)}},81824:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/Screenshot 2025-06-08 at 11.06.50-95fd453407b2709e94958e06a585dc4e.png"},91530:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/TimelineAnimation-ezgif.com-optimize-93fa50a6915c445908a975307aefa17f.gif"}}]);