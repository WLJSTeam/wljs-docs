"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[79624],{12024:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ptsData-ezgif.com-optimize-27408436018771b08d054818d40dc511.gif"},18748:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/432423fgd-ezgif.com-optimize-30ad3302ea9a0ccbc0b8a428df7a2d13.gif"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(96540);const a={},s=i.createContext(a);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},41681:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/Screenshot 2025-05-08 at 19.54.13-63cdfe8e762a78f752a4241e5cb95e79.png"},70127:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var i=t(74848),a=t(28453);const s={},r=void 0,o={id:"frontend/Advanced/Dynamics/Arrays",title:"Arrays",description:"How to update",source:"@site/docs/frontend/Advanced/Dynamics/Arrays.md",sourceDirName:"frontend/Advanced/Dynamics",slug:"/frontend/Advanced/Dynamics/Arrays",permalink:"/frontend/Advanced/Dynamics/Arrays",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1746823552e3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Animation",permalink:"/frontend/Advanced/Dynamics/Animation"},next:{title:"Audio Stream",permalink:"/frontend/Advanced/Dynamics/Audio Stream/"}},c={},d=[{value:"How to update",id:"how-to-update",level:2},{value:"Per-element customization",id:"per-element-customization",level:2},{value:"Multidimensional arrays",id:"multidimensional-arrays",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"how-to-update",children:"How to update"}),"\n",(0,i.jsxs)(n.p,{children:["You might notice if you try to offload an array of points (aka ",(0,i.jsx)(n.code,{children:"List"}),")"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = RandomReal[{-1,1}, {100, 2}];\nGraphics[Point[pts // Offload], TransitionDuration->1000]\n"})}),"\n",(0,i.jsx)(n.p,{children:"and then try to perform operations per element"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"Do[pts[[i]] += 0.1 Normalize[{-1,1} pts[[i, {2,1}]]], {i, 100}];\n"})}),"\n",(0,i.jsx)(n.p,{children:"Nothing will happen"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(41681).A+"",width:"1234",height:"784"})}),"\n",(0,i.jsxs)(n.p,{children:["Per-element operations on ",(0,i.jsx)(n.code,{children:"List"})," ",(0,i.jsx)(n.strong,{children:"do not trigger a data synchronization"})," between Wolfram Kernel and frontend. ",(0,i.jsx)(n.strong,{children:"The only way to trigger it for lists is"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = pts;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This approach will definitely work, however, for such example it is easier and more efficient to do the same using a pure function and ",(0,i.jsx)(n.code,{children:"Map"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = Map[(# + 0.1 Normalize[{-1,1} #[[{2,1}]]])&, pts];\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(92998).A+"",width:"800",height:"581"})}),"\n",(0,i.jsx)(n.h2,{id:"per-element-customization",children:"Per-element customization"}),"\n",(0,i.jsxs)(n.p,{children:["In the example above we tried the ideal spherical case when one can substitute ",(0,i.jsx)(n.code,{children:"pts"})," into a single primitive ",(0,i.jsx)(n.code,{children:"Point"}),". In reality you might need to make then to have different properties, colors and etc. For this we need to address each element by the index explicitly and wrap everything into ",(0,i.jsx)(n.a,{href:"/frontend/Reference/Interpreter/Offload",children:"Offload"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For example ",(0,i.jsx)(n.strong,{children:"not like that"})," \u274c"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = RandomReal[{-1,1}, {100, 2}];\nGraphics[\n\tTable[{Point[pts[[i]]]}, {i, 100}] // Offload, \n\tTransitionDuration->1000\n]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["but ",(0,i.jsx)(n.strong,{children:"like this"})," \u2705"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = RandomReal[{-1,1}, {100, 2}];\nGraphics[\n\tTable[With[{i=i}, {Point[pts[[i]]] // Offload}], {i, 100}], \n\tTransitionDuration->1000\n]\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)("summary",{children:"Another option"}),"\nThis is also valid"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = RandomReal[{-1,1}, {100, 2}];\nGraphics[\n\tTable[With[{i=i}, {Point[pts[[i]] // Offload]}], {i, 100}], \n\tTransitionDuration->1000\n]\n"})})]}),"\n",(0,i.jsx)(n.p,{children:"We don't dynamically create points, we statically create them on Wolfram Kernel and offload the position of each point to be evaluated (dynamically) on the frontend."}),"\n",(0,i.jsx)(n.p,{children:"Let's stylize our points"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = RandomReal[{-1,1}, {400, 2}];\ncol[r_] := With[{n=Clip[Norm[r]/2]}, RGBColor[1-n, n, n]]\n\nGraphics[\n\tTable[With[{i=i}, {col[pts[[i]]], Point[pts[[i]]] // Offload}], {i, 400}], \n\tTransitionDuration->1000\n]\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"Do[\n  pts = Map[(# + 0.1 Normalize[{-1,1} #[[{2,1}]]])&, pts];\n  Pause[0.3];\n, {50}];\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(18748).A+"",width:"800",height:"596"})}),"\n",(0,i.jsxs)(n.p,{children:["With ",(0,i.jsx)(n.strong,{children:"zero-cost"})," we can generate more points using the same ",(0,i.jsx)(n.code,{children:"pts"})," using simple math operations (will be executed on the frontend dynamically)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"pts = RandomReal[{-1,1}, {400, 2}];\ncol[r_] := With[{n=Clip[Norm[r]/2]}, RGBColor[1-n, n, n]]\n\nGraphics[\n\tTable[With[{i=i}, {col[pts[[i]]], Point[1.1 pts[[i]]] // Offload, Point[pts[[i]]] // Offload}], {i, 400}], \n\tTransitionDuration->1000\n]\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(81227).A+"",width:"1156",height:"804"})}),"\n",(0,i.jsx)(n.h3,{id:"multidimensional-arrays",children:"Multidimensional arrays"}),"\n",(0,i.jsxs)(n.p,{children:["The idea is the same, however, you have to be careful with ",(0,i.jsx)(n.a,{href:"/frontend/Reference/Interpreter/Part",children:"Part"})," function. WLJS Interpreter does not fully support all crazy syntax of Wolfram Language."]}),"\n",(0,i.jsx)(n.p,{children:"Instead of \u274c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"multipts[[i, j]] // Offload\n"})}),"\n",(0,i.jsx)(n.p,{children:"do this \u2705"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"multipts[[i]][[j]] // Offload\n"})}),"\n",(0,i.jsxs)(n.p,{children:["On Wolfram Kernel it is considered to be less efficient, but our Javascript implementation does the second ",(0,i.jsx)(n.code,{children:"Part"})," using references only."]}),"\n",(0,i.jsx)(n.p,{children:"Here is an example with a multidimensional, where the first part stores color and the second one stores the position"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"mpts = {Clip[Norm[#]], #} &/@ RandomReal[{-1,1}, {400, 2}];\n\nGraphics[\n\tTable[With[{i=i}, {\n       Hue[mpts[[i]][[1]]], \n       Point[mpts[[i]][[2]]]\n    } // Offload], {i, 400}], \n\tTransitionDuration->30\n]\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mathematica",children:"Do[\n  mpts = Map[{\n    If[#[[1]]>0.95, 0, #[[1]] + 0.025],\n    #[[2]] + 0.01 Normalize[{-1,1} #[[2, {2,1}]]]\n  }&, mpts];\n  Pause[1/30.0];\n, {100}];\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(12024).A+"",width:"800",height:"596"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["For smoother animations consider to use ",(0,i.jsx)(n.a,{href:"/frontend/Reference/Graphics3D/AnimationFrameListener",children:"AnimationFrameListener"}),". See how in ",(0,i.jsx)(n.a,{href:"/frontend/Advanced/Dynamics/Animation",children:"Animation"})]})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},81227:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/Screenshot 2025-05-08 at 20.30.39-51a0453337aa1d8dc2205b31885263cf.png"},92998:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/pointsanimation-ezgif.com-optimize-e153cf65fc2ab78c22287ba0c45243bd.gif"}}]);