"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[47650],{4562:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=t(74848),s=t(28453);const r={sidebar_position:4},l=void 0,a={id:"frontend/Cell types/Javascript",title:"Javascript",description:"Type .js in the first line of an input cell",source:"@site/docs/frontend/Cell types/Javascript.md",sourceDirName:"frontend/Cell types",slug:"/frontend/Cell types/Javascript",permalink:"/frontend/Cell types/Javascript",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1743582564e3,sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"HTML",permalink:"/frontend/Cell types/HTML"},next:{title:"ESM",permalink:"/frontend/Cell types/ESM"}},o={},c=[{value:"Output Cell",id:"output-cell",level:2},{value:"Context",id:"context",level:2},{value:"<code>this.ondestroy</code>",id:"thisondestroy",level:3},{value:"<code>requestAnimationFrame</code>",id:"requestanimationframe",level:3},{value:"Communication with the Wolfram Kernel",id:"communication-with-the-wolfram-kernel",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Type ",(0,i.jsx)(n.code,{children:".js"})," in the first line of an input cell"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Try evaluating:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="cell"',children:".js\nreturn 1 + 1;\n"})}),"\n",(0,i.jsx)(n.p,{children:"or"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:".js\nconst dom = document.createElement('span');\ndom.innerText = \"Hello World\";\ndom.style.color = 'lightblue';\n\nreturn dom;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://github.com/JerryI/wljs-js-support",children:"GitHub repo"})}),(0,i.jsx)(n.br,{}),"\n","JavaScript code is evaluated as a module, which means ",(0,i.jsx)(n.strong,{children:"all defined variables are isolated to the cell"}),"."]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.p,{children:["To define global variables, use the ",(0,i.jsx)(n.code,{children:"window"})," or ",(0,i.jsx)(n.code,{children:"core"})," object:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"window.variable = 1;\n"})})]}),"\n",(0,i.jsx)(n.h2,{id:"output-cell",children:"Output Cell"}),"\n",(0,i.jsx)(n.p,{children:"The return value from the function can be a JavaScript object or a DOM element. DOM elements will be rendered in the output cell."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:".js\nconst canvas = document.createElement('canvas');\nconst ctx = canvas.getContext('2d');\n\ncanvas.width = 500;\ncanvas.height = 500;\n\nconst ballRadius = 10;\nlet x = canvas.width / 2;\nlet y = canvas.height - 30;\nlet dx = 2;\nlet dy = -2;\n\nfunction drawBall() {\n  ctx.beginPath();\n  ctx.arc(x, y, ballRadius, 0, Math.PI * 2);\n  ctx.fillStyle = \"#0095DD\";\n  ctx.fill();\n  ctx.closePath();\n}\n\nlet uid;\n\nfunction draw() {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  drawBall();\n\n  if (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {\n    dx = -dx;\n  }\n  if (y + dy > canvas.height - ballRadius || y + dy < ballRadius) {\n    dy = -dy;\n  }\n\n  x += dx;\n  y += dy;\n\n  uid = requestAnimationFrame(draw);\n}\n\nuid = requestAnimationFrame(draw);\n\nthis.ondestroy = () => {\n  cancelAnimationFrame(uid);\n};\n\nreturn canvas;\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(52874).A+"",width:"1090",height:"1020"})}),"\n",(0,i.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,i.jsx)(n.p,{children:"There are a few useful built-in objects accessible from within a cell."}),"\n",(0,i.jsx)(n.h3,{id:"thisondestroy",children:(0,i.jsx)(n.code,{children:"this.ondestroy"})}),"\n",(0,i.jsx)(n.p,{children:"This property is called when a cell is destroyed. Assign a clean-up function to it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"this.ondestroy = () => {\n  // Clean up resources\n};\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["Always clean up any timers or animation loops using the ",(0,i.jsx)(n.code,{children:"this.ondestroy"})," property. Otherwise, they will continue running even after the cell is reevaluated."]})}),"\n",(0,i.jsx)(n.h3,{id:"requestanimationframe",children:(0,i.jsx)(n.code,{children:"requestAnimationFrame"})}),"\n",(0,i.jsx)(n.p,{children:"This is a commonly used JavaScript method to sync with the browser\u2019s framerate and render graphics smoothly."}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["Don\u2019t forget to ",(0,i.jsx)(n.code,{children:"cancelAnimationFrame"})," using the ",(0,i.jsx)(n.code,{children:"this.ondestroy"})," method."]})}),"\n",(0,i.jsx)(n.h2,{id:"communication-with-the-wolfram-kernel",children:"Communication with the Wolfram Kernel"}),"\n",(0,i.jsx)(n.p,{children:"You can define any function for the WLJS interpreter using JavaScript cells. Please refer to these guides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/frontend/Reference/Frontend%20IO/FrontSubmit",children:"FrontSubmit"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/frontend/Advanced/Events%20system/event-generators#Integration%20with%20server%20/%20client%20via%20WebSockets",children:"Integration with server/client via WebSockets"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Also see:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/frontend/Advanced/Javascript/Communication",children:"Communication"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/frontend/Dynamics",children:"Dynamics"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var i=t(96540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},52874:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/Balls-ezgif.com-video-to-apng-converter-0b1b473089b374b3be96a2105a42e9b5.png"}}]);