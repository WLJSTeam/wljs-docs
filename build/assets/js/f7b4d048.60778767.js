"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[54148],{17397:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/Screenshot 2025-06-07 at 12.23.29-28d63066f4e5eb0c451710f4a0552cb6.png"},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var r=i(96540);const s={},a=r.createContext(s);function t(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(a.Provider,{value:n},e.children)}},41086:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var r=i(74848),s=i(28453);const a={sidebar_position:12},t=void 0,c={id:"frontend/Advanced/Animation Framework/Reference",title:"Reference",description:"Note, that you need to import this library to any context expect Global",source:"@site/docs/frontend/Advanced/Animation Framework/Reference.md",sourceDirName:"frontend/Advanced/Animation Framework",slug:"/frontend/Advanced/Animation Framework/Reference",permalink:"/frontend/Advanced/Animation Framework/Reference",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1749907629e3,sidebarPosition:12,frontMatter:{sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"Prototyping",permalink:"/frontend/Advanced/Animation Framework/Prototyping"},next:{title:"AI Assistant",permalink:"/frontend/Advanced/Command palette/AI Assistant"}},o={},d=[{value:"Scene",id:"scene",level:2},{value:"Options",id:"options",level:3},{value:"<code>ImageSize</code>",id:"imagesize",level:4},{value:"<code>&quot;TimeMarkers&quot;</code>",id:"timemarkers",level:4},{value:"Other options",id:"other-options",level:4},{value:"Animation Flow",id:"animation-flow",level:3},{value:"Supported methods",id:"supported-methods",level:3},{value:"AddTo",id:"addto",level:2},{value:"Supported methods",id:"supported-methods-1",level:3},{value:"Update",id:"update",level:2},{value:"Remove",id:"remove",level:2},{value:"Animate",id:"animate",level:2},{value:"Supported property types",id:"supported-property-types",level:3},{value:"Strings",id:"strings",level:4},{value:"Layer",id:"layer",level:2},{value:"Z-ordering",id:"z-ordering",level:3},{value:"Supported methods",id:"supported-methods-2",level:3},{value:"Loop",id:"loop",level:2},{value:"How to stop a loop",id:"how-to-stop-a-loop",level:3},{value:"Supported methods",id:"supported-methods-3",level:3},{value:"Worker",id:"worker",level:2},{value:"How to stop a worker",id:"how-to-stop-a-worker",level:3},{value:"Supported methods",id:"supported-methods-4",level:3},{value:"Finish",id:"finish",level:2},{value:"RecordAnimation",id:"recordanimation",level:2},{value:"Properties",id:"properties",level:4},{value:"TimelinedAnimation",id:"timelinedanimation",level:3},{value:"Properties",id:"properties-1",level:4},{value:"Utilities",id:"utilities",level:2},{value:"Color",id:"color",level:3},{value:"PauseAsync",id:"pauseasync",level:3},{value:"RecorderToVideo",id:"recordertovideo",level:3},{value:"Marker",id:"marker",level:3},{value:"AudioFromClips",id:"audiofromclips",level:3}];function l(e){const n={a:"a",admonition:"admonition",annotation:"annotation",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",math:"math",mn:"mn",mo:"mo",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Note, that you need to import this library to any context expect ",(0,r.jsx)(n.code,{children:"Global"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'Needs["AnimationFramework`"->"af`"] // Quiet;\n'})}),"\n",(0,r.jsx)(n.h2,{id:"scene",children:"Scene"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`Scene[opts___] _Scene\n"})}),"\n",(0,r.jsxs)(n.p,{children:["constructs the main object ",(0,r.jsx)(n.code,{children:"Scene"}),", where animation is going to be rendered. It also serves the purpose of a hosting object for primitives, animations, workers and etc."]}),"\n",(0,r.jsxs)(n.p,{children:["The local coordinates are limited to ",(0,r.jsxs)(n.span,{className:"katex",children:[(0,r.jsx)(n.span,{className:"katex-mathml",children:(0,r.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(n.semantics,{children:[(0,r.jsxs)(n.mrow,{children:[(0,r.jsx)(n.mo,{children:"\xb1"}),(0,r.jsx)(n.mn,{children:"1"})]}),(0,r.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\pm 1"})]})})}),(0,r.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,r.jsxs)(n.span,{className:"base",children:[(0,r.jsx)(n.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,r.jsx)(n.span,{className:"mord",children:"\xb1"}),(0,r.jsx)(n.span,{className:"mord",children:"1"})]})})]})," for the square aspect ratio, otherwise the smallest side takes is scaled to 1:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(95384).A+"",width:"3415",height:"1288"})}),"\n",(0,r.jsx)(n.p,{children:"Scenes can be reused multiple times in different animations."}),"\n",(0,r.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,r.jsx)(n.h4,{id:"imagesize",children:(0,r.jsx)(n.code,{children:"ImageSize"})}),"\n",(0,r.jsxs)(n.p,{children:["By the default is ",(0,r.jsx)(n.code,{children:"Medium"}),". Not that unlike in ",(0,r.jsx)(n.code,{children:"Graphics"})," here the size is pixel perfect."]}),"\n",(0,r.jsx)(n.h4,{id:"timemarkers",children:(0,r.jsx)(n.code,{children:'"TimeMarkers"'})}),"\n",(0,r.jsxs)(n.p,{children:["Sets the time markers from the ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Timeline",children:"Timeline"})]}),"\n",(0,r.jsx)(n.h4,{id:"other-options",children:"Other options"}),"\n",(0,r.jsxs)(n.p,{children:["The rest is inherited from ",(0,r.jsx)(n.a,{href:"/frontend/Reference/Graphics/",children:"Graphics"}),". ",(0,r.jsx)(n.code,{children:"PlotRange"}),", ",(0,r.jsx)(n.code,{children:"ImageSizeRaw"}),", cannot be changed."]}),"\n",(0,r.jsx)(n.h3,{id:"animation-flow",children:"Animation Flow"}),"\n",(0,r.jsx)(n.p,{children:"All animations on the scene should follows the pattern:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"append objects"}),"\n",(0,r.jsx)(n.li,{children:"animate"}),"\n",(0,r.jsx)(n.li,{children:"remove objects"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["By design most of methods and functions of AF framework return ",(0,r.jsx)(n.a,{href:"/frontend/Reference/Misc/Promise",children:"Promise"})," expression. In this regard, it makes sense to describe your animation flow using ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Events%20system/Asynchronous%20Functions",children:"Asynchronous Functions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"AsyncFunction[scene, Module[{},\n\t...\n]][scene];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"supported-methods",children:"Supported methods"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#AddTo",children:"AddTo"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Remove",children:"Remove"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"addto",children:"AddTo"}),"\n",(0,r.jsx)(n.p,{children:"The most important method for the animation scene or to a layer:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="immutable object"',children:"af`AddTo[_Scene | layer_, primitives_] _af`Private`entity\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="object with mutable properties"',children:"af`AddTo[_Scene | layer_, primitives_, {\n\tprop1_String -> value1_,\n\t...\n}] _af`Private`entity\n"})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"primitives"})," can be any 2D graphics object, or an expression, that produces graphics objects or your custom written ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Frontend%20interpretation/WLJS%20Functions",children:"WLJS Function"})," that support ",(0,r.jsx)(n.code,{children:".update"})," method."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"AddTo"})," function works for both: ",(0,r.jsx)(n.a,{href:"#Scene",children:"Scene"})," and ",(0,r.jsx)(n.a,{href:"#Layer",children:"Layer"})," objects"]})}),"\n",(0,r.jsxs)(n.p,{children:["Mutable properties are embed using ",(0,r.jsx)(n.code,{children:"Slot"})," expression aka"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"Primitive[#prop1, #prop2] ...\n"})}),"\n",(0,r.jsx)(n.p,{children:"Basic example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"disk = af`AddTo[scene, {Red, Disk[{0,0}, 1]}];\n"})}),"\n",(0,r.jsxs)(n.p,{children:["However, ",(0,r.jsx)(n.em,{children:"it does not have any mutable properties"}),". Here is another example"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'disk = af`AddTo[scene, {Red, Disk[#pos, #r]}, {\n\t"pos" -> {0.,0.},\n\t"r" -> 0.5\n}];\n'})}),"\n",(0,r.jsx)(n.p,{children:"On the created entity the following methods are supported"}),"\n",(0,r.jsx)(n.h3,{id:"supported-methods-1",children:"Supported methods"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Update",children:"Update"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Animate",children:"Animate"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Remove",children:"Remove"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"update",children:"Update"}),"\n",(0,r.jsx)(n.p,{children:"Assigns a new value to a given property or list of properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="assign 1 value"',children:"af`Update[scene_Scene, entity_, prop_String -> newValue_ ..]\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="assign set of values"',children:"af`Update[scene_Scene, entity_, {\n\tprop1_String -> val1_,\n\t...\n}]\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`Update[entity_, {__Rule}]\n"})}),"\n",(0,r.jsx)(n.p,{children:"The action will be applied immediately without easing. For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'disk = af`AddTo[scene, {Red, Disk[#pos, #r]}, {\n\t"pos" -> {0.,0.},\n\t"r" -> 0.5\n}];\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Update[scene, disk, "pos"->RandomReal[{-1,1}, 2]];\n'})}),"\n",(0,r.jsx)(n.h2,{id:"remove",children:"Remove"}),"\n",(0,r.jsx)(n.p,{children:"Removes a single object or object from the scene or in a layer (including all children)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="remove a single object"',children:"af`Remove[_af`Private`entity | _af`Private`runner | _af`Private`worker]\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="remove a layer with children"',children:"af`Remove[layer_af`Private`entity]\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="remove all obejcts in the scene"',children:"af`Remove[_Scene]\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Remove"})," acting on ",(0,r.jsx)(n.code,{children:"Scene"})," does not remove the scene itself, but it disposes all objects added to it including the nested ones (layers). Use it as a fast way to clean up the scene."]})}),"\n",(0,r.jsx)(n.h2,{id:"animate",children:"Animate"}),"\n",(0,r.jsx)(n.p,{children:"It animates the transition of a property or set of properties with a given easing function on the scene"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Animate[scene_Scene, entity_, prop_String -> value_, easing_:"CubicInOut", duration_:1] _Promise\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Animate[scene_Scene, entity_, {\n\tprop1_String -> value1_,\n\tprop2_String -> value2_, ...\n}, easing_:"CubicInOut", duration_:1] _Promise\n'})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"easing"})," is function used for animating the transition:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"Linear"'})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"CubicInOut"'})," or ",(0,r.jsx)(n.code,{children:'"Ease"'})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"QuadIn"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"QuadOut"'})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"LinearEuclidean"'}),"  (usually used for colors)"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Function[{t, initial, current, target}, ...]"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["and ",(0,r.jsx)(n.code,{children:"duration"})," is given in ",(0,r.jsx)(n.strong,{children:"seconds"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["In addition ",(0,r.jsx)(n.code,{children:"Animate"})," can be applied to any held ",(0,r.jsx)(n.code,{children:"_Symbol"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Animate[scene_Scene, Hold[symbol_], newValue_, easing_:"CubicInOut", duration_:1] _Promise\n'})}),"\n",(0,r.jsxs)(n.p,{children:["or a ",(0,r.jsx)(n.a,{href:"#Layer",children:"Layer"})," entity"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Animate[scene_Scene, layer_, prop_String->newValue_, easing_:"CubicInOut", duration_:1] _Promise\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Animate"})," always returns ",(0,r.jsx)(n.a,{href:"/frontend/Reference/Misc/Promise",children:"Promise"}),", which is resolved when the animation is finished, i.e.:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"wait for the animation to be finished"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Animate[scene, object, "prop"->1.0] // Await;\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"wait for multiple animations to be finished"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'{\n\taf`Animate[scene, object1, "prop"->1.0],\n\taf`Animate[scene, object2, "prop"->1.0],\n}// Await;\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:["For animating multiple properties of ",(0,r.jsx)(n.strong,{children:"the same object"})," - use"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Animate[scene, object1, {"prop1"->1.0, "prop2"->3.0}]\n'})})]}),"\n",(0,r.jsx)(n.p,{children:"Animation is done fully using Wolfram Kernel (no Javascript easing is involved) at the maximum available frame rate (dynamic)."}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"scene = af`Scene[];\nscene\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d},\n  d = af`AddTo[scene, {\n    Opacity[#o], \n    Translate[\n      Rotate[\n        Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n      , #r]\n    , #c]\n  }, {\n    "o" -> 0.,\n    "r" -> 0.,\n    "c" -> {0,0}\n  }];\n\n  af`Animate[scene, d, {"o" -> 1.0,"r" -> 3.14}, "Ease", 1.0] // Await;\n\n  PauseAsync[1] // Await;\n  \n  af`Animate[scene, d, {"o"->0., "r"->0}, "Ease", 1.0] // Await;\n\n  af`Remove[d];\n]][scene];\n'})}),"\n",(0,r.jsx)(n.h3,{id:"supported-property-types",children:"Supported property types"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Real"}),", ",(0,r.jsx)(n.code,{children:"Integer"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"List"})," of integers, reals"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"List"})," of ",(0,r.jsx)(n.code,{children:"List"})," and etc"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"String"})," with numbers inside"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"In principle anything, which can be combined with multiplication and sum can work as a property value."}),"\n",(0,r.jsx)(n.h4,{id:"strings",children:"Strings"}),"\n",(0,r.jsx)(n.p,{children:"String interpolation is done in steps:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"exploding string into string and number-like string"}),"\n",(0,r.jsx)(n.li,{children:"convert number-like strings into array"}),"\n",(0,r.jsx)(n.li,{children:"interpolate a array (using easing function) between the original and target value (transformed from a string)"}),"\n",(0,r.jsx)(n.li,{children:"compose back into a string"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For example, one can easily animate the following SVG attribute"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"scene = af`Scene[];\nscene\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{layer},\n  \n  layer = af`Layer[scene, {\n\tSVGAttribute[#children, "style"->#style]\n  }, {"style" -> "filter: blur(0px)"}];\n\n  af`AddTo[layer, Table[{RandomColor[], Disk[RandomReal[{-1,1},2], 1.0]}, {10}]];\n  af`Animate[scene, layer, "style"->"filter: blur(100px)", "Ease", 5]//Await;\n\n  af`Remove[layer];\n\n]][scene];\n'})}),"\n",(0,r.jsx)(n.h2,{id:"layer",children:"Layer"}),"\n",(0,r.jsx)(n.p,{children:"It creates an isolated group of objects (layer):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="no mutable props"',children:"af`Layer[scene_Scene | layer_, body_] _af`Private`entity\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",metastring:'title="mutable props"',children:"af`Layer[scene_Scene | layer_, body_, {\n\tprop1_String -> value1_,\n\t...\n}] _af`Private`entity\n"})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"body"})," is defined similar to one in ",(0,r.jsx)(n.a,{href:"#AddTo",children:"AddTo"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"{\n\tOpacity[0.5],\n\t#children\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"{\n\tOpacity[#opacity],\n\tTranslate[#children, #coordinates]\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"#children"})," is ",(0,r.jsx)(n.strong,{children:"a special reserved slot"})," to specify where to append children. ",(0,r.jsxs)(n.strong,{children:["You can append objects similar to ",(0,r.jsx)(n.code,{children:"Scene"})," using ",(0,r.jsx)(n.a,{href:"#AddTo",children:"AddTo"})," expression"]}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'layer = af`Layer[scene, {\n\tOpacity[#opacity],\n\tTranslate[#children, #coordinates]\n}, {"opacity" -> 0.5, "coordinates"->{0,0}}];\n\naf`AddTo[layer, Table[{RandomColor[], Disk[RandomReal[{-0.2,0.2},2], 0.05]}, {10}]];\n'})}),"\n",(0,r.jsx)(n.h3,{id:"z-ordering",children:"Z-ordering"}),"\n",(0,r.jsxs)(n.p,{children:["To preserve z-order of your primitives, one can use ",(0,r.jsx)(n.code,{children:"Layer"})," together with ",(0,r.jsx)(n.a,{href:"/frontend/Reference/Graphics/SVGGroup",children:"SVGGroup"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"supported-methods-2",children:"Supported methods"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#AddTo",children:"AddTo"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Update",children:"Update"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Animate",children:"Animate"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Remove",children:"Remove"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"loop",children:"Loop"}),"\n",(0,r.jsx)(n.p,{children:"It create custom animation loop, which is repeated until manually removed"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`Loop[scene_Scene, entity_, property_String, function_, duration_:1] _af`Private`runner\n"})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"function"})," should have the following form:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"Function[{t, prevValue, cycleNumber},\n\t\n]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Here ",(0,r.jsx)(n.code,{children:"t"})," goes from ",(0,r.jsx)(n.code,{children:"0"})," to ",(0,r.jsx)(n.code,{children:"1"})," in ",(0,r.jsx)(n.code,{children:"duration"})," seconds, and ",(0,r.jsx)(n.code,{children:"cycleNumber"})," represents the number of rounds passed."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"function"})," is fired every frame"]})}),"\n",(0,r.jsx)(n.h3,{id:"how-to-stop-a-loop",children:"How to stop a loop"}),"\n",(0,r.jsxs)(n.p,{children:["Before removing a loop animation call ",(0,r.jsx)(n.code,{children:"Await"})," ",(0,r.jsx)(n.a,{href:"#Finish",children:"Finish"})," on the loop object to wait until the cycle is fully finished. ",(0,r.jsx)(n.code,{children:"Finish"})," returns promise, which is resolved on the end of the current cycle. This will help to avoid abrupt stop of the loop. For example"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'scene = af`Scene[];\nscene\n\nstop = InputButton["Stop"]\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, loop},\n  d = af`AddTo[scene, {\n    Rotate[\n      Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n    , #r]\n  }, {\n    "r" -> 0.\n  }];\n\n  loop = af`Loop[scene, d, "r", Function[{t, o, n},\n    3.14 t + (n-1) 3.14\n  ], 2];\n\n  stop // Await;\n\n  af`Finish[loop] // Await;\n  \n  af`Remove[loop];\n\n  PauseAsync[0.5] // Await;\n\n  af`Remove[d];\n]][scene]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"supported-methods-3",children:"Supported methods"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Remove",children:"Remove"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Finish",children:"Finish"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"worker",children:"Worker"}),"\n",(0,r.jsxs)(n.p,{children:["Workers are similar to ",(0,r.jsx)(n.a,{href:"#Loop",children:"Loop"}),"s, but allow to execute an arbitrary code concurrently with the main animation on each frame:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`Worker[scene_Scene, function_] _af`Private`worker\n"})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"function"})," has the following form"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"Function[absoluteTime, ...]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can place an entire new animation sequence to a worker as ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Events%20system/Asynchronous%20Functions",children:"Asynchronous Functions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"AsyncFunction[absoluteTime, ...]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"function"})," is called every frame, but only after the execution of the previous ",(0,r.jsx)(n.code,{children:"function"})," call is finished. ",(0,r.jsx)(n.code,{children:"absoluteTime"})," is a time in seconds passed after the worker has been created."]}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'scene = af`Scene[];\nscene\nstop = InputButton["Stop"]\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'AsyncFunction[scene, Module[{d, worker},\n  d = af`AddTo[scene, {\n    Rotate[\n      Rectangle[{-0.5,-0.1}, {0.5,0.1}]\n    , #r]\n  }, {\n    "r" -> 0.\n  }];\n\n  worker = af`Worker[scene, AsyncFunction[Null,\n    af`Animate[scene, d, "r"->Pi/2] // Await;\n    af`Animate[scene, d, "r"->-Pi/2] // Await;\n  ]];\n\n  stop // Await;\n\n  af`Finish[worker] // Await;\n  af`Remove[worker];\n\n  PauseAsync[0.5] // Await;\n\n  af`Remove[d];\n]][scene]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"how-to-stop-a-worker",children:"How to stop a worker"}),"\n",(0,r.jsxs)(n.p,{children:["Before removing a worker call ",(0,r.jsx)(n.code,{children:"Await"})," ",(0,r.jsx)(n.a,{href:"#Finish",children:"Finish"})," on the worker object to wait until the execution is fully finished (as on the example above). ",(0,r.jsx)(n.code,{children:"Finish"})," returns promise, which is resolved on the end of the current cycle. This will help to avoid abrupt stop."]}),"\n",(0,r.jsx)(n.h3,{id:"supported-methods-4",children:"Supported methods"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Remove",children:"Remove"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#Finish",children:"Finish"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"finish",children:"Finish"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`Finish[worker_ | loop_ | _Promise] _Promise\n"})}),"\n",(0,r.jsx)(n.p,{children:"It is a special promise generator used for waiting for various events:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#Loop",children:"Loop"})," has finished the cycle of animation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#Worker",children:"Worker"})," has finished the function execution"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Any ",(0,r.jsx)(n.code,{children:"Promise"})," object will be returned without changes. ",(0,r.jsxs)(n.strong,{children:["It only makes sense to use it with ",(0,r.jsx)(n.code,{children:"Await"})," expression"]}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`Finish[worker1] // Await\n"})}),"\n",(0,r.jsx)(n.p,{children:"or multiple events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"{\n\taf`Finish[worker1],\n\taf`Finish[worker2]\n} // Await\n"})}),"\n",(0,r.jsx)(n.h2,{id:"recordanimation",children:"RecordAnimation"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Read more at ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Recording",children:"Recording"})," page"]})}),"\n",(0,r.jsx)(n.p,{children:"To render the animation into the sequence of images:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`RecordAnimation[animationFunction_, opts___] _af`Private`recorder\n"})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"animationFunction"})," is your async animation function, that accepts ",(0,r.jsx)(n.code,{children:"Scene"})," object and ",(0,r.jsx)(n.code,{children:"opts"})," are the same as for ",(0,r.jsx)(n.a,{href:"#Scene",children:"Scene"})," including extra:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FrameRate"})," - frames per second (",(0,r.jsx)(n.code,{children:"60"})," by the default)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GeneratedAssetLocation"})," - by the default is ",(0,r.jsx)(n.code,{children:"$TemporalDirectory"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GeneratedAssetFormat"})," - format for rendered sequence: ",(0,r.jsx)(n.code,{children:'"PNG"'}),", ",(0,r.jsx)(n.code,{children:'"JPEG"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CompressionLevel"})," - by the default is ",(0,r.jsx)(n.code,{children:"0.2"})," (applicable only for JPEG)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"TimeMarkers"'})," - sets the time markers from the ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Timeline",children:"Timeline"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"recorder"})," object provides the following fields:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"GeneratedAssetLocation"'})," - path to sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"Recording"'})," - status"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"timelinedanimation",children:"TimelinedAnimation"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Read more at ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Timeline",children:"Timeline"})," page"]})}),"\n",(0,r.jsx)(n.p,{children:"To play an animation with a graphical timeline attached:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`RecordAnimation[animationFunction_, opts___] _af`Private`timelined\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(17397).A+"",width:"1228",height:"930"})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"animationFunction"})," is your async animation function, that accepts ",(0,r.jsx)(n.code,{children:"Scene"})," object and ",(0,r.jsx)(n.code,{children:"opts"})," are the same as for ",(0,r.jsx)(n.a,{href:"#Scene",children:"Scene"})," including extra:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"TimeMarkers"'})," - sets the time markers from the ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Timeline",children:"Timeline"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"AudioClips"'})," - restores recorded voice overs"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Note, ",(0,r.jsx)(n.code,{children:"RecordAnimation"})," has ",(0,r.jsx)(n.code,{children:"HoldFirst"})," attribute."]}),"\n",(0,r.jsx)(n.h4,{id:"properties-1",children:"Properties"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"timelined"})," object provides the following fields:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"TimeMarkers"'})," - current time markers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"AudioClips"'})," - gets audio clips from the timeline"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"AudioClipsAsync"'})," - gets audio clips from the timeline"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"utilities",children:"Utilities"}),"\n",(0,r.jsx)(n.h3,{id:"color",children:"Color"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`Color[_Hue | _RGBColor | _LABColor] _List\n"})}),"\n",(0,r.jsxs)(n.p,{children:["a color conversion tool, which turns any color representation to a list of RGB values. This comes handy with ",(0,r.jsx)(n.a,{href:"/frontend/Reference/Graphics/RGBColor",children:"RGBColor"}),", since to update it you need to provide a list instead of an actual color:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"{RGBColor[#color], ...}\n"})}),"\n",(0,r.jsx)(n.p,{children:"then when you update"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Animate[... "color"->af`Color[Red], ...]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pauseasync",children:"PauseAsync"}),"\n",(0,r.jsxs)(n.p,{children:["A modified version of system default ",(0,r.jsx)(n.code,{children:"PauseAsync"})," with extra argument"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"PauseAsync[scene_Scene, n_Integer | n_Real] _Promise\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Here the time delay will be in sync with ",(0,r.jsx)(n.a,{href:"#Scene",children:"Scene"}),". It makes sense during the ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Recording",children:"Recording"})," process, where the actual time is fixed with a frame rate."]}),"\n",(0,r.jsx)(n.h3,{id:"recordertovideo",children:"RecorderToVideo"}),"\n",(0,r.jsxs)(n.p,{children:["It converts ",(0,r.jsx)(n.code,{children:"recorder"})," object to ",(0,r.jsx)(n.a,{href:"/frontend/Reference/Video/",children:"Video"}),"  ",(0,r.jsx)(n.strong,{children:"after the rendering is finished"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`RecorderToVideo[_af`Private`recorder] _Video\n"})}),"\n",(0,r.jsx)(n.h3,{id:"marker",children:"Marker"}),"\n",(0,r.jsxs)(n.p,{children:["A helper to wait or extract property from ",(0,r.jsx)(n.a,{href:"/frontend/Advanced/Animation%20Framework/Timeline",children:"Timeline"})," markers"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"wait for the marker"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Marker[scene_Scene, name_String] _Promise\naf`Marker[scene_Scene, name_String, "Start"] _Promise\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"wait for the end of the marker"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Marker[scene_Scene, name_String, "End"] _Promise\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"take duration in seconds"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`Marker[scene_Scene, name_String, "Duration"] _Real\n'})}),"\n",(0,r.jsx)(n.h3,{id:"audiofromclips",children:"AudioFromClips"}),"\n",(0,r.jsxs)(n.p,{children:["A helper function to convert a list of audio clips (voice overs) retrieved from the properties of ",(0,r.jsx)(n.code,{children:"timelined"})," object to a single audio object:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:"af`AudioFromClips[clips_List]\n"})}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mathematica",children:'af`AudioFromClips[t["AudioClips"]]\n'})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"t"})," is your ",(0,r.jsx)(n.a,{href:"#TimelinedAnimation",children:"TimelinedAnimation"})," object"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},95384:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/Untitled-2024-04-16-1534-0fe85a6184d24a75d6d66e6eb0c81b2d.png"}}]);