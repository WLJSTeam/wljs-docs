(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[94136],{36176:(e,t,o)=>{"use strict";o.r(t),o.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var r=o(17624),n=o(4552),a=o(46880);const s={},c="Dynamic parameteric plot 3D",l={type:"mdx",permalink:"/wljs-docs/wljs-demo/plot-3d-d/",source:"@site/src/pages/wljs-demo/plot-3d-d/index.mdx",title:"Dynamic parameteric plot 3D",description:"A low-level example of working with indexed geometry",frontMatter:{},unlisted:!1},i={},d=[];function u(e){const t={code:"code",em:"em",h1:"h1",p:"p",...(0,n.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"dynamic-parameteric-plot-3d",children:"Dynamic parameteric plot 3D"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"A low-level example of working with indexed geometry"})}),"\n",(0,r.jsxs)(t.p,{children:["Here we will make an adapter for ",(0,r.jsx)(t.code,{children:"ParametericPlot3D"})," to work dynamically morph one shape into another one. Since it naturally does not support dynamic updates, we need to manually wire dynamic symbols to each primitive supplying vertices, normals and indexes."]}),"\n","\n",(0,r.jsx)(a.Af,{kernel:o(15200).c,json:o(52540).c,notebook:o(71792).c}),"\n",(0,r.jsx)(t.p,{children:"Our shapes"}),"\n",(0,r.jsx)(a.EB,{display:"codemirror",nid:"d7e2e84c-f1ce-451a-b132-574f647ac3b7",id:"3ff47dd1-3956-4857-8e41-e5a26f877a67",type:"Input",opts:{},children:"sample%5Bt_%5D%20%3A%3D%20With%5B%7B%0A%20%20%20complex%20%3D%20ParametricPlot3D%5B%0A%20%20%20%20%20%281%20-%20t%29%20%2A%20%7B%0A%20%20%20%20%20%20%20%282%20%2B%20Cos%5Bv%5D%29%20%2A%20Cos%5Bu%5D%2C%0A%20%20%20%20%20%20%20%282%20%2B%20Cos%5Bv%5D%29%20%2A%20Sin%5Bu%5D%2C%0A%20%20%20%20%20%20%20Sin%5Bv%5D%0A%20%20%20%20%20%7D%20%2B%20t%20%2A%20%7B%0A%20%20%20%20%20%20%201.16%5Ev%20%2A%20Cos%5Bv%5D%20%2A%20%281%20%2B%20Cos%5Bu%5D%29%2C%0A%20%20%20%20%20%20%20-1.16%5Ev%20%2A%20Sin%5Bv%5D%20%2A%20%281%20%2B%20Cos%5Bu%5D%29%2C%0A%20%20%20%20%20%20%20-2%20%2A%201.16%5Ev%20%2A%20%281%20%2B%20Sin%5Bu%5D%29%20%2B%201.0%0A%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%7Bu%2C%20-%5C%5BPi%5D%2C%20%5C%5BPi%5D%7D%2C%0A%20%20%20%20%20%7Bv%2C%20-%5C%5BPi%5D%2C%20%5C%5BPi%5D%7D%2C%0A%20%20%20%20%20MaxRecursion%20-%3E%202%2C%0A%20%20%20%20%20Mesh%20-%3E%20None%0A%20%20%20%5D%5B%5B1%2C%201%5D%5D%0A%20%20%20%7D%2C%0A%20%20%7B%0A%20%20%20complex%5B%5B1%5D%5D%2C%0A%20%20%20Cases%5Bcomplex%5B%5B2%5D%5D%2C%20_Polygon%2C%206%5D%20%2F%2F%20First%20%2F%2F%20First%2C%0A%20%20%20complex%5B%5B3%2C%202%5D%5D%0A%20%20%7D%0A%5D"}),"\n",(0,r.jsxs)(t.p,{children:["Then we can use the output of this function to feed data into our ",(0,r.jsx)(t.code,{children:"GraphicsComplex"})]}),"\n",(0,r.jsx)(a.EB,{display:"codemirror",nid:"d7e2e84c-f1ce-451a-b132-574f647ac3b7",id:"18edb12c-3d0a-47c2-9902-8f4614b96d33",type:"Input",opts:{Fade:!0},children:"LeakyModule%5B%7B%0A%20%20%20%20vertices%2C%20normals%2C%20indices%0A%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20EventHandler%5BInputRange%5B0%2C1%2C0.1%2C0%5D%2C%20Function%5Bvalue%2C%0A%20%20%20%20%20%20%20%20With%5B%7Bres%20%20%3D%20sample%5Bvalue%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20normals%20%3D%20res%5B%5B3%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20indices%20%3D%20res%5B%5B2%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20vertices%20%3D%20res%5B%5B1%5D%5D%3B%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%5D%5D%2C%0A%0A%20%20%20%20%20%20%7Bvertices%2C%20indices%2C%20normals%7D%20%3D%20sample%5B0%5D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20Graphics3D%5B%7B%0A%20%20%20%20%20%20%20%20MeshMaterial%5BMeshToonMaterial%5B%5D%5D%2C%20Gray%2C%20%0A%20%20%20%20%20%20%20%20SpotLight%5BRed%2C%205%20%7B1%2C1%2C1%7D%5D%2C%20SpotLight%5BBlue%2C%205%20%7B-1%2C-1%2C1%7D%5D%2C%20%0A%20%20%20%20%20%20%20%20SpotLight%5BGreen%2C%205%20%7B1%2C-1%2C1%7D%5D%2C%20PointLight%5BMagenta%2C%20%7B10%2C10%2C10%7D%5D%2C%0A%20%20%20%20%20%20%20%20GraphicsComplex%5Bvertices%20%2F%2F%20Offload%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20Polygon%5Bindices%20%2F%2F%20Offload%5D%0A%20%20%20%20%20%20%20%20%7D%2C%20VertexNormals-%3EOffload%5Bnormals%2C%20%22Static%22-%3ETrue%5D%5D%0A%20%20%20%20%20%20%7D%2C%20Lighting-%3ENone%5D%0A%20%20%20%20%7D%20%2F%2F%20Column%20%2F%2F%20Panel%20%0A%5D"}),"\n",(0,r.jsx)(a.EB,{display:"codemirror",nid:"d7e2e84c-f1ce-451a-b132-574f647ac3b7",id:"d3e6d05c-1139-4aa2-ac39-b2d287407629",type:"Output",opts:{},children:"%28%2ABB%5B%2A%29%28Panel%5B%28%2AGB%5B%2A%29%7B%7B%28%2AVB%5B%2A%29%28EventObject%5B%3C%7C%22Id%22%20-%3E%20%226cefd35b-96e1-4165-b469-9a58a39163e1%22%2C%20%22Initial%22%20-%3E%200%2C%20%22View%22%20-%3E%20%221059ab52-7641-4ab0-8fc4-ce353d630947%22%7C%3E%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKGxqYWiYmmRrpmpuZGOqaJCYZ6FqkJZvoJqcamxqnmBkbWJqYAwB5LxUO%22%2A%29%28%2A%5DVB%2A%29%7D%28%2A%7C%7C%2A%29%2C%28%2A%7C%7C%2A%29%7B%28%2AVB%5B%2A%29%28Graphics3D%5B%7BMeshMaterial%5BMeshToonMaterial%5B%5D%5D%2C%20GrayLevel%5B0.5%5D%2C%20SpotLight%5BRGBColor%5B1%2C%200%2C%200%5D%2C%20%7B5%2C%205%2C%205%7D%5D%2C%20SpotLight%5BRGBColor%5B0%2C%200%2C%201%5D%2C%20%7B-5%2C%20-5%2C%205%7D%5D%2C%20SpotLight%5BRGBColor%5B0%2C%201%2C%200%5D%2C%20%7B5%2C%20-5%2C%205%7D%5D%2C%20PointLight%5BRGBColor%5B1%2C%200%2C%201%5D%2C%20%7B10%2C%2010%2C%2010%7D%5D%2C%20GraphicsComplex%5BOffload%5Bvertices%24110624%5D%2C%20%7BPolygon%5BOffload%5Bindices%24110624%5D%5D%7D%2C%20VertexNormals%20-%3E%20Offload%5Bnormals%24110624%2C%20%22Static%22%20-%3E%20True%5D%5D%7D%2C%20Lighting%20-%3E%20None%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJyVkdtOwkAQhhc8gMbTK5j4AKLGWxMxwYuCphDvVzrbbrLsNLsLgbf1Pbwoe7AtqYQAF3%2FoP9Nv%2Fs7cfmPMWoQQfWzlHUXC2u7p3MpA0TzjU%2F34xjplR8S1Cf0XVoagsyE1oDgVjDj35s%2BdIMqq4vvPAnEVwQKEIv738xKmudo4RxPxNDPsyFldK%2FHgtY8CFXcATkoJDWUafuL8SvYDViyPbgB%2Fi6IIciCwtSthA%2BgW%2FIlc7vHNWyK6t2sJxeuNk%2FVxlgtYhs27430wJpAmvmkByvAp6Lte7%2F754ak%2Bf33cjk8nVinK%2F4wrN1cmm4h2iYjnAvSl%2FfNlh8ByhGpGhQ71JkOG4lbG%2BNQt3FAb1HsTNYfGlK5PbJfHZerdEUpYAycxnYg%3D%22%2A%29%28%2A%5DVB%2A%29%7D%7D%28%2A%5DGB%2A%29%5D%29%28%2A%2C%2A%29%28%2A%221%3AeJxTTMoPSmNkYGAoZgESHvk5KWlMIB4%2FkAgoyi%2FLTElN8S8oyczPK05jAElwgCQS81JznPIrIEpBGoNKc1KDwSakJqYEs8LUAADiShU%2F%22%2A%29%28%2A%5DBB%2A%29"})]})}function p(e={}){const{wrapper:t}={...(0,n.M)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},46880:(e,t,o)=>{"use strict";o.d(t,{EB:()=>u,gL:()=>d,Af:()=>i});var r,n=o(11504);o(93391),o(28264);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},a.apply(this,arguments)}const s=e=>{let{title:t,titleId:o,...s}=e;return n.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"w-5 h-5 ml-auto",viewBox:"0 0 24 24","aria-labelledby":o},s),t?n.createElement("title",{id:o},t):null,r||(r=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 17h.01m.39-3h.6c.932 0 1.398 0 1.765.152a2 2 0 0 1 1.083 1.083C21 15.602 21 16.068 21 17s0 1.398-.152 1.765a2 2 0 0 1-1.083 1.083C19.398 20 18.932 20 18 20H6c-.932 0-1.398 0-1.765-.152a2 2 0 0 1-1.083-1.083C3 18.398 3 17.932 3 17s0-1.398.152-1.765a2 2 0 0 1 1.083-1.083C4.602 14 5.068 14 6 14h.6m5.4 1V4m0 11-3-3m3 3 3-3"})))};var c=o(66528),l=(o(98684),o(52964),o(93664),o(17624));function i(e){let{json:t,notebook:o,kernel:r}=e;const{colorMode:a,setColorMode:i}=(0,c.U)();return(0,n.useEffect)((()=>{console.warn("Create store"),console.warn(t);const e={},o={},n=[],a=new Deferred;let s=async()=>{s=async()=>{},fetch(t).then((t=>{console.warn("Store loaded!"),t.json().then((t=>{interpretate(t.objects,{hold:!0}).then((t=>{console.warn("Objects loaded!"),Object.keys(t).forEach((e=>{const o=new ObjectStorage(e);o.cache=t[e],o.cached=!0})),Object.keys(e).forEach((o=>{Array.isArray(e[o])?e[o].forEach((e=>e.resolve(t[o]))):e[o].resolve(t[o])}))})),interpretate(t.symbols,{hold:!0}).then((e=>{console.warn("Symbols loaded!"),Object.keys(e).forEach((t=>{core[t]=async(e,o)=>await interpretate(core[t].data,o),core[t].data=e[t],core[t]=async(e,o)=>{console.log("IE: calling our symbol...");const r=await interpretate(core[t].data,o);return o.root&&!o.novirtual&&(core[t].instances[o.root.uid]=o.root),r},core[t].update=async(e,o)=>{if(o.useCache)return core[t].cached&&core[t].currentData==core[t].data||(core[t].cached=await interpretate(core[t].data,o),core[t].currentData=core[t].data),core[t].cached;return await interpretate(core[t].data,o)},core[t].destroy=async(e,o)=>{delete core[t].instances[o.root.uid],console.warn(o.root.uid+" was destroyed"),console.warn("external symbol was destoryed")},core[t].data=structuredClone(e[t]),core[t].virtual=!0,core[t].instances={}})),Object.keys(o).forEach((t=>{console.warn(t),o[t].resolve(e[t])})),a.resolve()}))}))}))};core.Offload=(e,t)=>{if(e.length>1)if("'Static'"===e[1][1]){if(e[1][2])return interpretate(e[0],{...t,static:!0})}else if(e.length>2&&"'Static'"===e[2][1]&&e[2][2])return interpretate(e[0],{...t,static:!0});return interpretate(e[0],t)},core.Offload.update=(e,t)=>{if(e.length>1)if("'Volatile'"===e[1][1]){if(!e[1][2])return void console.log("Update was rejected (Nonvolatile)")}else if(e.length>2&&"'Volatile'"===e[2][1]&&!e[2][2])return void console.log("Update was rejected (Nonvolatile)");return interpretate(e[0],t)},window.server={kernel:{}},window.server.ask=t=>{const o=new Deferred;return t.length<42?(console.error("Unknown command"),console.error(t),!1):(Array.isArray(e[t.slice(42,-2)])?e[t.slice(42,-2)].push(o):e[t.slice(42,-2)]=[o],s(),o.promise)},window.server.getSymbol=e=>{const t=new Deferred;return console.warn("Asking for symbol"+e),o[e]=t,t.promise},window.server.kernel.emitt=function(e,t,o){void 0===o&&(o="Default"),n.push({uid:e,data:t,type:o})},interpretate.anonymous=async(e,t)=>{let r,n;if(console.log("Anonimous symbol: "+JSON.stringify(e)),e instanceof Array)throw console.error(e),"unknown WL expression. Error at "+e[0];r=e;const a=new Deferred;return console.warn("Asking for symbol"+r),o[r]=a,n=await a.promise,core[r]=async(e,t)=>{console.log("IE: calling our symbol...");const o=await interpretate(core[r].data,t);return t.root&&!t.novirtual&&(core[r].instances[t.root.uid]=t.root),o},core[r].update=async(e,t)=>{if(t.useCache)return core[r].cached&&core[r].currentData==core[r].data||(core[r].cached=await interpretate(core[r].data,t),core[r].currentData=core[r].data),core[r].cached;return await interpretate(core[r].data,t)},core[r].destroy=async(e,t)=>{delete core[r].instances[t.root.uid],console.warn(t.root.uid+" was destroyed"),console.warn("external symbol was destoryed")},core[r].data=n,core[r].virtual=!0,core[r].instances={},interpretate(e,t)},(async()=>{if(console.warn("Kernel"),r){if(console.warn("KERNEL"),!interpretate.unzlib64String){const e=new Deferred,t=document.createElement("script");t.src="https://cdn.jsdelivr.net/gh/JerryI/wljs-export-html@main/dist/zip.min.js",t.addEventListener("load",(()=>e.resolve())),document.head.appendChild(t),await e.promise,console.warn("ZIP loaded!")}if(!window.KernelState){const e=new Deferred,t=document.createElement("script");t.src="https://cdn.jsdelivr.net/gh/JerryI/wljs-export-html@main/dist/decoder.min.js",t.addEventListener("load",(()=>e.resolve())),document.head.appendChild(t),await e.promise,console.warn("KernelState lib loaded!")}fetch(r).then((e=>{console.log(e),e.json().then((async e=>{let t=e;t=t.map((e=>interpretate.unzlib64String(e))),t=t.map(KernelMesh.unpack),console.warn("Mesh loaded!"),window.server.kernel.emitt=function(e,o,r){void 0===r&&(r="Default"),setTimeout((()=>{const n={type:"event",uid:e,pattern:r,data:o},a=t;for(let e=0;e<a.length;++e)if(a[e].test(n)){if(a[e].state)a[e].state=new KernelState(a[e].state,n,!0);else{if(a[e].database.has("$initialization")){a[e].database.get("$initialization").forEach((t=>a[e].state=new KernelState(a[e].state,t,!0)))}a[e].state=new KernelState(a[e].state,n,!0)}a[e].state.exec(a[e].database,(e=>{for(const t of Object.keys(e))if(console.warn(t),"$state"!==t)if(1===e[t].set.length){console.log(e[t].set[0]),core[t].data=structuredClone(e[t].set[0]);for(const e of Object.values(core[t].instances))e.update()}else{e[t].i+=1,e[t].i>=e[t].set.length&&(e[t].i=0),core[t].data=structuredClone(e[t].set[e[t].i]);for(const e of Object.values(core[t].instances))e.update()}}))}}),4)},n.forEach((e=>window.server.kernel.emitt(e.uid,e.data,e.type)))}))}))}})()})),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("a",{href:o,className:"dark"==a?"p-2 text-xs w-full flex ring-1 ring-inset shadow ring-gray-300 text-gray-300 my-2":"p-2 text-xs w-full flex ring-1 ring-inset text-gray-600 shadow ring-gray-300 bg-gray-300 my-2",children:["Download original notebook ",(0,l.jsx)(s,{})]})})}function d(e){let{children:t,data:o}=e;const r={__html:decodeURIComponent(t)};return(0,l.jsx)("div",{dangerouslySetInnerHTML:r})}function u(e){let{children:t,nid:o,id:r,type:a,display:s,opts:i}=e;const d=(0,n.useRef)(null),{colorMode:u,setColorMode:p}=(0,c.U)(),C=decodeURIComponent(t),[m,B]=(0,n.useState)(i.Fade),[h,f]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=d.current;let t;if(console.warn("Create Codemirror"),console.warn(s),console.log(C),f(!0),console.warn("Created: "+s),"print"!=s){if(window.SupportedCells[s])return window.SupportedCells[s].view&&(t=new window.SupportedCells[s].view({element:e},C)),t.editor&&i.Fade&&(d.current.addEventListener("focusin",(()=>{B(!1)})),d.current.addEventListener("focusout",(()=>{B(!0)}))),()=>{t&&t.dispose()};console.warn("Not found: "+s)}}),[]),(0,l.jsx)("div",{style:{filter:"dark"==u?"invert(1) contrast(0.8) hue-rotate(-185deg)":"none"},className:"language-mathematica codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block",children:(0,l.jsx)("div",{className:m?"h-fade-20 codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module":"codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module",children:(0,l.jsxs)("pre",{tabIndex:"0",className:"prism-code language-mathematica codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar",style:{color:"rgb(57, 58, 52)",backgroundColor:"rgb(246, 248, 250)"},children:[!h&&(0,l.jsx)("code",{style:{whiteSpace:"pre-wrap"},className:"codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module",children:C}),(0,l.jsx)("code",{ref:d,className:"codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"})]})})})}},52540:(e,t,o)=>{"use strict";o.d(t,{c:()=>r});const r=o.p+"deda4e9bc5bff69ba7bef269d8d3eef9.txt"},15200:(e,t,o)=>{"use strict";o.d(t,{c:()=>r});const r=o.p+"c6f8d09f3b01e139d28eff382b80038e.txt"},71792:(e,t,o)=>{"use strict";o.d(t,{c:()=>r});const r=o.p+"e2d5037868401a8dbadfc8bf9421e5cf.wln"},47944:()=>{},73223:()=>{}}]);