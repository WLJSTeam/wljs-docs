"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[87336],{9694:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var a=t(74848),i=t(28453);const r={authors:"jerryi",tags:["short","animation"],title:"Trippy raster animation",enableComments:!0},o=void 0,s={permalink:"/blog/2024/09/07/raster",source:"@site/blog/2024-09-07-raster.md",title:"Trippy raster animation",description:"Another raster animation. Now without OpenCL, pure WL and Compile",date:"2024-09-07T00:00:00.000Z",tags:[{label:"short",permalink:"/blog/tags/short"},{label:"animation",permalink:"/blog/tags/animation"}],readingTime:.715,hasTruncateMarker:!0,authors:[{name:"Kirill Vasin",title:"Maintainer",url:"https://github.com/JerryI",imageURL:"https://avatars.githubusercontent.com/u/4111822?s=48&v=4",key:"jerryi"}],frontMatter:{authors:"jerryi",tags:["short","animation"],title:"Trippy raster animation",enableComments:!0},unlisted:!1,prevItem:{title:"Animated bar charts",permalink:"/blog/2024/09/11/barcharts"},nextItem:{title:"Basics of Compute Shaders in WL 1",permalink:"/blog/2024/09/1/basics-csh-1"}},d={authorsImageUrls:[void 0]},l=[];function m(n){const e={code:"code",img:"img",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:["Another raster animation. Now without OpenCL, pure WL and ",(0,a.jsx)(e.code,{children:"Compile"})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:t(89057).A+"",width:"800",height:"422"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-mathematica",children:'gen = Compile[{{time, _Real}, {f1, _Real}, {f2, _Real}, {f3, _Real}},\nTable[With[{fpos = {i,j}},\n  With[{result = Module[{\n      d0 = Norm[fpos], \n      d1 = 1.0, \n      d2 = 1.0, \n      d3 = 1.0\n    },\n    \n    d1 = Sin[d0 f1 + time]/6.;\n    d2 = Sin[d0 f2 + time]/6.;\n    d3 = Sin[d0 f3 + time]/6.;\n    \n    d1 = Abs[d1];\n    d2 = Abs[d2];\n    d3 = Abs[d3];\n    \n    d1 = 0.02 / (d1 + 0.01);\n    d2 = 0.02 / (d2 + 0.01);\n    d3 = 0.02 / (d3 + 0.01);\n    \n    {d1, d2, d3} 255.0\n  ]},\n    result\n  ]\n], {i, -0.5, 0.5, 1.0/500.0}, {j, -0.5, 0.5, 1.0/500.0}]\n, CompilationTarget->"C", RuntimeOptions->"Speed"];\n\nbuffer = NumericArray[gen[0,5.0, 8.0, 16.0], "UnsignedInteger8", "ClipAndRound"];\n\nImage[buffer // Offload, "Byte"]\n\na = 0.0;\nDo[\n\n  buffer = NumericArray[gen[a, Cos[a/5.0] 5.0, Sin[a/8.0] 8.0, Sin[a/16.0] 16.0], "UnsignedInteger8", "ClipAndRound"];\n  a = a + 0.1;\n  \n, {k,300}];\n'})})]})}function c(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(m,{...n})}):m(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>s});var a=t(96540);const i={},r=a.createContext(i);function o(n){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),a.createElement(r.Provider,{value:e},n.children)}},89057:(n,e,t)=>{t.d(e,{A:()=>a});const a=t.p+"assets/images/trippy1-ezgif.com-optimize-0b77a50d061bddb9a197eac7411d798e.gif"}}]);