"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[39680],{33656:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var s=t(17624),i=t(4552);const o={sidebar_position:5},l=void 0,r={id:"frontend/Cell types/ESM",title:"ESM",description:"Currently not supported on Windows",source:"@site/docs/frontend/Cell types/ESM.md",sourceDirName:"frontend/Cell types",slug:"/frontend/Cell types/ESM",permalink:"/wljs-docs/frontend/Cell types/ESM",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1732043213e3,sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Javascript",permalink:"/wljs-docs/frontend/Cell types/Javascript"},next:{title:"Files",permalink:"/wljs-docs/frontend/Cell types/Files"}},a={},d=[{value:"Context",id:"context",level:2},{value:"this.ondestroy",id:"thisondestroy",level:3},{value:"this.return",id:"thisreturn",level:3},{value:"Example",id:"example",level:2},{value:"FAQ",id:"faq",level:2},{value:"How to install <code>npm</code> package?",id:"how-to-install-npm-package",level:3},{value:"How to import a module?",id:"how-to-import-a-module",level:3}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"Currently not supported on Windows"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Type ",(0,s.jsx)(n.code,{children:".esm"})," in the first line of an input cell"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This is a sub-type of ",(0,s.jsx)(n.a,{href:"/wljs-docs/frontend/Cell%20types/Javascript",children:"Javascript"})," cells, where it uses globally installed NodeJS to compile the code to a ESM module."]}),"\n",(0,s.jsxs)(n.p,{children:["The main motivation behind this is to utilize ",(0,s.jsx)(n.code,{children:"npm"})," packages and build a standalone script, which can be executed right in the notebook and then stored there."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["It automatically creates ",(0,s.jsx)(n.code,{children:"package.json"})," in the directory of your notebook."]})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"This requires NodeJS to be installed on your system."})}),"\n",(0,s.jsxs)(n.p,{children:["Unlike ",(0,s.jsx)(n.a,{href:"/wljs-docs/frontend/Cell%20types/Javascript",children:"Javascript"})," it is not possible to return anything from ESM module, however global context allows to return asynchronously"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:".esm\n\nconst dom = document.createElement('span');\ndom.style.color = \"red\";\ndom.innerText = 'Hello World';\n\nthis.return(dom);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(14204).c+"",width:"1902",height:"122"})}),"\n",(0,s.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,s.jsx)(n.p,{children:"There is a few quite useful built-in objects accessible from the cell."}),"\n",(0,s.jsx)(n.h3,{id:"thisondestroy",children:"this.ondestroy"}),"\n",(0,s.jsx)(n.p,{children:"This object is called when a cell has been destroyed. Assign any clean-up function to the given object"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"this.ondestroy = () => {\n\t//clean up the stuff\n}\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsxs)(n.p,{children:["Always clean up any timers using ",(0,s.jsx)(n.code,{children:"this.ondestroy"})," property. Otherwise those timers and animation loops will continue to work even after reevaluating the cell."]})}),"\n",(0,s.jsx)(n.h3,{id:"thisreturn",children:"this.return"}),"\n",(0,s.jsx)(n.p,{children:"This is a function, which return a given object to the output cell"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"this.return(dom);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.p,{children:"Let us make Siri animation. Firstly, install dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:".sh\nnpm i siriwave --prefix .\n"})}),"\n",(0,s.jsx)(n.p,{children:"Now make a simple animation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:".esm\n\nimport SiriWave from \"siriwave\";\n\nconst dom = document.createElement('div');\nthis.return(dom);\n\nlet siriWave;\n\nsiriWave = new SiriWave({\n\tcontainer: dom,\n\theight:300,\n    style: \"ios9\",\n\twidth:600\n});\n\nsiriWave.start();\n\nthis.ondestroy = () => {\n  siriWave.dispose();\n  console.warn('removed');\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"After running this cell you will see this"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(72592).c+"",width:"800",height:"297"})}),"\n",(0,s.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,s.jsxs)(n.h3,{id:"how-to-install-npm-package",children:["How to install ",(0,s.jsx)(n.code,{children:"npm"})," package?"]}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.a,{href:"/wljs-docs/frontend/Cell%20types/Many%20more#Shell",children:"Shell"})," cell and run"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:".sh\nnpm i <name> ---prefix .\n"})}),"\n",(0,s.jsx)(n.h3,{id:"how-to-import-a-module",children:"How to import a module?"}),"\n",(0,s.jsxs)(n.p,{children:["Since it is ESM module, one can use ",(0,s.jsx)(n.code,{children:"import"})," as normal"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:".esm\n\nimport { obj } from 'package'\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},14204:(e,n,t)=>{t.d(n,{c:()=>s});const s=t.p+"assets/images/Screenshot 2024-11-17 at 23.15.03-0e7ff53b067f93fe92cf0ab1b58995d8.png"},72592:(e,n,t)=>{t.d(n,{c:()=>s});const s=t.p+"assets/images/ggsiri-ezgif.com-video-to-gif-converter-21266b25d911baabdab6ed5602f1986c.gif"},4552:(e,n,t)=>{t.d(n,{I:()=>r,M:()=>l});var s=t(11504);const i={},o=s.createContext(i);function l(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);